/*! For license information please see main.1621b1da.js.LICENSE.txt */
(()=>{var e={5513:(e,t,n)=>{"use strict";n.d(t,{A:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,s=String.fromCharCode,o=Object.assign;function a(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function d(e){return e.length}function f(e){return e.length}function p(e,t){return t.push(e),e}var m=1,g=1,y=0,v=0,w=0,b="";function _(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:m,column:g,length:o,return:""}}function I(e,t){return o(_("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return w=v>0?u(b,--v):0,g--,10===w&&(g=1,m--),w}function k(){return w=v<y?u(b,v++):0,g++,10===w&&(g=1,m++),w}function E(){return u(b,v)}function T(){return v}function x(e,t){return h(b,e,t)}function A(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function C(e){return m=g=1,y=d(b=e),v=0,[]}function N(e){return b="",e}function R(e){return a(x(v-1,O(91===e?e+2:40===e?e+1:e)))}function P(e){for(;(w=E())&&w<33;)k();return A(e)>2||A(w)>3?"":" "}function D(e,t){for(;--t&&k()&&!(w<48||w>102||w>57&&w<65||w>70&&w<97););return x(e,T()+(t<6&&32==E()&&32==k()))}function O(e){for(;k();)switch(w){case e:return v;case 34:case 39:34!==e&&39!==e&&O(w);break;case 40:41===e&&O(e);break;case 92:k()}return v}function L(e,t){for(;k()&&e+w!==57&&(e+w!==84||47!==E()););return"/*"+x(t,v-1)+"*"+s(47===e?e:k())}function M(e){for(;!A(E());)k();return x(e,v)}var F="-ms-",j="-moz-",U="-webkit-",V="comm",z="rule",B="decl",q="@keyframes";function K(e,t){for(var n="",r=f(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function H(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case B:return e.return=e.return||e.value;case V:return"";case q:return e.return=e.value+"{"+K(e.children,r)+"}";case z:e.value=e.props.join(",")}return d(n=K(e.children,r))?e.return=e.value+"{"+n+"}":""}function G(e){return N(W("",null,null,null,[""],e=C(e),0,[0],e))}function W(e,t,n,r,i,o,a,h,f){for(var m=0,g=0,y=a,v=0,w=0,b=0,_=1,I=1,x=1,A=0,C="",N=i,O=o,F=r,j=C;I;)switch(b=A,A=k()){case 40:if(108!=b&&58==u(j,y-1)){-1!=c(j+=l(R(A),"&","&\f"),"&\f")&&(x=-1);break}case 34:case 39:case 91:j+=R(A);break;case 9:case 10:case 13:case 32:j+=P(b);break;case 92:j+=D(T()-1,7);continue;case 47:switch(E()){case 42:case 47:p($(L(k(),T()),t,n),f);break;default:j+="/"}break;case 123*_:h[m++]=d(j)*x;case 125*_:case 59:case 0:switch(A){case 0:case 125:I=0;case 59+g:-1==x&&(j=l(j,/\f/g,"")),w>0&&d(j)-y&&p(w>32?J(j+";",r,n,y-1):J(l(j," ","")+";",r,n,y-2),f);break;case 59:j+=";";default:if(p(F=Q(j,t,n,m,g,i,h,C,N=[],O=[],y),o),123===A)if(0===g)W(j,t,F,F,N,o,y,h,O);else switch(99===v&&110===u(j,3)?100:v){case 100:case 108:case 109:case 115:W(e,F,F,r&&p(Q(e,F,F,0,0,i,h,C,i,N=[],y),O),i,O,y,h,r?N:O);break;default:W(j,F,F,F,[""],O,0,h,O)}}m=g=w=0,_=x=1,C=j="",y=a;break;case 58:y=1+d(j),w=b;default:if(_<1)if(123==A)--_;else if(125==A&&0==_++&&125==S())continue;switch(j+=s(A),A*_){case 38:x=g>0?1:(j+="\f",-1);break;case 44:h[m++]=(d(j)-1)*x,x=1;break;case 64:45===E()&&(j+=R(k())),v=E(),g=y=d(C=j+=M(T())),A++;break;case 45:45===b&&2==d(j)&&(_=0)}}return o}function Q(e,t,n,r,s,o,c,u,d,p,m){for(var g=s-1,y=0===s?o:[""],v=f(y),w=0,b=0,I=0;w<r;++w)for(var S=0,k=h(e,g+1,g=i(b=c[w])),E=e;S<v;++S)(E=a(b>0?y[S]+" "+k:l(k,/&\f/g,y[S])))&&(d[I++]=E);return _(e,t,n,0===s?z:u,d,p,m)}function $(e,t,n){return _(e,t,n,V,s(w),h(e,2,-2),0)}function J(e,t,n,r){return _(e,t,n,B,h(e,0,r),h(e,r+1,-1),r)}var Y=function(e,t,n){for(var r=0,i=0;r=i,i=E(),38===r&&12===i&&(t[n]=1),!A(i);)k();return x(e,v)},X=function(e,t){return N(function(e,t){var n=-1,r=44;do{switch(A(r)){case 0:38===r&&12===E()&&(t[n]=1),e[n]+=Y(v-1,t,n);break;case 2:e[n]+=R(r);break;case 4:if(44===r){e[++n]=58===E()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=s(r)}}while(r=k());return e}(C(e),t))},Z=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Z.get(n))&&!r){Z.set(e,!0);for(var i=[],s=X(t,i),o=n.props,a=0,l=0;a<s.length;a++)for(var c=0;c<o.length;c++,l++)e.props[l]=i[a]?s[a].replace(/&\f/g,o[c]):o[c]+" "+s[a]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return U+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return U+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return U+e+j+e+F+e+e;case 6828:case 4268:return U+e+F+e+e;case 6165:return U+e+F+"flex-"+e+e;case 5187:return U+e+l(e,/(\w+).+(:[^]+)/,U+"box-$1$2"+F+"flex-$1$2")+e;case 5443:return U+e+F+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return U+e+F+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return U+e+F+l(e,"shrink","negative")+e;case 5292:return U+e+F+l(e,"basis","preferred-size")+e;case 6060:return U+"box-"+l(e,"-grow","")+U+e+F+l(e,"grow","positive")+e;case 4554:return U+l(e,/([^-])(transform)/g,"$1"+U+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,U+"$1"),/(image-set)/,U+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,U+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,U+"box-pack:$3"+F+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+U+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,U+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+U+"$2-$3$1"+j+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,d(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+U)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+U+(45===u(e,14)?"inline-":"")+"box$3$1"+U+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return U+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return U+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return U+e+F+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return U+e+F+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case B:e.return=ne(e.value,e.length);break;case q:return K([I(e,{value:l(e.value,"@","@"+U)})],r);case z:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return K([I(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return K([I(e,{props:[l(t,/:(plac\w+)/,":"+U+"input-$1")]}),I(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),I(e,{props:[l(t,/:(plac\w+)/,F+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var s,o,a={},l=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;l.push(e)}));var c,u,h=[H,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],d=function(e){var t=f(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}([ee,te].concat(i,h));o=function(e,t,n,r){c=n,K(G(e?e+"{"+t.styles+"}":t.styles),d),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new r({key:t,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return p.sheet.hydrate(l),p}},918:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},5756:(e,t,n)=>{"use strict";n.d(t,{C:()=>a,T:()=>c,i:()=>s,w:()=>l});var r=n(5043),i=n(5513),s=(n(2830),n(9436),!0),o=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null);var a=o.Provider,l=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(o);return e(t,i,n)}))};s||(l=function(e){return function(t){var n=(0,r.useContext)(o);return null===n?(n=(0,i.A)({key:"css"}),r.createElement(o.Provider,{value:n},e(t,n))):e(t,n)}});var c=r.createContext({})},3290:(e,t,n)=>{"use strict";n.d(t,{AH:()=>c,i7:()=>u,mL:()=>l});var r=n(5756),i=n(5043),s=n(1722),o=n(9436),a=n(2830),l=(n(5513),n(219),(0,r.w)((function(e,t){var n=e.styles,l=(0,a.J)([n],void 0,i.useContext(r.T));if(!r.i){for(var c,u=l.name,h=l.styles,d=l.next;void 0!==d;)u+=" "+d.name,h+=d.styles,d=d.next;var f=!0===t.compat,p=t.insert("",{name:u,styles:h},t.sheet,f);return f?null:i.createElement("style",((c={})["data-emotion"]=t.key+"-global "+u,c.dangerouslySetInnerHTML={__html:p},c.nonce=t.sheet.nonce,c))}var m=i.useRef();return(0,o.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),m.current=[n,r],function(){n.flush()}}),[t]),(0,o.i)((function(){var e=m.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,s.sk)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}}),[t,l.name]),null})));function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.J)(t)}var u=function(){var e=c.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},2830:(e,t,n)=>{"use strict";n.d(t,{J:()=>p});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(918),s=/[A-Z]|^ms/g,o=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(e){return 45===e.charCodeAt(1)},l=function(e){return null!=e&&"boolean"!==typeof e},c=(0,i.A)((function(e){return a(e)?e:e.replace(s,"-$&").toLowerCase()})),u=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(o,(function(e,t,n){return d={name:t,styles:n,next:d},t}))}return 1===r[e]||a(e)||"number"!==typeof t||0===t?t:t+"px"};function h(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return d={name:n.name,styles:n.styles,next:d},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)d={name:r.name,styles:r.styles,next:d},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=h(e,t,n[i])+";";else for(var s in n){var o=n[s];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=s+"{"+t[o]+"}":l(o)&&(r+=c(s)+":"+u(s,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var a=h(e,t,o);switch(s){case"animation":case"animationName":r+=c(s)+":"+a+";";break;default:r+=s+"{"+a+"}"}}else for(var d=0;d<o.length;d++)l(o[d])&&(r+=c(s)+":"+u(s,o[d])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=d,s=n(e);return d=i,h(e,t,s)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var d,f=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var p=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";d=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=h(n,t,s)):i+=s[0];for(var o=1;o<e.length;o++)i+=h(n,t,e[o]),r&&(i+=s[o]);f.lastIndex=0;for(var a,l="";null!==(a=f.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:d}}},9436:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>a,s:()=>o});var i=n(5043),s=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,o=s||function(e){return e()},a=s||i.useLayoutEffect},1722:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>s});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},s=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var s=t;do{e.insert(t===s?"."+r:"",s,e.sheet,!0),s=s.next}while(void 0!==s)}}},4533:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),s=n(579);t.A=(0,i.default)((0,s.jsx)("path",{d:"M4 10h3v7H4zm6.5 0h3v7h-3zM2 19h20v3H2zm15-9h3v7h-3zm-5-9L2 6v2h20V6z"}),"AccountBalance")},9120:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),s=n(579);t.A=(0,i.default)((0,s.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},4055:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),s=n(579);t.A=(0,i.default)((0,s.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz")},5678:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),s=n(579);t.A=(0,i.default)((0,s.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},7412:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),s=n(579);t.A=(0,i.default)((0,s.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star")},2994:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),s=n(579);t.A=(0,i.default)((0,s.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorder")},39:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(6958)},8279:(e,t,n)=>{"use strict";n.d(t,{A:()=>U});var r=n(8168),i=n(8587),s=n(6632),o=n(3216),a=n(7758),l=n(8812),c=n(8280);var u=n(7266);const h={black:"#000",white:"#fff"},d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},f={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},p={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},y={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},v={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},w=["mode","contrastThreshold","tonalOffset"],b={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:h.white,default:h.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},_={text:{primary:h.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:h.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function I(e,t,n,r){const i=r.light||r,s=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,u.a)(e.main,i):"dark"===t&&(e.dark=(0,u.e$)(e.main,s)))}function S(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2}=e,l=(0,i.A)(e,w),c=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(t),S=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[200],light:f[50],dark:f[400]}:{main:f[500],light:f[300],dark:f[700]}}(t),k=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[500],light:p[300],dark:p[700]}:{main:p[700],light:p[400],dark:p[800]}}(t),E=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[700],light:y[500],dark:y[900]}}(t),T=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[800],light:v[500],dark:v[900]}}(t),x=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(t);function A(e){return(0,u.eM)(e,_.text.primary)>=n?_.text.primary:b.text.primary}const C=e=>{let{color:t,name:n,mainShade:i=500,lightShade:o=300,darkShade:l=700}=e;if(t=(0,r.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,s.A)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error((0,s.A)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return I(t,"light",o,a),I(t,"dark",l,a),t.contrastText||(t.contrastText=A(t.main)),t},N={dark:_,light:b};return(0,o.A)((0,r.A)({common:(0,r.A)({},h),mode:t,primary:C({color:c,name:"primary"}),secondary:C({color:S,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:C({color:k,name:"error"}),warning:C({color:x,name:"warning"}),info:C({color:E,name:"info"}),success:C({color:T,name:"success"}),grey:d,contrastThreshold:n,getContrastText:A,augmentColor:C,tonalOffset:a},N[t]),l)}const k=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const E={textTransform:"uppercase"},T='"Roboto", "Helvetica", "Arial", sans-serif';function x(e,t){const n="function"===typeof t?t(e):t,{fontFamily:s=T,fontSize:a=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:h=700,htmlFontSize:d=16,allVariants:f,pxToRem:p}=n,m=(0,i.A)(n,k);const g=a/14,y=p||(e=>"".concat(e/d*g,"rem")),v=(e,t,n,i,o)=>{return(0,r.A)({fontFamily:s,fontWeight:e,fontSize:y(t),lineHeight:n},s===T?{letterSpacing:"".concat((a=i/t,Math.round(1e5*a)/1e5),"em")}:{},o,f);var a},w={h1:v(l,96,1.167,-1.5),h2:v(l,60,1.2,-.5),h3:v(c,48,1.167,0),h4:v(c,34,1.235,.25),h5:v(c,24,1.334,0),h6:v(u,20,1.6,.15),subtitle1:v(c,16,1.75,.15),subtitle2:v(u,14,1.57,.1),body1:v(c,16,1.5,.15),body2:v(c,14,1.43,.15),button:v(u,14,1.75,.4,E),caption:v(c,12,1.66,.4),overline:v(c,12,2.66,1,E),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,o.A)((0,r.A)({htmlFontSize:d,pxToRem:y,fontFamily:s,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:h},w),m,{clone:!1})}function A(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const C=["none",A(0,2,1,-1,0,1,1,0,0,1,3,0),A(0,3,1,-2,0,2,2,0,0,1,5,0),A(0,3,3,-2,0,3,4,0,0,1,8,0),A(0,2,4,-1,0,4,5,0,0,1,10,0),A(0,3,5,-1,0,5,8,0,0,1,14,0),A(0,3,5,-1,0,6,10,0,0,1,18,0),A(0,4,5,-2,0,7,10,1,0,2,16,1),A(0,5,5,-3,0,8,10,1,0,3,14,2),A(0,5,6,-3,0,9,12,1,0,3,16,2),A(0,6,6,-3,0,10,14,1,0,4,18,3),A(0,6,7,-4,0,11,15,1,0,4,20,3),A(0,7,8,-4,0,12,17,2,0,5,22,4),A(0,7,8,-4,0,13,19,2,0,5,24,4),A(0,7,9,-4,0,14,21,2,0,5,26,4),A(0,8,9,-5,0,15,22,2,0,6,28,5),A(0,8,10,-5,0,16,24,2,0,6,30,5),A(0,8,11,-5,0,17,26,2,0,6,32,5),A(0,9,11,-5,0,18,28,2,0,7,34,6),A(0,9,12,-6,0,19,29,2,0,7,36,6),A(0,10,13,-6,0,20,31,3,0,8,38,7),A(0,10,13,-6,0,21,33,3,0,8,40,7),A(0,10,14,-6,0,22,35,3,0,8,42,7),A(0,11,14,-7,0,23,36,3,0,9,44,8),A(0,11,15,-7,0,24,38,3,0,9,46,8)],N=["duration","easing","delay"],R={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},P={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function D(e){return"".concat(Math.round(e),"ms")}function O(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function L(e){const t=(0,r.A)({},R,e.easing),n=(0,r.A)({},P,e.duration);return(0,r.A)({getAutoHeightDuration:O,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:s=n.standard,easing:o=t.easeInOut,delay:a=0}=r;(0,i.A)(r,N);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof s?s:D(s)," ").concat(o," ").concat("string"===typeof a?a:D(a)))).join(",")}},e,{easing:t,duration:n})}const M={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},F=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:u={},typography:h={}}=e,d=(0,i.A)(e,F);if(e.vars)throw new Error((0,s.A)(18));const f=S(n),p=(0,c.A)(e);let m=(0,o.A)(p,{mixins:(g=p.breakpoints,y=t,(0,r.A)({toolbar:{minHeight:56,[g.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[g.up("sm")]:{minHeight:64}}},y)),palette:f,shadows:C.slice(),typography:x(f,h),transitions:L(u),zIndex:(0,r.A)({},M)});var g,y;m=(0,o.A)(m,d);for(var v=arguments.length,w=new Array(v>1?v-1:0),b=1;b<v;b++)w[b-1]=arguments[b];return m=w.reduce(((e,t)=>(0,o.A)(e,t)),m),m.unstable_sxConfig=(0,r.A)({},a.A,null==d?void 0:d.unstable_sxConfig),m.unstable_sx=function(e){return(0,l.A)({sx:e,theme:this})},m}const U=j},5170:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(8279).A)()},3375:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r="$$material"},7123:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}},7291:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>l});var r=n(8052),i=n(5170),s=n(3375),o=n(7123);const a=e=>(0,o.A)(e)&&"classes"!==e,l=(0,r.Ay)({themeId:s.A,defaultTheme:i.A,rootShouldForwardProp:a})},805:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(8168);function i(e,t){const n=(0,r.A)({},t);return Object.keys(e).forEach((s=>{if(s.toString().match(/^(components|slots)$/))n[s]=(0,r.A)({},e[s],n[s]);else if(s.toString().match(/^(componentsProps|slotProps)$/)){const o=e[s]||{},a=t[s];n[s]={},a&&Object.keys(a)?o&&Object.keys(o)?(n[s]=(0,r.A)({},a),Object.keys(o).forEach((e=>{n[s][e]=i(o[e],a[e])}))):n[s]=a:n[s]=o}else void 0===n[s]&&(n[s]=e[s])})),n}function s(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?i(t.components[n].defaultProps,r):r}var o=n(8280),a=n(7082);const l=(0,o.A)();const c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return(0,a.A)(e)};var u=n(5170),h=n(3375);function d(e){let{props:t,name:n}=e;return function(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,o=c(r);return i&&(o=o[i]||o),s({theme:o,name:n,props:t})}({props:t,name:n,defaultTheme:u.A,themeId:h.A})}},6803:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(410).A},9662:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var r=n(8168),i=n(5043),s=n(8587),o=n(8387),a=n(8606),l=n(6803),c=n(805),u=n(7291),h=n(7056),d=n(2400);function f(e){return(0,d.Ay)("MuiSvgIcon",e)}(0,h.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var p=n(579);const m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,u.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat((0,l.A)(n.color))],t["fontSize".concat((0,l.A)(n.fontSize))]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,s,o,a,l,c,u,h,d,f,p,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(s=t.transitions)||null==(s=s.duration)?void 0:s.shorter}),fontSize:{inherit:"inherit",small:(null==(o=t.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=t.typography)||null==(h=u.pxToRem)?void 0:h.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(d=null==(f=(t.vars||t).palette)||null==(f=f[n.color])?void 0:f.main)?d:{action:null==(p=(t.vars||t).palette)||null==(p=p.action)?void 0:p.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}})),y=i.forwardRef((function(e,t){const n=(0,c.A)({props:e,name:"MuiSvgIcon"}),{children:u,className:h,color:d="inherit",component:y="svg",fontSize:v="medium",htmlColor:w,inheritViewBox:b=!1,titleAccess:_,viewBox:I="0 0 24 24"}=n,S=(0,s.A)(n,m),k=i.isValidElement(u)&&"svg"===u.type,E=(0,r.A)({},n,{color:d,component:y,fontSize:v,instanceFontSize:e.fontSize,inheritViewBox:b,viewBox:I,hasSvgAsChild:k}),T={};b||(T.viewBox=I);const x=(e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root","inherit"!==t&&"color".concat((0,l.A)(t)),"fontSize".concat((0,l.A)(n))]};return(0,a.A)(i,f,r)})(E);return(0,p.jsxs)(g,(0,r.A)({as:y,className:(0,o.A)(x.root,h),focusable:"false",color:w,"aria-hidden":!_||void 0,role:_?"img":void 0,ref:t},T,S,k&&u.props,{ownerState:E,children:[k?u.props.children:u,_?(0,p.jsx)("title",{children:_}):null]}))}));y.muiName="SvgIcon";const v=y;function w(e,t){function n(n,i){return(0,p.jsx)(v,(0,r.A)({"data-testid":"".concat(t,"Icon"),ref:i},n,{children:e}))}return n.muiName=v.muiName,i.memo(i.forwardRef(n))}},6958:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>i.A,createChainedFunction:()=>s,createSvgIcon:()=>o.A,debounce:()=>a,deprecatedPropType:()=>l,isMuiElement:()=>u,ownerDocument:()=>d,ownerWindow:()=>f,requirePropFactory:()=>p,setRef:()=>m,unstable_ClassNameGenerator:()=>S,unstable_useEnhancedEffect:()=>g,unstable_useId:()=>y.A,unsupportedProp:()=>v,useControlled:()=>w.A,useEventCallback:()=>b.A,useForkRef:()=>_.A,useIsFocusVisible:()=>I.A});var r=n(5430),i=n(6803);const s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))};var o=n(9662);const a=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r};const l=function(e,t){return()=>null};var c=n(5043);const u=function(e,t){var n,r;return c.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(r=e.type)||null==(r=r._payload)||null==(r=r.value)?void 0:r.muiName)};function h(e){return e&&e.ownerDocument||document}const d=h;const f=function(e){return h(e).defaultView||window};n(8168);const p=function(e,t){return()=>null};const m=n(9184).A;const g=n(3844).A;var y=n(5047);const v=function(e,t,n,r,i){return null};var w=n(5242),b=n(9148),_=n(7605),I=n(2191);const S={configure:e=>{r.A.configure(e)}}},5242:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043);const i=function(e){let{controlled:t,default:n,name:i,state:s="value"}=e;const{current:o}=r.useRef(void 0!==t),[a,l]=r.useState(n);return[o?t:a,r.useCallback((e=>{o||l(e)}),[])]}},9148:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(5043),i=n(3844);const s=function(e){const t=r.useRef(e);return(0,i.A)((()=>{t.current=e})),r.useRef((function(){return(0,t.current)(...arguments)})).current}},7605:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(5043),i=n(9184);const s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{(0,i.A)(t,e)}))}),t)}},5047:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5043);let i=0;const s=n.t(r,2)["useId".toString()];const o=function(e){if(void 0!==s){const t=s();return null!=e?e:t}return function(e){const[t,n]=r.useState(e),s=e||t;return r.useEffect((()=>{null==t&&(i+=1,n("mui-".concat(i)))}),[t]),s}(e)}},2191:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(5043),i=n(1140);let s=!0,o=!1;const a=new i.E,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(s=!0)}function u(){s=!1}function h(){"hidden"===this.visibilityState&&o&&(s=!0)}function d(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return s||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!l[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const f=function(){const e=r.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("touchstart",u,!0),t.addEventListener("visibilitychange",h,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!d(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(o=!0,a.start(100,(()=>{o=!1})),t.current=!1,!0)},ref:e}}},7713:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>S,StyledEngineProvider:()=>I,ThemeContext:()=>l.T,css:()=>v.AH,default:()=>k,internal_processStyles:()=>E,keyframes:()=>v.i7});var r=n(8168),i=n(5043),s=n(918),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,s.A)((function(e){return o.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),l=n(5756),c=n(1722),u=n(2830),h=n(9436),d=a,f=function(e){return"theme"!==e},p=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?d:f},m=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},g=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,c.SF)(t,n,r),(0,h.s)((function(){return(0,c.sk)(t,n,r)})),null},y=function e(t,n){var s,o,a=t.__emotion_real===t,h=a&&t.__emotion_base||t;void 0!==n&&(s=n.label,o=n.target);var d=m(t,n,a),f=d||p(h),y=!f("as");return function(){var v=arguments,w=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==s&&w.push("label:"+s+";"),null==v[0]||void 0===v[0].raw)w.push.apply(w,v);else{0,w.push(v[0][0]);for(var b=v.length,_=1;_<b;_++)w.push(v[_],v[0][_])}var I=(0,l.w)((function(e,t,n){var r=y&&e.as||h,s="",a=[],m=e;if(null==e.theme){for(var v in m={},e)m[v]=e[v];m.theme=i.useContext(l.T)}"string"===typeof e.className?s=(0,c.Rk)(t.registered,a,e.className):null!=e.className&&(s=e.className+" ");var b=(0,u.J)(w.concat(a),t.registered,m);s+=t.key+"-"+b.name,void 0!==o&&(s+=" "+o);var _=y&&void 0===d?p(r):f,I={};for(var S in e)y&&"as"===S||_(S)&&(I[S]=e[S]);return I.className=s,I.ref=n,i.createElement(i.Fragment,null,i.createElement(g,{cache:t,serialized:b,isStringTag:"string"===typeof r}),i.createElement(r,I))}));return I.displayName=void 0!==s?s:"Styled("+("string"===typeof h?h:h.displayName||h.name||"Component")+")",I.defaultProps=t.defaultProps,I.__emotion_real=I,I.__emotion_base=h,I.__emotion_styles=w,I.__emotion_forwardProp=d,Object.defineProperty(I,"toString",{value:function(){return"."+o}}),I.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:m(I,i,!0)})).apply(void 0,w)},I}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){y[e]=y(e)}));var v=n(3290),w=n(5513),b=n(579);let _;function I(e){const{injectFirst:t,children:n}=e;return t&&_?(0,b.jsx)(l.C,{value:_,children:n}):n}function S(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,b.jsx)(v.mL,{styles:r})}function k(e,t){return y(e,t)}"object"===typeof document&&(_=(0,w.A)({key:"css",prepend:!0}));const E=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},7266:(e,t,n)=>{"use strict";var r=n(4994);t.X4=f,t.e$=p,t.eM=function(e,t){const n=d(e),r=d(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.a=m;var i=r(n(7245)),s=r(n(5383));function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,s.default)(e,t,n)}function a(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}function l(e){if(e.type)return e;if("#"===e.charAt(0))return l(a(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,s=e.substring(t+1,e.length-1);if("color"===n){if(s=s.split(" "),r=s.shift(),4===s.length&&"/"===s[3].charAt(0)&&(s[3]=s[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else s=s.split(",");return s=s.map((e=>parseFloat(e))),{type:n,values:s,colorSpace:r}}const c=e=>{const t=l(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")};function u(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function h(e){e=l(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const c=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(a+="a",c.push(t[3])),u({type:a,values:c})}function d(e){let t="hsl"===(e=l(e)).type||"hsla"===e.type?l(h(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function f(e,t){return e=l(e),t=o(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,u(e)}function p(e,t){if(e=l(e),t=o(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return u(e)}function m(e,t){if(e=l(e),t=o(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return u(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return d(e)>.5?p(e,t):m(e,t)}},8052:(e,t,n)=>{"use strict";var r=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=m,rootShouldForwardProp:r=p,slotShouldForwardProp:l=p}=e,u=e=>(0,c.default)((0,i.default)({},e,{theme:y((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:h,slot:f,skipVariantsResolver:m,skipSx:b,overridesResolver:_=v(g(f))}=c,I=(0,s.default)(c,d),S=void 0!==m?m:f&&"Root"!==f&&"root"!==f||!1,k=b||!1;let E=p;"Root"===f||"root"===f?E=r:f?E=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(E=void 0);const T=(0,o.default)(e,(0,i.default)({shouldForwardProp:E,label:undefined},I)),x=e=>"function"===typeof e&&e.__emotion_real!==e||(0,a.isPlainObject)(e)?r=>w(e,(0,i.default)({},r,{theme:y({theme:r.theme,defaultTheme:n,themeId:t})})):e,A=function(r){let s=x(r);for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];const c=a?a.map(x):[];h&&_&&c.push((e=>{const r=y((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[h]||!r.components[h].styleOverrides)return null;const s=r.components[h].styleOverrides,o={};return Object.entries(s).forEach((t=>{let[n,s]=t;o[n]=w(s,(0,i.default)({},e,{theme:r}))})),_(e,o)})),h&&!S&&c.push((e=>{var r;const s=y((0,i.default)({},e,{defaultTheme:n,themeId:t}));return w({variants:null==s||null==(r=s.components)||null==(r=r[h])?void 0:r.variants},(0,i.default)({},e,{theme:s}))})),k||c.push(u);const d=c.length-a.length;if(Array.isArray(r)&&d>0){const e=new Array(d).fill("");s=[...r,...e],s.raw=[...r.raw,...e]}const f=T(s,...c);return e.muiName&&(f.muiName=e.muiName),f};return T.withConfig&&(A.withConfig=T.withConfig),A}};var i=r(n(4634)),s=r(n(4893)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(7713)),a=n(4534),l=(r(n(578)),r(n(2046)),r(n(4989))),c=r(n(9265));const u=["ownerState"],h=["variants"],d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const m=(0,l.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function y(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function v(e){return e?(t,n)=>n[e]:null}function w(e,t){let{ownerState:n}=t,r=(0,s.default)(t,u);const o="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(o))return o.flatMap((e=>w(e,(0,i.default)({ownerState:n},r))));if(o&&"object"===typeof o&&Array.isArray(o.variants)){const{variants:e=[]}=o;let t=(0,s.default)(o,h);return e.forEach((e=>{let s=!0;"function"===typeof e.props?s=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(s=!1)})),s&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return o}},9751:(e,t,n)=>{"use strict";n.d(t,{EU:()=>o,NI:()=>s,vf:()=>a,zu:()=>r});const r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(r[e],"px)")};function s(e,t,n){const s=e.theme||{};if(Array.isArray(t)){const e=s.breakpoints||i;return t.reduce(((r,i,s)=>(r[e.up(e.keys[s])]=n(t[s]),r)),{})}if("object"===typeof t){const e=s.breakpoints||i;return Object.keys(t).reduce(((i,s)=>{if(-1!==Object.keys(e.values||r).indexOf(s)){i[e.up(s)]=n(t[s],s)}else{const e=s;i[e]=t[e]}return i}),{})}return n(t)}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function a(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},9703:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){const r=n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[r]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>r})},4853:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(8587),i=n(8168);const s=["values","unit","step"],o=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.A)({},e,{[t.key]:t.val})),{})};function a(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,l=(0,r.A)(e,s),c=o(t),u=Object.keys(c);function h(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function d(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-a/100).concat(n,")")}function f(e,r){const i=u.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof t[u[i]]?t[u[i]]:r)-a/100).concat(n,")")}return(0,i.A)({keys:u,values:c,up:h,down:d,between:f,only:function(e){return u.indexOf(e)+1<u.length?f(e,u[u.indexOf(e)+1]):h(e)},not:function(e){const t=u.indexOf(e);return 0===t?h(u[1]):t===u.length-1?d(u[t]):f(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},l)}},8280:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(8168),i=n(8587),s=n(3216),o=n(4853);const a={borderRadius:4};var l=n(8604);var c=n(8812),u=n(7758),h=n(9703);const d=["breakpoints","palette","spacing","shape"];const f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:f,shape:p={}}=e,m=(0,i.A)(e,d),g=(0,o.A)(t),y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,l.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(f);let v=(0,s.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:y,shape:(0,r.A)({},a,p)},m);v.applyStyles=h.A;for(var w=arguments.length,b=new Array(w>1?w-1:0),_=1;_<w;_++)b[_-1]=arguments[_];return v=b.reduce(((e,t)=>(0,s.A)(e,t)),v),v.unstable_sxConfig=(0,r.A)({},u.A,null==m?void 0:m.unstable_sxConfig),v.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},v}},4989:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>s.A});var r=n(8280),i=n(4853),s=n(9703)},3815:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(3216);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},8604:(e,t,n)=>{"use strict";n.d(t,{LX:()=>p,MA:()=>f,_W:()=>m,Lc:()=>v,Ms:()=>w});var r=n(9751),i=n(7162),s=n(3815);const o={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=o[t],i=a[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],h=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[...u,...h];function f(e,t,n,r){var s;const o=null!=(s=(0,i.Yn)(e,t,!1))?s:n;return"number"===typeof o?e=>"string"===typeof e?e:o*e:Array.isArray(o)?e=>"string"===typeof e?e:o[e]:"function"===typeof o?o:()=>{}}function p(e){return f(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const s=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(c(n),i),o=e[n];return(0,r.NI)(e,o,s)}function y(e,t){const n=p(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(s.A,{})}function v(e){return y(e,u)}function w(e){return y(e,h)}function b(e){return y(e,d)}v.propTypes={},v.filterProps=u,w.propTypes={},w.filterProps=h,b.propTypes={},b.filterProps=d},7162:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a,BO:()=>o,Yn:()=>s});var r=n(410),i=n(9751);function s(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function o(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:s(e,n)||i,t&&(r=t(r,i,e)),r}const a=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=s(e.theme,a)||{};return(0,i.NI)(e,c,(e=>{let i=o(u,l,e);return e===i&&"string"===typeof e&&(i=o(u,l,"".concat(t).concat("default"===e?"":(0,r.A)(e)),e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},7758:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var r=n(8604),i=n(7162),s=n(3815);const o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,s.A)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var a=n(9751);function l(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function c(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),h=c("borderTop",l),d=c("borderRight",l),f=c("borderBottom",l),p=c("borderLeft",l),m=c("borderColor"),g=c("borderTopColor"),y=c("borderRightColor"),v=c("borderBottomColor"),w=c("borderLeftColor"),b=c("outline",l),_=c("outlineColor"),I=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,a.NI)(e,e.borderRadius,n)}return null};I.propTypes={},I.filterProps=["borderRadius"];o(u,h,d,f,p,m,g,y,v,w,I,b,_);const S=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,a.NI)(e,e.gap,n)}return null};S.propTypes={},S.filterProps=["gap"];const k=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.columnGap,n)}return null};k.propTypes={},k.filterProps=["columnGap"];const E=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.rowGap,n)}return null};E.propTypes={},E.filterProps=["rowGap"];o(S,k,E,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function T(e,t){return"grey"===t?t:e}o((0,i.Ay)({prop:"color",themeKey:"palette",transform:T}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:T}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:T}));function x(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const A=(0,i.Ay)({prop:"width",transform:x}),C=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||a.zu[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:x(t)}};return(0,a.NI)(e,e.maxWidth,t)}return null};C.filterProps=["maxWidth"];const N=(0,i.Ay)({prop:"minWidth",transform:x}),R=(0,i.Ay)({prop:"height",transform:x}),P=(0,i.Ay)({prop:"maxHeight",transform:x}),D=(0,i.Ay)({prop:"minHeight",transform:x}),O=((0,i.Ay)({prop:"size",cssProperty:"width",transform:x}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:x}),o(A,C,N,R,P,D,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:I},color:{themeKey:"palette",transform:T},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:T},backgroundColor:{themeKey:"palette",transform:T},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:S},rowGap:{style:E},columnGap:{style:k},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:x},maxWidth:{style:C},minWidth:{transform:x},height:{transform:x},maxHeight:{transform:x},minHeight:{transform:x},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},9265:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,extendSxProp:()=>u,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>a.A});var r=n(8812),i=n(8168),s=n(8587),o=n(3216),a=n(7758);const l=["sx"],c=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:a.A;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function u(e){const{sx:t}=e,n=(0,s.A)(e,l),{systemProps:r,otherProps:a}=c(n);let u;return u=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,o.Q)(e)?(0,i.A)({},r,e):r}:(0,i.A)({},r,t),(0,i.A)({},a,{sx:u})}},8812:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,k:()=>l});var r=n(410),i=n(3815),s=n(7162),o=n(9751),a=n(7758);function l(){function e(e,t,n,i){const a={[e]:t,theme:n},l=i[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:h,style:d}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const f=(0,s.Yn)(n,u)||{};if(d)return d(a);return(0,o.NI)(a,t,(t=>{let n=(0,s.BO)(f,h,t);return t===n&&"string"===typeof t&&(n=(0,s.BO)(f,h,"".concat(e).concat("default"===t?"":(0,r.A)(t)),t)),!1===c?n:{[c]:n}}))}return function t(n){var r;const{sx:s,theme:l={}}=n||{};if(!s)return null;const c=null!=(r=l.unstable_sxConfig)?r:a.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const s=(0,o.EU)(l.breakpoints),a=Object.keys(s);let u=s;return Object.keys(r).forEach((n=>{const s=(a=r[n],h=l,"function"===typeof a?a(h):a);var a,h;if(null!==s&&void 0!==s)if("object"===typeof s)if(c[n])u=(0,i.A)(u,e(n,s,l,c));else{const e=(0,o.NI)({theme:l},s,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,s)?u=(0,i.A)(u,e):u[n]=t({sx:s,theme:l})}else u=(0,i.A)(u,e(n,s,l,c))})),(0,o.vf)(a,u)}return Array.isArray(s)?s.map(u):u(s)}}const c=l();c.filterProps=["sx"];const u=c},7082:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(5043),i=n(5756);const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.useContext(i.T);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}},5430:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})()},410:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6632);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},578:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(410)},7040:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},5383:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(7040)},8606:(e,t,n)=>{"use strict";function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}n.d(t,{A:()=>r})},3216:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,Q:()=>i});var r=n(8168);function i(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function s(e){if(!i(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=s(e[n])})),t}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,r.A)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?a[r]=o(e[r],t[r],n):n.clone?a[r]=i(t[r])?s(t[r]):t[r]:a[r]=t[r])})),a}},4534:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(3216)},6632:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},7245:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(6632)},2400:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s});var r=n(5430);const i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const s=i[t];return s?"".concat(n,"-").concat(s):"".concat(r.A.generate(e),"-").concat(t)}},7056:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2400);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return t.forEach((t=>{i[t]=(0,r.Ay)(e,t,n)})),i}},2046:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,getFunctionName:()=>s});var r=n(9565);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function s(e){const t="".concat(e).match(i);return t&&t[1]||""}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||s(e)||t}function a(e,t,n){const r=o(t);return e.displayName||(""!==r?"".concat(n,"(").concat(r,")"):n)}function l(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return o(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.ForwardRef:return a(e,e.render,"ForwardRef");case r.Memo:return a(e,e.type,"memo");default:return}}}},8609:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case s:case a:case o:case d:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case h:case m:case p:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.ForwardRef=h,t.Memo=p},9565:(e,t,n)=>{"use strict";e.exports=n(8609)},9184:(e,t,n)=>{"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{A:()=>r})},3844:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},1140:(e,t,n)=>{"use strict";n.d(t,{E:()=>o,A:()=>a});var r=n(5043);const i={};const s=[];class o{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new o}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function a(){const e=function(e,t){const n=r.useRef(i);return n.current===i&&(n.current=e(t)),n}(o.create).current;var t;return t=e.disposeEffect,r.useEffect(t,s),e}},219:(e,t,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var a=l(t),m=l(n),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{c(t,y,v)}catch(w){}}}}return t}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function I(e){return _(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return I(e)||_(e)===u},t.isConcurrentMode=I,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===s},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===v||e.$$typeof===w||e.$$typeof===b||e.$$typeof===y)},t.typeOf=_},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),I=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),x=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case I:return"Portal";case E:return"Profiler";case k:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Se=null,ke=null;function Ee(e){if(e=wi(e)){if("function"!==typeof Ie)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ie(e.stateNode,e.type,t))}}function Te(e){Se?ke?ke.push(e):ke=[e]:Se=e}function xe(){if(Se){var e=Se,t=ke;if(ke=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ae(e,t){return e(t)}function Ce(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ae(e,t,n)}finally{Ne=!1,(null!==Se||null!==ke)&&(Ce(),xe())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,It,St,kt,Et,Tt=!1,xt=[],At=null,Ct=null,Nt=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&It(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&It(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){Tt=!1,null!==At&&jt(At)&&(At=null),null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),Rt.forEach(Ut),Pt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<xt.length){zt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&zt(At,e),null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Mt(At,e,t,n,r,i),!0;case"dragenter":return Ct=Mt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return kn}var Tn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=sn(Tn),An=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Rn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Wn=null;function Qn(e){jr(e,0)}function $n(e){if(W(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Wn=Gn=null)}function nr(e){if("value"===e.propertyName&&$n(Wn)){var t=[];Hn(t,Wn,e,_e(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Wn)}function sr(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ir={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},kr={};function Er(e){if(Sr[e])return Sr[e];if(!Ir[e])return e;var t,n=Ir[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);var Tr=Er("animationend"),xr=Er("animationiteration"),Ar=Er("animationstart"),Cr=Er("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(xr,"onAnimationIteration"),Pr(Ar,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,je||(je=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=Gt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=_e(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=xn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Tr:case xr:case Ar:l=yn;break;case Cr:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&u.push(Hr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wr(u),d=Wr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(Kn(a))if(Yn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(v=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,Bn=!0)),0<(y=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=zn(n))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}jr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ii=[],Si=-1;function ki(e){return{current:e}}function Ei(e){0>Si||(e.current=Ii[Si],Ii[Si]=null,Si--)}function Ti(e,t){Si++,Ii[Si]=e.current,e.current=t}var xi={},Ai=ki(xi),Ci=ki(!1),Ni=xi;function Ri(e,t){var n=e.type.contextTypes;if(!n)return xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ci),Ei(Ai)}function Oi(e,t,n){if(Ai.current!==xi)throw Error(s(168));Ti(Ai,t),Ti(Ci,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xi,Ni=Ai.current,Ti(Ai,e),Ti(Ci,Ci.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ci),Ei(Ai),Ti(Ai,e)):Ei(Ci),Ti(Ci,n)}var ji=null,Ui=!1,Vi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=wt;try{var n=ji;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),We(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Ki=0,Hi=null,Gi=0,Wi=[],Qi=0,$i=null,Ji=1,Yi="";function Xi(e,t){qi[Ki++]=Gi,qi[Ki++]=Hi,Hi=e,Gi=t}function Zi(e,t,n){Wi[Qi++]=Ji,Wi[Qi++]=Yi,Wi[Qi++]=$i,$i=e;var r=Ji;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Yi=s+e}else Ji=1<<s|n<<i|r,Yi=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=qi[--Ki],qi[Ki]=null,Gi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Ji,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case I:return(t=jc(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case I:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Oc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case I:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var bs=ws(!0),_s=ws(!1),Is=ki(null),Ss=null,ks=null,Es=null;function Ts(){Es=ks=Ss=null}function xs(e){var t=Is.current;Ei(Is),e._currentValue=t}function As(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cs(e,t){Ss=e,Es=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===Ss)throw Error(s(308));ks=e,Ss.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Rs=null;function Ps(e){null===Rs?Rs=[e]:Rs.push(e)}function Ds(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ps(t)):(n.next=i.next,i.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function js(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Os(e,n)}return null===(i=r.interleaved)?(t.next=t,Ps(r)):(t.next=i.next,i.next=t),r.interleaved=t,Os(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Ks={},Hs=ki(Ks),Gs=ki(Ks),Ws=ki(Ks);function Qs(e){if(e===Ks)throw Error(s(174));return e}function $s(e,t){switch(Ti(Ws,t),Ti(Gs,e),Ti(Hs,Ks),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Hs),Ti(Hs,t)}function Js(){Ei(Hs),Ei(Gs),Ei(Ws)}function Ys(e){Qs(Ws.current);var t=Qs(Hs.current),n=le(t,e.type);t!==n&&(Ti(Gs,e),Ti(Hs,n))}function Xs(e){Gs.current===e&&(Ei(Hs),Ei(Gs))}var Zs=ki(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function wo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,Ml|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Io(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function ko(e,t){var n=oo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Mo(xo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ro(9,To.bind(null,n,r,i,t),void 0,null),null===Cl)throw Error(s(349));0!==(30&so)||Eo(n,t,i)}return i}function Eo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,Ao(t)&&Co(e)}function xo(e,t,n){return n((function(){Ao(t)&&Co(e)}))}function Ao(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Co(e){var t=Os(e,1);null!==t&&nc(t,e,1,-1)}function No(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Po(){return wo().memoizedState}function Do(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=wo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ro(t,n,s,r))}oo.flags|=e,i.memoizedState=Ro(1|t,n,s,r)}function Lo(e,t){return Do(8390656,8,e,t)}function Mo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function jo(e,t){return Oo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,Uo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ho(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{wt=n,io.transition=r}}function Go(){return wo().memoizedState}function Wo(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$o(e))Jo(t,n);else if(null!==(n=Ds(e,t,n,r))){nc(n,e,r,ec()),Yo(n,t,r)}}function Qo(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($o(e))Jo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ps(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ds(e,t,i,r))&&(nc(n,e,r,i=ec()),Yo(n,t,r))}}function $o(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Jo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xo={readContext:Ns,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Ns,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:No,useDebugValue:zo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=Ho.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Cl)throw Error(s(349));0!==(30&so)||Eo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(xo.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Cl.identifierPrefix;if(is){var n=Yi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ns,useCallback:Bo,useContext:Ns,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:qo,useReducer:_o,useRef:Po,useState:function(){return _o(bo)},useDebugValue:zo,useDeferredValue:function(e){return Ko(wo(),ao.memoizedState,e)},useTransition:function(){return[_o(bo)[0],wo().memoizedState]},useMutableSource:So,useSyncExternalStore:ko,useId:Go,unstable_isNewReconciler:!1},ta={readContext:Ns,useCallback:Bo,useContext:Ns,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:qo,useReducer:Io,useRef:Po,useState:function(){return Io(bo)},useDebugValue:zo,useDeferredValue:function(e){var t=wo();return null===ao?t.memoizedState=e:Ko(t,ao.memoizedState,e)},useTransition:function(){return[Io(bo)[0],wo().memoizedState]},useMutableSource:So,useSyncExternalStore:ko,useId:Go,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=js(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=js(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=js(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(nc(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=xi,s=t.contextType;return"object"===typeof s&&null!==s?s=Ns(s):(i=Pi(t)?Ni:Ai.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):xi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ns(s):(s=Pi(t)?Ni:Ai.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=js(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Hl=r),ha(0,t)},n}function pa(e,t,n){(n=js(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=js(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=b.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?_s(t,null,n,r):bs(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var s=t.ref;return Cs(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||wa?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Ta(e,t,n,r,i)}function ka(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Dl,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Dl,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Dl,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Dl,Pl),Pl|=r;return ba(e,t,i,n),t.child}function Ea(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Pi(n)?Ni:Ai.current;return s=Ri(t,s),Cs(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||wa?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function xa(e,t,n,r,i){if(Pi(n)){var s=!0;Mi(t)}else s=!1;if(Cs(t,i),null===t.stateNode)qa(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ns(c):c=Ri(t,c=Pi(n)?Ni:Ai.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ls=!1;var d=t.memoizedState;o.state=d,Bs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ci.current||Ls?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ls||sa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ns(l):l=Ri(t,l=Pi(n)?Ni:Ai.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Ls=!1,d=t.memoizedState,o.state=d,Bs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ci.current||Ls?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ls||sa(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,s,i)}function Aa(e,t,n,r,i,s){Ea(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ka(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ca(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),$s(e,t.containerInfo)}function Na(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Ra,Pa,Da,Oa,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Cl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Os(e,i),nc(r,e,i,-1))}return mc(),Ua(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Qi++]=Ji,Wi[Qi++]=Yi,Wi[Qi++]=$i,Ji=e.id,Yi=e.overflow,$i=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Dc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),As(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Pi(t.type)&&Di(),Ga(t),null;case 3:return r=t.stateNode,Js(),Ei(Ci),Ei(Ai),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Pa(e,t),Ga(t),null;case 5:Xs(t);var i=Qs(Ws.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=Qs(Hs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ws.current),Qs(Hs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ei(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ol&&(Ol=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return Js(),Pa(e,t),null===e&&Br(t.stateNode.containerInfo),Ga(t),null;case 10:return xs(t.type._context),Ga(t),null;case 19:if(Ei(Zs),null===(o=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Bl&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ga(t),null}else 2*Ye()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=Zs.current,Ti(Zs,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),Ei(Ci),Ei(Ai),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(Ei(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(Zs),null;case 4:return Js(),null;case 10:return xs(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Hs.current);var s,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Ya="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||Za(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ja&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){kc(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,dl(e,t,n),Ja=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ya),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){kc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){kc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){kc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Ye())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,ml(t,e),Ja=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Xa=e,h=e.child;null!==h;){for(d=Xa=h;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,Xa=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){kc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){kc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xa=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=$a;var c=Ja;if($a=o,(Ja=l)&&!c)for(Xa=i;null!==Xa;)l=(o=Xa).child,22===o.tag&&null!==o.memoizedState?Il(i):null!==l?(l.return=o,Xa=l):Il(i);for(;null!==s;)Xa=s,wl(s,t,n),s=s.sibling;Xa=i,$a=a,Ja=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):bl(e)}}function bl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&il(t)}catch(f){kc(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function _l(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function Il(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){kc(t,i,l)}}var s=t.return;try{il(t)}catch(l){kc(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){kc(t,o,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Sl,kl=Math.ceil,El=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,xl=b.ReactCurrentBatchConfig,Al=0,Cl=null,Nl=null,Rl=0,Pl=0,Dl=ki(0),Ol=0,Ll=null,Ml=0,Fl=0,jl=0,Ul=null,Vl=null,zl=0,Bl=1/0,ql=null,Kl=!1,Hl=null,Gl=null,Wl=!1,Ql=null,$l=0,Jl=0,Yl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Al)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Rl?Rl&-Rl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,Yl=null,Error(s(185));yt(e,n,r),0!==(2&Al)&&e===Cl||(e===Cl&&(0===(2&Al)&&(Fl|=n),4===Ol&&ac(e,Rl)),rc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Bl=Ye()+500,Ui&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Cl?Rl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),oi((function(){0===(6&Al)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,Zl=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=dt(e,e===Cl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Al;Al|=2;var o=pc();for(Cl===e&&Rl===t||(ql=null,Bl=Ye()+500,dc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ts(),El.current=o,Al=i,null!==Nl?t=0:(Cl=null,Rl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,dc(e,0),ac(e,r),rc(e,Ye()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Ll,dc(e,0),ac(e,r),rc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,Vl,ql);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=zl+500-Ye())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Vl,ql),t);break}_c(e,Vl,ql);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Vl,ql),r);break}_c(e,Vl,ql);break;default:throw Error(s(329))}}}return rc(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function ac(e,t){for(t&=~jl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Al))throw Error(s(327));Ic();var t=dt(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,dc(e,0),ac(e,t),rc(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Vl,ql),rc(e,Ye()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Bl=Ye()+500,Ui&&Bi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&Al)&&Ic();var t=Al;Al|=1;var n=xl.transition,r=wt;try{if(xl.transition=null,wt=1,e)return e()}finally{wt=r,xl.transition=n,0===(6&(Al=t))&&Bi()}}function hc(){Pl=Dl.current,Ei(Dl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Js(),Ei(Ci),Ei(Ai),no();break;case 5:Xs(r);break;case 4:Js();break;case 13:case 19:Ei(Zs);break;case 10:xs(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Cl=e,Nl=e=Dc(e.current,null),Rl=Pl=t,Ol=0,Ll=null,jl=Fl=Ml=0,Vl=Ul=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(r=(n=Rs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Rs=null}return e}function fc(e,t){for(;;){var n=Nl;try{if(Ts(),ro.current=Xo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Tl.current=null,null===n||null===n.return){Ol=1,Ll=t,Nl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Ol&&(Ol=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Gl||!Gl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=Xo,null===e?Xo:e}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Cl||0===(268435455&Ml)&&0===(268435455&Fl)||ac(Cl,Rl)}function gc(e,t){var n=Al;Al|=2;var r=pc();for(Cl===e&&Rl===t||(ql=null,dc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Ts(),Al=n,El.current=r,null!==Nl)throw Error(s(261));return Cl=null,Rl=0,Ol}function yc(){for(;null!==Nl;)wc(Nl)}function vc(){for(;null!==Nl&&!$e();)wc(Nl)}function wc(e){var t=Sl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?bc(e):Nl=t,Tl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,Pl)))return void(Nl=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Ol=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Ol&&(Ol=5)}function _c(e,t,n){var r=wt,i=xl.transition;try{xl.transition=null,wt=1,function(e,t,n,r){do{Ic()}while(null!==Ql);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Cl&&(Nl=Cl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Cc(tt,(function(){return Ic(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xl.transition,xl.transition=null;var a=wt;wt=1;var l=Al;Al|=4,Tl.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){kc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Je(),Al=l,wt=a,xl.transition=o}else e.current=n;if(Wl&&(Wl=!1,Ql=e,$l=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Hl,Hl=null,e;0!==(1&$l)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===Yl?Jl++:(Jl=0,Yl=e):Jl=0,Bi()}(e,t,n,r)}finally{xl.transition=i,wt=r}return null}function Ic(){if(null!==Ql){var e=bt($l),t=xl.transition,n=wt;try{if(xl.transition=null,wt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,$l=0,0!==(6&Al))throw Error(s(331));var i=Al;for(Al|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var h=Xa;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Xa=d;else for(;null!==Xa;){var f=(h=Xa).sibling,p=h.return;if(sl(h),h===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Xa=v;break e}Xa=o.return}}var w=e.current;for(Xa=w;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=w;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(I){kc(l,l.return,I)}if(l===a){Xa=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Xa=_;break e}Xa=l.return}}if(Al=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(I){}r=!0}return r}finally{wt=n,xl.transition=t}}return!1}function Sc(e,t,n){e=Us(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Us(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Cl===e&&(Rl&n)===n&&(4===Ol||3===Ol&&(130023424&Rl)===Rl&&500>Ye()-zl?dc(e,0):jl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Os(e,t))&&(yt(e,t,n),rc(e,n))}function xc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tc(e,n)}function Cc(e,t){return We(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Nc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Pc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Lc(n.children,i,o,t);case k:a=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case C:return(e=Rc(13,n,t,i)).elementType=C,e.lanes=o,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=o,e;case D:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case x:a=9;break e;case A:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,o,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function zc(e){if(!e)return xi;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,s,o,a,l){return(e=Vc(n,r,!0,e,0,s,0,a,l)).context=zc(null),n=e.current,(s=js(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function qc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=js(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,o))&&(nc(e,i,o,s),Vs(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Ca(t),fs();break;case 5:Ys(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Is,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ti(Zs,1&Zs.current),null!==(e=Ka(e,t,n))?e.sibling:null);Ti(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,n)}return Ka(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Ri(t,Ai.current);Cs(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Aa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===R)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Ca(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Na(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Na(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ka(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Ys(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ea(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Fa(e,t,n);case 4:return $s(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(Is,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ci.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=js(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),As(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),As(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Cs(t,n),r=r(i=Ns(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ia(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Cs(t,n),oa(t,r,i),la(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return ka(e,t,n)}throw Error(s(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Kc(o);a.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Kc(o);s.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){qc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Ye()),0===(6&Al)&&(Bl=Ye()+500,Bi()))}break;case 13:uc((function(){var t=Os(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},It=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Os(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},kt=function(){return wt},Et=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ie=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));W(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Ce=uc;var eu={usingClientEntryPoint:!1,Events:[wi,bi,_i,Te,xe,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,I=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)I.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+A(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+A(a=e[c],c);l+=C(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=C(a=a.value,t,i,u=s+A(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)I.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,D(I);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function I(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!C());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,E=null,T=-1,x=5,A=-1;function C(){return!(t.unstable_now()-A<x)}function N(){if(null!==E){var e=t.unstable_now();A=e;var n=!0;try{n=E(!0,e)}finally{n?S():(k=!1,E=null)}}else k=!1}if("function"===typeof w)S=function(){w(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=N,S=function(){P.postMessage(null)}}else S=function(){y(N,0)};function D(e){E=e,k||(k=!0,S())}function O(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(I))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(I))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{A:()=>r})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{A:()=>r})},8387:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}n.d(t,{A:()=>i});const i=function(){for(var e,t,n=0,i="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".a48ad485.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="book-app:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/book-club/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkbook_app=self.webpackChunkbook_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>$e,SDK_VERSION:()=>On,_DEFAULT_ENTRY_NAME:()=>vn,_addComponent:()=>Sn,_addOrOverwriteComponent:()=>kn,_apps:()=>bn,_clearComponents:()=>Nn,_components:()=>In,_getProvider:()=>Tn,_isFirebaseApp:()=>An,_isFirebaseServerApp:()=>Cn,_registerComponent:()=>En,_removeServiceInstance:()=>xn,_serverApps:()=>_n,deleteApp:()=>Un,getApp:()=>Fn,getApps:()=>jn,initializeApp:()=>Ln,initializeServerApp:()=>Mn,onLog:()=>zn,registerVersion:()=>Vn,setLogLevel:()=>Bn});var t,r=n(5043),i=n.t(r,2),s=n(4391),o=n(7950),a=n.t(o,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,h=t.Pop,m=null,g=y();function y(){return(a.state||{idx:null}).idx}function v(){h=t.Pop;let e=y(),n=null==e?null:e-g;g=e,m&&m({action:h,location:b.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let b={get action(){return h},get location(){return e(s,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(c,v),m=e,()=>{s.removeEventListener(c,v),m=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(b.location,e,n);r&&r(i,e),g=y()+1;let l=d(i,g),c=b.createHref(i);try{a.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(c)}o&&m&&m({action:h,location:b.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(b.location,e,n);r&&r(i,e),g=y();let s=d(i,g),l=b.createHref(i);a.replaceState(s,"",l),o&&m&&m({action:h,location:b.location,delta:0})},go:e=>a.go(e)};return b}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){void 0===n&&(n="/");let r=P(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=R(r);s=C(i[o],e)}return s}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=F([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:A(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=b(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,I=3,S=2,k=1,E=10,T=-2,x=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(x)&&(r+=T),t&&(r+=S),n.filter((e=>!x(e))).reduce(((e,t)=>e+(_.test(t)?I:""===t?k:E)),r)}function C(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:F([i,c.pathname]),pathnameBase:j(F([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=F([i,c.pathnameBase]))}return s}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function R(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=O(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:U(r),hash:V(i)}}(i,s),h=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),j=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}const H=r.createContext(null);const G=r.createContext(null);const W=r.createContext(null);const Q=r.createContext(null);const $=r.createContext({outlet:null,matches:[],isDataRoute:!1});const J=r.createContext(null);function Y(){return null!=r.useContext(Q)}function X(){return Y()||u(!1),r.useContext(Q).location}function Z(e){r.useContext(W).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext($);return e?function(){let{router:e}=he(ce.UseNavigateStable),t=fe(ue.UseNavigateStable),n=r.useRef(!1);Z((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,K({fromRouteId:t},i)))}),[e,t]);return i}():function(){Y()||u(!1);let e=r.useContext(H),{basename:t,future:n,navigator:i}=r.useContext(W),{matches:s}=r.useContext($),{pathname:o}=X(),a=JSON.stringify(L(s,n.v7_relativeSplatPath)),l=r.useRef(!1);return Z((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=M(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}function te(){let{matches:e}=r.useContext($),t=e[e.length-1];return t?t.params:{}}function ne(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(W),{matches:s}=r.useContext($),{pathname:o}=X(),a=JSON.stringify(L(s,i.v7_relativeSplatPath));return r.useMemo((()=>M(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function re(e,n,i,s){Y()||u(!1);let{navigator:o}=r.useContext(W),{matches:a}=r.useContext($),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=X();if(n){var p;let e="string"===typeof n?m(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),d=e}else d=f;let g=d.pathname||"/",y=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=v(e,{pathname:y});let b=le(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return n&&b?r.createElement(Q.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},b):b}function ie(){let e=function(){var e;let t=r.useContext(J),n=de(ue.UseRouteError),i=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const se=r.createElement(ie,null);class oe extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement($.Provider,{value:this.props.routeContext},r.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(H);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement($.Provider,{value:t},i)}function le(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,u=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||se,c&&(h<0&&0===s?(p="route-fallback",!1||pe[p]||(pe[p]=!0),u=!0,f=null):h===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ae,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(oe,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function he(e){let t=r.useContext(H);return t||u(!1),t}function de(e){let t=r.useContext(G);return t||u(!1),t}function fe(e){let t=function(e){let t=r.useContext($);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const pe={};i.startTransition;function me(e){u(!1)}function ge(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1,future:c}=e;Y()&&u(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:a,static:l,future:K({v7_relativeSplatPath:!1},c)})),[h,c,a,l]);"string"===typeof s&&(s=m(s));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:v="default"}=s,w=r.useMemo((()=>{let e=P(f,h);return null==e?null:{location:{pathname:e,search:p,hash:g,state:y,key:v},navigationType:o}}),[h,f,p,g,y,v,o]);return null==w?null:r.createElement(W.Provider,{value:d},r.createElement(Q.Provider,{children:i,value:w}))}function ye(e){let{children:t,location:n}=e;return re(ve(t),n)}new Promise((()=>{}));r.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ve(e.props.children,s));e.type!==me&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ve(e.props.children,s)),n.push(o)})),n}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}function be(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(WA){}new Map;const Ie=i.startTransition;a.flushSync,i.useId;function Se(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let l=o.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},d=r.useCallback((e=>{h&&Ie?Ie((()=>u(e))):u(e)}),[u,h]);return r.useLayoutEffect((()=>l.listen(d)),[l,d]),r.createElement(ge,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const ke="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,m=be(e,_e),{basename:g}=r.useContext(W),y=!1;if("string"===typeof h&&Ee.test(h)&&(n=h,ke))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=P(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:y=!0}catch(WA){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;Y()||u(!1);let{basename:i,navigator:s}=r.useContext(W),{hash:o,pathname:a,search:l}=ne(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:F([i,a])),s.createHref({pathname:c,search:l,hash:o})}(h,{relative:s}),w=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=ee(),u=X(),h=ne(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:p(u)===p(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,h,i,s,n,e,o,a,l])}(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,unstable_viewTransition:f});return r.createElement("a",we({},m,{href:n||v,onClick:y||o?i:function(e){i&&i(e),e.defaultPrevented||w(e)},ref:t,target:c}))}));var xe,Ae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(xe||(xe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ae||(Ae={}));const Ce=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ce(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Re;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Re extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pe=function(e){return function(e){const t=Ce(e);return Ne.encodeByteArray(t,!0)}(e).replace(/\./g,"")},De=function(e){try{return Ne.decodeString(e,!0)}catch(WA){console.error("base64Decode failed: ",WA)}return null};function Oe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Oe(e[n],t[n]));return e}const Le=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Me=()=>{try{return Le()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/book-club",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(WA){return}const t=e&&De(e[1]);return t&&JSON.parse(t)})()}catch(WA){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(WA))}},Fe=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Me())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},je=()=>{var e;return null===(e=Me())||void 0===e?void 0:e.config};class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ve(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ze(){var e;const t=null===(e=Me())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(WA){return!1}}function Be(){return"object"===typeof self&&self.self===self}function qe(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ke(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function He(){const e=Ve();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ge(){return!ze()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function We(){try{return"object"===typeof indexedDB}catch(WA){return!1}}function Qe(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}class $e extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,$e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Je.prototype.create)}}class Je{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ye,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new $e(n,s,t)}}const Ye=/\{\$([^}]+)}/g;function Xe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ze(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(et(n)&&et(s)){if(!Ze(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function et(e){return null!==e&&"object"===typeof e}function tt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function nt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function rt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function it(e,t){const n=new st(e,t);return n.subscribe.bind(n)}class st{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ot),void 0===r.error&&(r.error=ot),void 0===r.complete&&(r.complete=ot);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(WA){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(WA){"undefined"!==typeof console&&console.error&&console.error(WA)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ot(){}const at=1e3,lt=2,ct=144e5,ut=.5;function ht(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lt;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:at)*Math.pow(t,e),r=Math.round(ut*n*(Math.random()-.5)*2);return Math.min(ct,n+r)}function dt(e){return e&&e._delegate?e._delegate:e}class ft{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const pt="[DEFAULT]";class mt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ue;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(WA){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(WA){if(r)return null;throw WA}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:pt})}catch(WA){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(WA){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;return this.component?this.component.multipleInstances?e:pt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function gt(e){return e===pt?void 0:e}class yt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const vt=[];var wt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(wt||(wt={}));const bt={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},_t=wt.INFO,It={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},St=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=It[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class kt{constructor(e){this.name=e,this._logLevel=_t,this._logHandler=St,this._userLogHandler=null,vt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?bt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...t),this._logHandler(this,wt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...t),this._logHandler(this,wt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.INFO,...t),this._logHandler(this,wt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.WARN,...t),this._logHandler(this,wt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...t),this._logHandler(this,wt.ERROR,...t)}}const Et=(e,t)=>t.some((t=>e instanceof t));let Tt,xt;const At=new WeakMap,Ct=new WeakMap,Nt=new WeakMap,Rt=new WeakMap,Pt=new WeakMap;let Dt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ct.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Nt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ot(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xt||(xt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ft(this),n),Mt(At.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mt(e.apply(Ft(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Ft(this),t,...r);return Nt.set(s,t.sort?t.sort():[t]),Mt(s)}}function Lt(e){return"function"===typeof e?Ot(e):(e instanceof IDBTransaction&&function(e){if(Ct.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Ct.set(e,t)}(e),Et(e,Tt||(Tt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Dt):e)}function Mt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Mt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&At.set(t,e)})).catch((()=>{})),Pt.set(t,e),t}(e);if(Rt.has(e))return Rt.get(e);const t=Lt(e);return t!==e&&(Rt.set(e,t),Pt.set(t,e)),t}const Ft=e=>Pt.get(e);function jt(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Mt(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Mt(o.result),e.oldVersion,e.newVersion,Mt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const Ut=["get","getKey","getAll","getAllKeys","count"],Vt=["put","add","delete","clear"],zt=new Map;function Bt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(zt.get(t))return zt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Vt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ut.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return zt.set(t,s),s}Dt=(e=>({...e,get:(t,n,r)=>Bt(t,n)||e.get(t,n,r),has:(t,n)=>!!Bt(t,n)||e.has(t,n)}))(Dt);class qt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Kt="@firebase/app",Ht="0.10.2",Gt=new kt("@firebase/app"),Wt="@firebase/app-compat",Qt="@firebase/analytics-compat",$t="@firebase/analytics",Jt="@firebase/app-check-compat",Yt="@firebase/app-check",Xt="@firebase/auth",Zt="@firebase/auth-compat",en="@firebase/database",tn="@firebase/database-compat",nn="@firebase/functions",rn="@firebase/functions-compat",sn="@firebase/installations",on="@firebase/installations-compat",an="@firebase/messaging",ln="@firebase/messaging-compat",cn="@firebase/performance",un="@firebase/performance-compat",hn="@firebase/remote-config",dn="@firebase/remote-config-compat",fn="@firebase/storage",pn="@firebase/storage-compat",mn="@firebase/firestore",gn="@firebase/firestore-compat",yn="firebase",vn="[DEFAULT]",wn={[Kt]:"fire-core",[Wt]:"fire-core-compat",[$t]:"fire-analytics",[Qt]:"fire-analytics-compat",[Yt]:"fire-app-check",[Jt]:"fire-app-check-compat",[Xt]:"fire-auth",[Zt]:"fire-auth-compat",[en]:"fire-rtdb",[tn]:"fire-rtdb-compat",[nn]:"fire-fn",[rn]:"fire-fn-compat",[sn]:"fire-iid",[on]:"fire-iid-compat",[an]:"fire-fcm",[ln]:"fire-fcm-compat",[cn]:"fire-perf",[un]:"fire-perf-compat",[hn]:"fire-rc",[dn]:"fire-rc-compat",[fn]:"fire-gcs",[pn]:"fire-gcs-compat",[mn]:"fire-fst",[gn]:"fire-fst-compat","fire-js":"fire-js",[yn]:"fire-js-all"},bn=new Map,_n=new Map,In=new Map;function Sn(e,t){try{e.container.addComponent(t)}catch(WA){Gt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),WA)}}function kn(e,t){e.container.addOrOverwriteComponent(t)}function En(e){const t=e.name;if(In.has(t))return Gt.debug("There were multiple attempts to register component ".concat(t,".")),!1;In.set(t,e);for(const n of bn.values())Sn(n,e);for(const n of _n.values())Sn(n,e);return!0}function Tn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function xn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vn;Tn(e,t).clearInstance(n)}function An(e){return void 0!==e.options}function Cn(e){return void 0!==e.settings}function Nn(){In.clear()}const Rn=new Je("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Pn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ft("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rn.create("app-deleted",{appName:this._name})}}class Dn extends Pn{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Vn(Kt,Ht,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Un(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Rn.create("server-app-deleted")}}const On="10.11.1";function Ln(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:vn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Rn.create("bad-app-name",{appName:String(i)});if(n||(n=je()),!n)throw Rn.create("no-options");const s=bn.get(i);if(s){if(Ze(n,s.options)&&Ze(r,s.config))return s;throw Rn.create("duplicate-app",{appName:i})}const o=new yt(i);for(const l of In.values())o.addComponent(l);const a=new Pn(n,r,o);return bn.set(i,a),a}function Mn(e,t){if(Be())throw Rn.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=An(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Rn.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=_n.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new yt(i);for(const c of In.values())a.addComponent(c);const l=new Dn(n,t,i,a);return _n.set(i,l),l}function Fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn;const t=bn.get(e);if(!t&&e===vn&&je())return Ln();if(!t)throw Rn.create("no-app",{appName:e});return t}function jn(){return Array.from(bn.values())}async function Un(e){let t=!1;const n=e.name;if(bn.has(n))t=!0,bn.delete(n);else if(_n.has(n)){e.decRefCount()<=0&&(_n.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Vn(e,t,n){var r;let i=null!==(r=wn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Gt.warn(e.join(" "))}En(new ft("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function zn(e,t){if(null!==e&&"function"!==typeof e)throw Rn.create("invalid-log-argument");!function(e,t){for(const n of vt){let r=null;t&&t.level&&(r=bt[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:wt[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Bn(e){var t;t=e,vt.forEach((e=>{e.setLogLevel(t)}))}const qn="firebase-heartbeat-database",Kn=1,Hn="firebase-heartbeat-store";let Gn=null;function Wn(){return Gn||(Gn=jt(qn,Kn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Hn)}catch(WA){console.warn(WA)}}}).catch((e=>{throw Rn.create("idb-open",{originalErrorMessage:e.message})}))),Gn}async function Qn(e,t){try{const n=(await Wn()).transaction(Hn,"readwrite"),r=n.objectStore(Hn);await r.put(t,$n(e)),await n.done}catch(WA){if(WA instanceof $e)Gt.warn(WA.message);else{const t=Rn.create("idb-set",{originalErrorMessage:null===WA||void 0===WA?void 0:WA.message});Gt.warn(t.message)}}}function $n(e){return"".concat(e.name,"!").concat(e.options.appId)}class Jn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Xn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Yn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Yn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Zn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Zn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Pe(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Yn(){return(new Date).toISOString().substring(0,10)}class Xn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!We()&&Qe().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Wn()).transaction(Hn),n=await t.objectStore(Hn).get($n(e));return await t.done,n}catch(WA){if(WA instanceof $e)Gt.warn(WA.message);else{const t=Rn.create("idb-get",{originalErrorMessage:null===WA||void 0===WA?void 0:WA.message});Gt.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Zn(e){return Pe(JSON.stringify({version:2,heartbeats:e})).length}var er;er="",En(new ft("platform-logger",(e=>new qt(e)),"PRIVATE")),En(new ft("heartbeat",(e=>new Jn(e)),"PRIVATE")),Vn(Kt,Ht,er),Vn(Kt,Ht,"esm2017"),Vn("fire-js","");class tr{constructor(e,t){this._delegate=e,this.firebase=t,Sn(e,new ft("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Un(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vn;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vn;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Sn(this._delegate,e)}_addOrOverwriteComponent(e){kn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const nr=new Je("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const rr=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Ln(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Xe(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Vn,setLogLevel:Bn,onLog:zn,apps:null,SDK_VERSION:On,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(En(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw nr.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Oe(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Xe(n,e=e||vn))throw nr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(tr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Oe(n,e)},createSubscribe:it,ErrorFactory:Je,deepExtend:Oe}),n}(),ir=new kt("@firebase/app-compat");if(Be()&&void 0!==self.firebase){ir.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ir.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const sr=rr;!function(e){Vn("@firebase/app-compat","0.2.32",e)}();sr.registerVersion("firebase","10.11.1","app-compat");function or(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const ar={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},lr="EMAIL_SIGNIN",cr="PASSWORD_RESET",ur="RECOVER_EMAIL",hr="REVERT_SECOND_FACTOR_ADDITION",dr="VERIFY_AND_CHANGE_EMAIL",fr="VERIFY_EMAIL";function pr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mr=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},gr=pr,yr=new Je("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),vr=new kt("@firebase/auth");function wr(e){if(vr.logLevel<=wt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];vr.error("Auth (".concat(On,"): ").concat(e),...n)}}function br(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Er(e,...n)}function _r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Er(e,...n)}function Ir(e,t,n){const r=Object.assign(Object.assign({},gr()),{[t]:n});return new Je("auth","Firebase",r).create(t,{appName:e.name})}function Sr(e){return Ir(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&br(e,"argument-error"),Ir(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Er(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return yr.create(e,...n)}function Tr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Er(t,...r)}}function xr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw wr(t),new Error(t)}function Ar(e,t){e||xr(t)}function Cr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Nr(){return"http:"===Rr()||"https:"===Rr()}function Rr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Pr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ar(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())||Ke()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Nr()||qe()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Dr(e,t){Ar(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Or{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Lr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Mr=new Pr(3e4,6e4);function Fr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function jr(e,t,n,r){return Ur(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=tt(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Or.fetch()(zr(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Ur(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Lr),t);try{const t=new qr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Kr(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Kr(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Kr(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Kr(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Ir(e,a,o);br(e,a)}}catch(WA){if(WA instanceof $e)throw WA;br(e,"network-request-failed",{message:String(WA)})}}async function Vr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await jr(e,t,n,r,i);return"mfaPendingCredential"in s&&br(e,"multi-factor-auth-required",{_serverResponse:s}),s}function zr(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Dr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Br(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(_r(this.auth,"network-request-failed"))),Mr.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=_r(e,t,r);return i.customData._tokenResponse=n,i}function Hr(e){return void 0!==e&&void 0!==e.getResponse}function Gr(e){return void 0!==e&&void 0!==e.enterprise}class Wr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Br(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Qr(e,t){return jr(e,"GET","/v2/recaptchaConfig",Fr(e,t))}async function $r(e,t){return jr(e,"POST","/v1/accounts:lookup",t)}function Jr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(WA){}}function Yr(e){return 1e3*Number(e)}function Xr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return wr("JWT malformed, contained fewer than 3 sections"),null;try{const e=De(n);return e?JSON.parse(e):(wr("Failed to decode base64 JWT payload"),null)}catch(WA){return wr("Caught error parsing JWT payload as JSON",null===WA||void 0===WA?void 0:WA.toString()),null}}function Zr(e){const t=Xr(e);return Tr(t,"internal-error"),Tr("undefined"!==typeof t.exp,"internal-error"),Tr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ei(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(WA){throw WA instanceof $e&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(WA)&&e.auth.currentUser===e&&await e.auth.signOut(),WA}}class ti{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(WA){return void((null===WA||void 0===WA?void 0:WA.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ni{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jr(this.lastLoginAt),this.creationTime=Jr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ri(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ei(e,$r(n,{idToken:r}));Tr(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ii(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ni(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function ii(e){return e.map((e=>{var{providerId:t}=e,n=or(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class si{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tr(e.idToken,"internal-error"),Tr("undefined"!==typeof e.idToken,"internal-error"),Tr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Zr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Tr(0!==e.length,"internal-error");const t=Zr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Tr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Ur(e,{},(async()=>{const n=tt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=zr(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Or.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new si;return n&&(Tr("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Tr("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Tr("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new si,this.toJSON())}_performRefresh(){return xr("not implemented")}}function oi(e,t){Tr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ai{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=or(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ti(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ni(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ei(this,this.stsTokenManager.getToken(this.auth,e));return Tr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=dt(e),r=await n.getIdToken(t),i=Xr(r);Tr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Jr(Yr(i.auth_time)),issuedAtTime:Jr(Yr(i.iat)),expirationTime:Jr(Yr(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=dt(e);await ri(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Tr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Tr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ri(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(Sr(this.auth));const e=await this.getIdToken();return await ei(this,async function(e,t){return jr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=t;Tr(v&&I,e,"internal-error");const S=si.fromJSON(this.name,I);Tr("string"===typeof v,e,"internal-error"),oi(u,e.name),oi(h,e.name),Tr("boolean"===typeof w,e,"internal-error"),Tr("boolean"===typeof b,e,"internal-error"),oi(d,e.name),oi(f,e.name),oi(p,e.name),oi(m,e.name),oi(g,e.name),oi(y,e.name);const k=new ai({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(k.providerData=_.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new si;r.updateFromServerResponse(t);const i=new ai({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ri(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Tr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ii(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new si;o.updateFromIdToken(n);const a=new ai({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ni(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const li=new Map;function ci(e){Ar(e instanceof Function,"Expected a class definition");let t=li.get(e);return t?(Ar(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,li.set(e,t),t)}class ui{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ui.type="NONE";const hi=ui;function di(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class fi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=di(this.userKey,r.apiKey,i),this.fullPersistenceKey=di("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ai._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new fi(ci(hi),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ci(hi);const s=di(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=ai._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new fi(i,e,n)):new fi(i,e,n)}}function pi(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(vi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(mi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(bi(t))return"Blackberry";if(_i(t))return"Webos";if(gi(t))return"Safari";if((t.includes("chrome/")||yi(t))&&!t.includes("edge/"))return"Chrome";if(wi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/firefox\//i.test(e)}function gi(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/crios\//i.test(e)}function vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/iemobile/i.test(e)}function wi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/android/i.test(e)}function bi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/blackberry/i.test(e)}function _i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/webos/i.test(e)}function Ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Si(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return Ii(e)||wi(e)||_i(e)||bi(e)||/windows phone/i.test(e)||vi(e)}function ki(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=pi(Ve());break;case"Worker":t="".concat(pi(Ve()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(On,"/").concat(r)}class Ei{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(WA){r(WA)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(WA){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===WA||void 0===WA?void 0:WA.message})}}}class Ti{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class xi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ci(this),this.idTokenSubscription=new Ci(this),this.beforeStateQueue=new Ei(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ci(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await fi.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(WA){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await $r(this,{idToken:e}),n=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Cn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(WA){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(WA)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Tr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(WA){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ri(e)}catch(WA){if((null===WA||void 0===WA?void 0:WA.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cn(this.app))return Promise.reject(Sr(this));const t=e?dt(e):null;return t&&Tr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Tr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Cn(this.app)?Promise.reject(Sr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cn(this.app)?Promise.reject(Sr(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(ci(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return jr(e,"GET","/v2/passwordPolicy",Fr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ti(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Je("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return jr(e,"POST","/v2/accounts:revokeToken",Fr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ci(e)||this._popupRedirectResolver;Tr(t,this,"argument-error"),this.redirectPersistenceManager=await fi.create(this,[ci(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tr(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ki(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(vr.logLevel<=wt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];vr.warn("Auth (".concat(On,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ai(e){return dt(e)}class Ci{constructor(e){this.auth=e,this.observer=null,this.addObserver=it((e=>this.observer=e))}get next(){return Tr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ni={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ri(e){return Ni.loadJS(e)}function Pi(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Di{constructor(e){this.type="recaptcha-enterprise",this.auth=Ai(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Gr(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Qr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Wr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Gr(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ni.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ri(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Oi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Di(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Li(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Oi(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Oi(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Mi(e,t,n){const r=Ai(e);Tr(r._canInitEmulator,r,"emulator-config-failed"),Tr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Fi(t),{host:o,port:a}=function(e){const t=Fi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ji(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ji(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Fi(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ji(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ui{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xr("not implemented")}_getIdTokenResponse(e){return xr("not implemented")}_linkToIdToken(e,t){return xr("not implemented")}_getReauthenticationResolver(e){return xr("not implemented")}}async function Vi(e,t){return jr(e,"POST","/v1/accounts:resetPassword",Fr(e,t))}async function zi(e,t){return jr(e,"POST","/v1/accounts:signUp",t)}async function Bi(e,t){return Vr(e,"POST","/v1/accounts:signInWithPassword",Fr(e,t))}async function qi(e,t){return jr(e,"POST","/v1/accounts:sendOobCode",Fr(e,t))}async function Ki(e,t){return qi(e,t)}async function Hi(e,t){return qi(e,t)}class Gi extends Ui{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Gi(e,t,"password")}static _fromEmailAndCode(e,t){return new Gi(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Li(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Bi);case"emailLink":return async function(e,t){return Vr(e,"POST","/v1/accounts:signInWithEmailLink",Fr(e,t))}(e,{email:this._email,oobCode:this._password});default:br(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Li(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zi);case"emailLink":return async function(e,t){return Vr(e,"POST","/v1/accounts:signInWithEmailLink",Fr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Wi(e,t){return Vr(e,"POST","/v1/accounts:signInWithIdp",Fr(e,t))}class Qi extends Ui{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=or(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Qi(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Wi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Wi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tt(t)}return e}}const $i={USER_NOT_FOUND:"user-not-found"};class Ji extends Ui{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ji({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ji({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Vr(e,"POST","/v1/accounts:signInWithPhoneNumber",Fr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Vr(e,"POST","/v1/accounts:signInWithPhoneNumber",Fr(e,t));if(n.temporaryProof)throw Kr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Vr(e,"POST","/v1/accounts:signInWithPhoneNumber",Fr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),$i)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ji({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Yi{constructor(e){var t,n,r,i,s,o;const a=nt(rt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Tr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=nt(rt(e)).link,n=t?nt(rt(t)).deep_link_id:null,r=nt(rt(e)).deep_link_id;return(r?nt(rt(r)).link:null)||r||n||t||e}(e);try{return new Yi(t)}catch(n){return null}}}class Xi{constructor(){this.providerId=Xi.PROVIDER_ID}static credential(e,t){return Gi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Yi.parseLink(t);return Tr(n,"argument-error"),Gi._fromEmailAndCode(e,n.code,n.tenantId)}}Xi.PROVIDER_ID="password",Xi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Xi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Zi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class es extends Zi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ts extends es{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Tr("providerId"in t&&"signInMethod"in t,"argument-error"),Qi._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Tr(e.idToken||e.accessToken,"argument-error"),Qi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ts.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ts.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new ts(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(WA){return null}}}class ns extends es{constructor(){super("facebook.com")}static credential(e){return Qi._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ns.credential(t.oauthAccessToken)}catch(n){return null}}}ns.FACEBOOK_SIGN_IN_METHOD="facebook.com",ns.PROVIDER_ID="facebook.com";class rs extends es{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qi._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return rs.credential(n,r)}catch(i){return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com",rs.PROVIDER_ID="google.com";class is extends es{constructor(){super("github.com")}static credential(e){return Qi._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return is.credential(t.oauthAccessToken)}catch(n){return null}}}is.GITHUB_SIGN_IN_METHOD="github.com",is.PROVIDER_ID="github.com";class ss extends Ui{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Wi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Wi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wi(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new ss(n,i):null}static _create(e,t){return new ss(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class os extends Zi{constructor(e){Tr(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return os.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return os.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=ss.fromJSON(e);return Tr(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return ss._create(r,n)}catch(WA){return null}}}class as extends es{constructor(){super("twitter.com")}static credential(e,t){return Qi._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return as.credential(n,r)}catch(i){return null}}}async function ls(e,t){return Vr(e,"POST","/v1/accounts:signUp",Fr(e,t))}as.TWITTER_SIGN_IN_METHOD="twitter.com",as.PROVIDER_ID="twitter.com";class cs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ai._fromIdTokenResponse(e,n,r),s=us(n);return new cs({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=us(n);return new cs({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function us(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class hs extends $e{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,hs.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new hs(e,t,n,r)}}function ds(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw hs._fromErrorAndOperation(e,n,t,r);throw n}))}function fs(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function ps(e,t){const n=dt(e);await gs(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return jr(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=fs(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ms(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ei(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return cs._forOperation(e,"link",r)}async function gs(e,t,n){await ri(t);const r=!1===e?"provider-already-linked":"no-such-provider";Tr(fs(t.providerData).has(n)===e,t.auth,r)}async function ys(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Cn(r.app))return Promise.reject(Sr(r));const i="reauthenticate";try{const s=await ei(e,ds(r,i,t,e),n);Tr(s.idToken,r,"internal-error");const o=Xr(s.idToken);Tr(o,r,"internal-error");const{sub:a}=o;return Tr(e.uid===a,r,"user-mismatch"),cs._forOperation(e,i,s)}catch(WA){throw(null===WA||void 0===WA?void 0:WA.code)==="auth/".concat("user-not-found")&&br(r,"user-mismatch"),WA}}async function vs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Cn(e.app))return Promise.reject(Sr(e));const r="signIn",i=await ds(e,r,t),s=await cs._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function ws(e,t){return vs(Ai(e),t)}async function bs(e,t){const n=dt(e);return await gs(!1,n,t.providerId),ms(n,t)}async function _s(e,t){return ys(dt(e),t)}async function Is(e,t){if(Cn(e.app))return Promise.reject(Sr(e));const n=Ai(e),r=await async function(e,t){return Vr(e,"POST","/v1/accounts:signInWithCustomToken",Fr(e,t))}(n,{token:t,returnSecureToken:!0}),i=await cs._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Ss{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ks._fromServerResponse(e,t):"totpInfo"in t?Es._fromServerResponse(e,t):br(e,"internal-error")}}class ks extends Ss{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ks(t)}}class Es extends Ss{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Es(t)}}function Ts(e,t,n){var r;Tr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Tr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Tr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Tr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function xs(e){const t=Ai(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function As(e,t){await async function(e,t){return jr(e,"POST","/v1/accounts:update",Fr(e,t))}(dt(e),{oobCode:t})}async function Cs(e,t){const n=dt(e),r=await Vi(n,{oobCode:t}),i=r.requestType;switch(Tr(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Tr(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Tr(r.mfaInfo,n,"internal-error");default:Tr(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Ss._fromServerResponse(Ai(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Ns(e,t){const n={identifier:t,continueUri:Nr()?Cr():"http://localhost"},{signinMethods:r}=await async function(e,t){return jr(e,"POST","/v1/accounts:createAuthUri",Fr(e,t))}(dt(e),n);return r||[]}async function Rs(e,t){const n=dt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Ts(n.auth,r,t);const{email:i}=await async function(e,t){return qi(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Ps(e,t,n){const r=dt(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Ts(r.auth,i,n);const{email:s}=await async function(e,t){return qi(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function Ds(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=dt(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await ei(i,async function(e,t){return jr(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function Os(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await ei(e,async function(e,t){return jr(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class Ls{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Ms extends Ls{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Fs extends Ls{constructor(e,t){super(e,"facebook.com",t)}}class js extends Ms{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Us extends Ls{constructor(e,t){super(e,"google.com",t)}}class Vs extends Ms{constructor(e,t,n){super(e,"twitter.com",t,n)}}function zs(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Xr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Ls(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Fs(s,i);case"github.com":return new js(s,i);case"google.com":return new Us(s,i);case"twitter.com":return new Vs(s,i,e.screenName||null);case"custom":case"anonymous":return new Ls(s,null);default:return new Ls(s,r,i)}}(n)}class Bs{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Bs("enroll",e,t)}static _fromMfaPendingCredential(e){return new Bs("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Bs._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Bs._fromIdtoken(e.multiFactorSession.idToken)}return null}}class qs{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ai(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Ss._fromServerResponse(n,e)));Tr(r.mfaPendingCredential,n,"internal-error");const s=Bs._fromMfaPendingCredential(r.mfaPendingCredential);return new qs(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await cs._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Tr(t.user,n,"internal-error"),cs._forOperation(t.user,t.operationType,o);default:br(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Ks{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Ss._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Ks(e)}async getSession(){return Bs._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await ei(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await ei(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},jr(r,"POST","/v2/accounts/mfaEnrollment:withdraw",Fr(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(WA){throw WA}var r,i}}const Hs=new WeakMap;const Gs="__sak";class Ws{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gs,"1"),this.storage.removeItem(Gs),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Qs extends Ws{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ve();return gi(e)||Ii(e)}()&&function(){try{return!(!window||window===window.top)}catch(WA){return!1}}(),this.fallbackToPolling=Si(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);He()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qs.type="LOCAL";const $s=Qs;class Js extends Ws{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Js.type="SESSION";const Ys=Js;class Xs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Xs(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Zs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Xs.receivers=[];class eo{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Zs("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function to(){return window}function no(){return"undefined"!==typeof to().WorkerGlobalScope&&"function"===typeof to().importScripts}const ro="firebaseLocalStorageDb",io="firebaseLocalStorage",so="fbase_key";class oo{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ao(e,t){return e.transaction([io],t?"readwrite":"readonly").objectStore(io)}function lo(){const e=indexedDB.open(ro,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(io,{keyPath:so})}catch(WA){n(WA)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(io)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ro);return new oo(e).toPromise()}(),t(await lo()))}))}))}async function co(e,t,n){const r=ao(e,!0).put({[so]:t,value:n});return new oo(r).toPromise()}function uo(e,t){const n=ao(e,!0).delete(t);return new oo(n).toPromise()}class ho{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await lo()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(WA){if(t++>3)throw WA;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return no()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xs._getInstance(no()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new eo(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lo();return await co(e,Gs,"1"),await uo(e,Gs),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>co(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ao(e,!1).get(t),r=await new oo(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>uo(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ao(e,!1).getAll();return new oo(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ho.type="LOCAL";const fo=ho;const po=1e12;class mo{constructor(e){this.auth=e,this.counter=po,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new go(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||po;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||po;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||po;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class go{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Tr(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(WA){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(WA){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yo=Pi("rcb"),vo=new Pr(3e4,6e4);class wo{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=to().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Tr(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Hr(to().grecaptcha)?Promise.resolve(to().grecaptcha):new Promise(((n,r)=>{const i=to().setTimeout((()=>{r(_r(e,"network-request-failed"))}),vo.get());to()[yo]=()=>{to().clearTimeout(i),delete to()[yo];const s=to().grecaptcha;if(!s||!Hr(s))return void r(_r(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Ri("".concat(Ni.recaptchaV2Script,"?").concat(tt({onload:yo,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(_r(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=to().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bo{async load(e){return new mo(e)}clearedOneInstance(){}}const _o="recaptcha",Io={theme:"light",type:"image"};class So{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Io);this.parameters=n,this.type=_o,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ai(e),this.isInvisible="invisible"===this.parameters.size,Tr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Tr(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bo:new wo,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(WA){return Promise.reject(WA)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Tr(!this.parameters.sitekey,this.auth,"argument-error"),Tr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Tr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=to()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Tr(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Tr(Nr()&&!no(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await jr(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Tr(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Tr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ko{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ji._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Eo(e,t,n){var r;const i=await n.verify();try{let s;if(Tr("string"===typeof i,e,"argument-error"),Tr(n.type===_o,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Tr("enroll"===t.type,e,"internal-error");const n=await function(e,t){return jr(e,"POST","/v2/accounts/mfaEnrollment:start",Fr(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Tr("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Tr(n,e,"missing-multi-factor-info");const o=await function(e,t){return jr(e,"POST","/v2/accounts/mfaSignIn:start",Fr(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return jr(e,"POST","/v1/accounts:sendVerificationCode",Fr(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class To{constructor(e){this.providerId=To.PROVIDER_ID,this.auth=Ai(e)}verifyPhoneNumber(e,t){return Eo(this.auth,e,dt(t))}static credential(e,t){return Ji._fromVerification(e,t)}static credentialFromResult(e){const t=e;return To.credentialFromTaggedObject(t)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ji._fromTokenResponse(n,r):null}}function xo(e,t){return t?ci(t):(Tr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}To.PROVIDER_ID="phone",To.PHONE_SIGN_IN_METHOD="phone";class Ao extends Ui{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Co(e){return vs(e.auth,new Ao(e),e.bypassAuthState)}function No(e){const{auth:t,user:n}=e;return Tr(n,t,"internal-error"),ys(n,new Ao(e),e.bypassAuthState)}async function Ro(e){const{auth:t,user:n}=e;return Tr(n,t,"internal-error"),ms(n,new Ao(e),e.bypassAuthState)}class Po{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(WA){this.reject(WA)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(WA){this.reject(WA)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Co;case"linkViaPopup":case"linkViaRedirect":return Ro;case"reauthViaPopup":case"reauthViaRedirect":return No;default:br(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Do=new Pr(2e3,1e4);class Oo extends Po{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Tr(e,this.auth,"internal-error"),e}async onExecution(){Ar(1===this.filter.length,"Popup operations only handle one event");const e=Zs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(_r(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Do.get())};e()}}Oo.currentPopupAction=null;const Lo="pendingRedirect",Mo=new Map;class Fo extends Po{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Mo.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=zo(t),r=Vo(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(WA){e=()=>Promise.reject(WA)}Mo.set(this.auth._key(),e)}return this.bypassAuthState||Mo.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function jo(e,t){return Vo(e)._set(zo(t),"true")}function Uo(e,t){Mo.set(e._key(),t)}function Vo(e){return ci(e._redirectPersistence)}function zo(e){return di(Lo,e.config.apiKey,e.name)}function Bo(e,t,n){return async function(e,t,n){if(Cn(e.app))return Promise.reject(Sr(e));const r=Ai(e);kr(e,t,Zi),await r._initializationPromise;const i=xo(r,n);return await jo(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function qo(e,t,n){return async function(e,t,n){const r=dt(e);if(kr(r.auth,t,Zi),Cn(r.auth.app))return Promise.reject(Sr(r.auth));await r.auth._initializationPromise;const i=xo(r.auth,n);await jo(i,r.auth);const s=await Go(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function Ko(e,t,n){return async function(e,t,n){const r=dt(e);kr(r.auth,t,Zi),await r.auth._initializationPromise;const i=xo(r.auth,n);await gs(!1,r,t.providerId),await jo(i,r.auth);const s=await Go(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function Ho(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Cn(e.app))return Promise.reject(Sr(e));const r=Ai(e),i=xo(r,t),s=new Fo(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Go(e){const t=Zs("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Wo{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $o(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!$o(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(_r(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qo(e))}saveEventToCache(e){this.cachedEventUids.add(Qo(e)),this.lastProcessedEventTime=Date.now()}}function Qo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function $o(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function Jo(e){return jr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Yo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xo=/^https?/;function Zo(e){const t=Cr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Xo.test(n))return!1;if(Yo.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ea=new Pr(3e4,6e4);function ta(){const e=to().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function na(e){return new Promise(((t,n)=>{var r,i,s;function o(){ta(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ta(),n(_r(e,"network-request-failed"))},timeout:ea.get()})}if(null===(i=null===(r=to().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=to().gapi)||void 0===s?void 0:s.load)){const t=Pi("iframefcb");return to()[t]=()=>{gapi.load?o():n(_r(e,"network-request-failed"))},Ri("".concat(Ni.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw ra=null,e}))}let ra=null;const ia=new Pr(5e3,15e3),sa="__/auth/iframe",oa="emulator/auth/iframe",aa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},la=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ca(e){const t=e.config;Tr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Dr(t,oa):"https://".concat(e.config.authDomain,"/").concat(sa),r={apiKey:t.apiKey,appName:e.name,v:On},i=la.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(tt(r).slice(1))}async function ua(e){const t=await function(e){return ra=ra||na(e),ra}(e),n=to().gapi;return Tr(n,e,"internal-error"),t.open({where:document.body,url:ca(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aa,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=_r(e,"network-request-failed"),s=to().setTimeout((()=>{r(i)}),ia.get());function o(){to().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const ha={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class da{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(WA){}}}function fa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ha),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ve().toLowerCase();n&&(a=yi(c)?"_blank":n),mi(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Ii(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new da(null);const h=window.open(t||"",a,u);Tr(h,e,"popup-blocked");try{h.focus()}catch(WA){}return new da(h)}const pa="__/auth/handler",ma="emulator/auth/handler",ga=encodeURIComponent("fac");async function ya(e,t,n,r,i,s){Tr(e.config.authDomain,e,"auth-domain-config-required"),Tr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:On,eventId:i};if(t instanceof Zi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof es){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(ga,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(pa);return Dr(t,ma)}(e),"?").concat(tt(a).slice(1)).concat(c)}const va="webStorageSupport";const wa=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ys,this._completeRedirectFn=Ho,this._overrideRedirectResult=Uo}async _openPopup(e,t,n,r){var i;Ar(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return fa(e,await ya(e,t,n,Cr(),r),Zs())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){to().location.href=e}(await ya(e,t,n,Cr(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ar(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await ua(e),n=new Wo(e);return t.register("authEvent",(t=>{Tr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(va,{type:va},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[va];void 0!==i&&t(!!i),br(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Jo(e);for(const r of t)try{if(Zo(r))return}catch(n){}br(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Si()||gi()||Ii()}};class ba{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return xr("unexpected MultiFactorSessionType")}}}class _a extends ba{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new _a(e)}_finalizeEnroll(e,t,n){return function(e,t){return jr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Fr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return jr(e,"POST","/v2/accounts/mfaSignIn:finalize",Fr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ia{constructor(){}static assertion(e){return _a._fromCredential(e)}}Ia.FACTOR_ID="phone";var Sa="@firebase/auth",ka="1.7.2";class Ea{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Tr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Me())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Ta;function xa(){return window}!function(e){Ni=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=_r("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Ta="Browser",En(new ft("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Tr(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Ta,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ki(Ta)},c=new xi(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ci);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),En(new ft("auth-internal",(e=>(e=>new Ea(e))(Ai(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Vn(Sa,ka,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ta)),Vn(Sa,ka,"esm2017");async function Aa(e,t,n){var r;const{BuildInfo:i}=xa();Ar(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Ar(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Ii()?o.ibi=i.packageName:wi()?o.apn=i.packageName:br(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,ya(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Ca(e){const{cordova:t}=xa();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Na=20;class Ra extends Wo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Pa(e){const t=await La()._get(Ma(e));return t&&await La()._remove(Ma(e)),t}function Da(e,t){var n,r;const i=function(e){const t=Fa(e),n=t.link?decodeURIComponent(t.link):void 0,r=Fa(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Fa(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Fa(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(WA){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?_r(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Oa(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Na;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function La(){return ci($s)}function Ma(e){return di("authEvent",e.config.apiKey,e.name)}function Fa(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return nt(n.join("?"))}const ja=class{constructor(){this._redirectPersistence=Ys,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ho,this._overrideRedirectResult=Uo}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Ra(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){br(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=xa();Tr("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Tr("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Tr("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Tr("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Tr("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Mo.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Oa(),postBody:null,tenantId:e.tenantId,error:_r(e,"no-auth-event")}}(e,n,r);await function(e,t){return La()._set(Ma(e),t)}(e,s);const o=await Aa(e,s,t);return async function(e,t,n){const{cordova:r}=xa();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(_r(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),wi()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Ca(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=xa(),n={};Ii()?n.iosBundleId=t.packageName:wi()?n.androidPackageName=t.packageName:br(e,"operation-not-supported-in-this-environment"),await Jo(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=xa(),s=setTimeout((async()=>{await Pa(e),t.onEvent(Ua())}),500),o=async n=>{clearTimeout(s);const r=await Pa(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Da(r,n.url)),t.onEvent(i||Ua())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");xa().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(WA){console.error(WA)}}}};function Ua(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_r("no-auth-event")}}function Va(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function za(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return!("file:"!==Va()&&"ionic:"!==Va()&&"capacitor:"!==Va()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ba(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return He()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/Edge\/\d+/.test(e)}(e)}function qa(){try{const e=self.localStorage,t=Zs();if(e)return e.setItem(t,"1"),e.removeItem(t),!Ba()||We()}catch(WA){return Ka()&&We()}return!1}function Ka(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Ha(){return("http:"===Va()||"https:"===Va()||qe()||za())&&!(Ke()||ze())&&qa()&&!Ka()}function Ga(){return za()&&"undefined"!==typeof document}const Wa={LOCAL:"local",NONE:"none",SESSION:"session"},Qa=Tr,$a="persistence";async function Ja(e){await e._initializationPromise;const t=Ya(),n=di($a,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Ya(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(WA){return null}}const Xa=Tr;class Za{constructor(){this.browserResolver=ci(wa),this.cordovaResolver=ci(ja),this.underlyingResolver=null,this._redirectPersistence=Ys,this._completeRedirectFn=Ho,this._overrideRedirectResult=Uo}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Ga()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xa(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Ga()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function el(e){return e.unwrap()}function tl(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new sl(e,function(e,t){var n;const r=dt(e),i=t;return Tr(t.customData.operationType,r,"argument-error"),Tr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),qs._fromError(r,i)}(e,t))}else if(r){const e=nl(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function nl(e){const{_tokenResponse:t}=e instanceof $e?e.customData:e;if(!t)return null;if(!(e instanceof $e)&&"temporaryProof"in t&&"phoneNumber"in t)return To.credentialFromResult(e);const n=t.providerId;if(!n||n===ar.PASSWORD)return null;let r;switch(n){case ar.GOOGLE:r=rs;break;case ar.FACEBOOK:r=ns;break;case ar.GITHUB:r=is;break;case ar.TWITTER:r=as;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?ss._create(n,o):Qi._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new ts(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof $e?r.credentialFromError(e):r.credentialFromResult(e)}function rl(e,t){return t.catch((t=>{throw t instanceof $e&&tl(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,nl(r)),additionalUserInfo:zs(e),user:ol.getOrCreate(n)};var r}))}async function il(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>rl(e,n.confirm(t))}}class sl{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return rl(el(this.auth),this.resolver.resolveSignIn(e))}}class ol{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=dt(e);return Hs.has(t)||Hs.set(t,Ks._fromUser(t)),Hs.get(t)}(e)}static getOrCreate(e){return ol.USER_MAP.has(e)||ol.USER_MAP.set(e,new ol(e)),ol.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return rl(this.auth,bs(this._delegate,e))}async linkWithPhoneNumber(e,t){return il(this.auth,async function(e,t,n){const r=dt(e);await gs(!1,r,"phone");const i=await Eo(r.auth,t,dt(n));return new ko(i,(e=>bs(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return rl(this.auth,async function(e,t,n){const r=dt(e);kr(r.auth,t,Zi);const i=xo(r.auth,n);return new Oo(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Za))}async linkWithRedirect(e){return await Ja(Ai(this.auth)),Ko(this._delegate,e,Za)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return rl(this.auth,_s(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return il(this.auth,async function(e,t,n){const r=dt(e);if(Cn(r.auth.app))return Promise.reject(Sr(r.auth));const i=await Eo(r.auth,t,dt(n));return new ko(i,(e=>_s(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return rl(this.auth,async function(e,t,n){const r=dt(e);if(Cn(r.auth.app))return Promise.reject(_r(r.auth,"operation-not-supported-in-this-environment"));kr(r.auth,t,Zi);const i=xo(r.auth,n);return new Oo(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Za))}async reauthenticateWithRedirect(e){return await Ja(Ai(this.auth)),qo(this._delegate,e,Za)}sendEmailVerification(e){return Rs(this._delegate,e)}async unlink(e){return await ps(this._delegate,e),this}updateEmail(e){return function(e,t){const n=dt(e);return Cn(n.auth.app)?Promise.reject(Sr(n.auth)):Os(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Os(dt(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=dt(e);if(Cn(n.auth.app))return Promise.reject(Sr(n.auth));await ms(n,t)}(this._delegate,e)}updateProfile(e){return Ds(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Ps(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ol.USER_MAP=new WeakMap;const al=Tr;class ll{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;al(n,"invalid-api-key",{appName:e.name}),al(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Za:void 0;this._delegate=t.initialize({options:{persistence:ul(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(mr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ol.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Mi(this._delegate,e,t)}applyActionCode(e){return As(this._delegate,e)}checkActionCode(e){return Cs(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Vi(dt(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xs(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return rl(this._delegate,async function(e,t,n){if(Cn(e.app))return Promise.reject(Sr(e));const r=Ai(e),i=Li(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ls),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xs(e),t})),o=await cs._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Ns(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Yi.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){al(Ha(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Ai(e)._initializationPromise,Ho(e,t,!1)}(this._delegate,Za);return e?rl(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Ai(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=cl(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=cl(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Ai(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Tr(t.handleCodeInApp,r,"argument-error"),t&&Ts(r,e,t)}(i,n),await Li(r,i,"getOobCode",Hi)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Ai(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Ts(r,i,n),await Li(r,i,"getOobCode",Ki)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Qa(Object.values(Wa).includes(t),e,"invalid-persistence-type"),Ke()?Qa(t!==Wa.SESSION,e,"unsupported-persistence-type"):ze()?Qa(t===Wa.NONE,e,"unsupported-persistence-type"):Ka()?Qa(t===Wa.NONE||t===Wa.LOCAL&&We(),e,"unsupported-persistence-type"):Qa(t===Wa.NONE||qa(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Wa.SESSION:t=Ys;break;case Wa.LOCAL:t=await ci(fo)._isAvailable()?fo:$s;break;case Wa.NONE:t=hi;break;default:return br("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return rl(this._delegate,async function(e){var t;if(Cn(e.app))return Promise.reject(Sr(e));const n=Ai(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new cs({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ls(n,{returnSecureToken:!0}),i=await cs._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return rl(this._delegate,ws(this._delegate,e))}signInWithCustomToken(e){return rl(this._delegate,Is(this._delegate,e))}signInWithEmailAndPassword(e,t){return rl(this._delegate,function(e,t,n){return Cn(e.app)?Promise.reject(Sr(e)):ws(dt(e),Xi.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xs(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return rl(this._delegate,async function(e,t,n){if(Cn(e.app))return Promise.reject(Sr(e));const r=dt(e),i=Xi.credentialWithLink(t,n||Cr());return Tr(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ws(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return il(this._delegate,async function(e,t,n){if(Cn(e.app))return Promise.reject(Sr(e));const r=Ai(e),i=await Eo(r,t,dt(n));return new ko(i,(e=>ws(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return al(Ha(),this._delegate,"operation-not-supported-in-this-environment"),rl(this._delegate,async function(e,t,n){if(Cn(e.app))return Promise.reject(_r(e,"operation-not-supported-in-this-environment"));const r=Ai(e);kr(e,t,Zi);const i=xo(r,n);return new Oo(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Za))}async signInWithRedirect(e){return al(Ha(),this._delegate,"operation-not-supported-in-this-environment"),await Ja(this._delegate),Bo(this._delegate,e,Za)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Cs(dt(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function cl(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&ol.getOrCreate(e)),error:t,complete:n}}function ul(e,t){const n=function(e,t){const n=Ya();if(!n)return[];const r=di($a,e,t);switch(n.getItem(r)){case Wa.NONE:return[hi];case Wa.LOCAL:return[fo,Ys];case Wa.SESSION:return[Ys];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(fo)||n.push(fo),"undefined"!==typeof window)for(const r of[$s,Ys])n.includes(r)||n.push(r);return n.includes(hi)||n.push(hi),n}ll.Persistence=Wa;class hl{constructor(){this.providerId="phone",this._delegate=new To(el(sr.auth()))}static credential(e,t){return To.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}hl.PHONE_SIGN_IN_METHOD=To.PHONE_SIGN_IN_METHOD,hl.PROVIDER_ID=To.PROVIDER_ID;const dl=Tr;class fl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sr.app();var r;dl(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new So(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var pl;(pl=sr).INTERNAL.registerComponent(new ft("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new ll(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:lr,PASSWORD_RESET:cr,RECOVER_EMAIL:ur,REVERT_SECOND_FACTOR_ADDITION:hr,VERIFY_AND_CHANGE_EMAIL:dr,VERIFY_EMAIL:fr}},EmailAuthProvider:Xi,FacebookAuthProvider:ns,GithubAuthProvider:is,GoogleAuthProvider:rs,OAuthProvider:ts,SAMLAuthProvider:os,PhoneAuthProvider:hl,PhoneMultiFactorGenerator:Ia,RecaptchaVerifier:fl,TwitterAuthProvider:as,Auth:ll,AuthCredential:Ui,Error:$e}).setInstantiationMode("LAZY").setMultipleInstances(!1)),pl.registerVersion("@firebase/auth-compat","0.5.7");const ml=n.p+"static/media/book-club-logo.3e6e5e35b6d92b48083e.png";var gl=n(579);const yl=function(){const e=ee(),t=X(),n=sr.auth().currentUser,r=e=>t.pathname===e?"active":"";return(0,gl.jsxs)("nav",{className:"Navbar",children:[(0,gl.jsxs)("div",{className:"navLeft",children:[n&&(0,gl.jsx)(Te,{to:"/explore",children:(0,gl.jsx)("img",{src:ml,className:"logo"})}),!n&&(0,gl.jsx)("img",{src:ml,className:"logo"}),n&&(0,gl.jsxs)("ul",{children:[(0,gl.jsx)("li",{className:"navItem ".concat(r("/explore")),children:(0,gl.jsx)(Te,{to:"/explore",children:"Explore"})}),(0,gl.jsx)("li",{className:"navItem ".concat(r("/user/".concat(n.uid))),children:n&&(0,gl.jsx)(Te,{to:"/user/".concat(n.uid),children:"My Library"})}),(0,gl.jsx)("li",{className:"navItem ".concat(r("/users")),children:(0,gl.jsx)(Te,{to:"/users",children:"Friends"})}),(0,gl.jsx)("li",{className:"navItem ".concat(r("/clubs")),children:(0,gl.jsx)(Te,{to:"/clubs",children:"Book Clubs"})})]})]}),(0,gl.jsx)("div",{className:"navLeft",children:(0,gl.jsx)("ul",{children:(0,gl.jsx)("li",{className:"signOut",children:n&&(0,gl.jsx)("button",{onClick:async()=>{try{await sr.auth().signOut(),e("/")}catch(t){console.error("Error signing out:",t)}},className:"sign-out-button",children:(0,gl.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAADJUlEQVR4nO2dy25OURSAl7pM1BgxKlFUmggRXkDEpYblCRAv4PIABuYuicTETGjd03Ti8gqkKjFgIDrBX1Va1CcnZ4/k9D/nd+lea/3re4Cds9f373X2vy/riARBEARBEARBEARBEATBHwBsAE4BD4EXwGf0MAu8AcaAs8BmN5KBdcBl4Dt2WADuAwNiGeAA0MIu88A5YJlYAzgB/MAH14DlYgVgv7GU04QLYijnW0477Tgk2gGu4JdXwCpRPtX0lnp+56hoJc3z63gGDAG9ogRgLTAMTDR4/juiFeBBg+CvEaUAq4EnNX2YFq0AL2se/rAoB9hYk0ZbohXgU40ANWmnHcBomz7cFK3UBB8xAtAPvKvownvV60ReBBQAfcBI+k8zDdxSHXxvAkwSAjITAjITAjITAjLjWQAWNmU8CgB2pL3ir2mH7B6wVTTiTQBl8GcquvIR2CPacChgrE13WuokeBIA9KS0gxkJngQUAF/q+qRKgkMBow0E6JHgUMCm9MK1IcGbgAJgZ1qGbiphr+TCowBTErwKMCPBswATErwLUC/hXwoAtgN303agZZZudlT3JB20M7jIGoxViqlsvyUB4/jjhgkBxTl84Bv+mAoBeXlrQkBqZxx/2EhBqZ3BeAlnFJDaGgBud7AYphV701DNALuAD+qC3w0C0Bx87wLQHnzPArAQfK8CsBJ8jwKALbElqfvSoY5fvscRQLkmNW8m+A4FrGhw6VxP8L0JKAAemwm+UwG7FzmeGIdzl1jCo5SO5tI2qc7bkt5GQMVLuUc041mACUJAZkJAZkJAZkJAZjwJoKwbdD3tTc+kyxr//3DV3+BFAOUq6FRFF4oSNn1iuGCT2nJlHVxNGhGtAJM1AoZEORgvWVa3fv5c8ygAeoGnlov2NSlbWUg4okkEZbXfYw1GsPqyld1QuHVYNANcwi+TwErRTKpCa/04YRU/gYNiAWCfw1R0XiwBHHf0AYer6vcC2nzIwXI6mgPOiGXSO+GisWtHC8V0E9gmXgDWAyfT14kmlN2CnAVepz+Sp4siHbnjFQRBEARBEARBEARBEEhX8QtC7HnHiDwznAAAAABJRU5ErkJggg=="})})})})})]})};var vl,wl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},bl={},_l=_l||{},Il=wl||self;function Sl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function kl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var El="closure_uid_"+(1e9*Math.random()>>>0),Tl=0;function xl(e,t,n){return e.call.apply(e.bind,arguments)}function Al(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Cl(e,t,n){return(Cl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xl:Al).apply(null,arguments)}function Nl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Rl(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Pl(){this.s=this.s,this.o=this.o}Pl.prototype.s=!1,Pl.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,El)&&e[El]||(e[El]=++Tl))},Pl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Dl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ol(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ll(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Sl(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Ml(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ml.prototype.h=function(){this.defaultPrevented=!0};var Fl=function(){if(!Il.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Il.addEventListener("test",e,t),Il.removeEventListener("test",e,t)}catch(n){}return e}();function jl(e){return/^[\s\xa0]*$/.test(e)}function Ul(){var e=Il.navigator;return e&&(e=e.userAgent)?e:""}function Vl(e){return-1!=Ul().indexOf(e)}function zl(e){return zl[" "](e),e}zl[" "]=function(){};var Bl,ql,Kl=Vl("Opera"),Hl=Vl("Trident")||Vl("MSIE"),Gl=Vl("Edge"),Wl=Gl||Hl,Ql=Vl("Gecko")&&!(-1!=Ul().toLowerCase().indexOf("webkit")&&!Vl("Edge"))&&!(Vl("Trident")||Vl("MSIE"))&&!Vl("Edge"),$l=-1!=Ul().toLowerCase().indexOf("webkit")&&!Vl("Edge");function Jl(){var e=Il.document;return e?e.documentMode:void 0}e:{var Yl="",Xl=function(){var e=Ul();return Ql?/rv:([^\);]+)(\)|;)/.exec(e):Gl?/Edge\/([\d\.]+)/.exec(e):Hl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):$l?/WebKit\/(\S+)/.exec(e):Kl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Xl&&(Yl=Xl?Xl[1]:""),Hl){var Zl=Jl();if(null!=Zl&&Zl>parseFloat(Yl)){Bl=String(Zl);break e}}Bl=Yl}if(Il.document&&Hl){var ec=Jl();ql=ec||(parseInt(Bl,10)||void 0)}else ql=void 0;var tc=ql;function nc(e,t){if(Ml.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ql){e:{try{zl(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:rc[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&nc.$.h.call(this)}}Rl(nc,Ml);var rc={2:"touch",3:"pen",4:"mouse"};nc.prototype.h=function(){nc.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ic="closure_listenable_"+(1e6*Math.random()|0),sc=0;function oc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++sc,this.fa=this.ia=!1}function ac(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function lc(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function cc(e){const t={};for(const n in e)t[n]=e[n];return t}const uc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hc(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<uc.length;t++)n=uc[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function dc(e){this.src=e,this.g={},this.h=0}function fc(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Dl(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ac(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function pc(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}dc.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=pc(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new oc(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var mc="closure_lm_"+(1e6*Math.random()|0),gc={};function yc(e,t,n,r,i){if(r&&r.once)return wc(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)yc(e,t[s],n,r,i);return null}return n=Tc(n),e&&e[ic]?e.O(t,n,kl(r)?!!r.capture:!!r,i):vc(e,t,n,!1,r,i)}function vc(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=kl(i)?!!i.capture:!!i,a=kc(e);if(a||(e[mc]=a=new dc(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Sc;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Fl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ic(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function wc(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)wc(e,t[s],n,r,i);return null}return n=Tc(n),e&&e[ic]?e.P(t,n,kl(r)?!!r.capture:!!r,i):vc(e,t,n,!0,r,i)}function bc(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)bc(e,t[s],n,r,i);else r=kl(r)?!!r.capture:!!r,n=Tc(n),e&&e[ic]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=pc(s=e.g[t],n,r,i))&&(ac(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=kc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=pc(t,n,r,i)),(n=-1<e?t[e]:null)&&_c(n))}function _c(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[ic])fc(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ic(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=kc(t))?(fc(n,e),0==n.h&&(n.src=null,t[mc]=null)):ac(e)}}}function Ic(e){return e in gc?gc[e]:gc[e]="on"+e}function Sc(e,t){if(e.fa)e=!0;else{t=new nc(t,this);var n=e.listener,r=e.la||e.src;e.ia&&_c(e),e=n.call(r,t)}return e}function kc(e){return(e=e[mc])instanceof dc?e:null}var Ec="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tc(e){return"function"===typeof e?e:(e[Ec]||(e[Ec]=function(t){return e.handleEvent(t)}),e[Ec])}function xc(){Pl.call(this),this.i=new dc(this),this.S=this,this.J=null}function Ac(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Ml(t,e);else if(t instanceof Ml)t.target=t.target||e;else{var i=t;hc(t=new Ml(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Cc(o,r,!0,t)&&i}if(i=Cc(o=t.g=e,r,!0,t)&&i,i=Cc(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Cc(o=t.g=n[s],r,!1,t)&&i}function Cc(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&fc(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Rl(xc,Pl),xc.prototype[ic]=!0,xc.prototype.removeEventListener=function(e,t,n,r){bc(this,e,t,n,r)},xc.prototype.N=function(){if(xc.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ac(n[r]);delete t.g[e],t.h--}}this.J=null},xc.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},xc.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Nc=Il.JSON.stringify;function Rc(){var e=jc;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Pc=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Dc),(e=>e.reset()));class Dc{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Oc(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Lc(e){Il.setTimeout((()=>{throw e}),0)}let Mc,Fc=!1,jc=new class{constructor(){this.h=this.g=null}add(e,t){const n=Pc.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Uc=()=>{const e=Il.Promise.resolve(void 0);Mc=()=>{e.then(Vc)}};var Vc=()=>{for(var e;e=Rc();){try{e.h.call(e.g)}catch(n){Lc(n)}var t=Pc;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Fc=!1};function zc(e,t){xc.call(this),this.h=e||1,this.g=t||Il,this.j=Cl(this.qb,this),this.l=Date.now()}function Bc(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function qc(e,t,n){if("function"===typeof e)n&&(e=Cl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Cl(e.handleEvent,e)}return 2147483647<Number(t)?-1:Il.setTimeout(e,t||0)}function Kc(e){e.g=qc((()=>{e.g=null,e.i&&(e.i=!1,Kc(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Rl(zc,xc),(vl=zc.prototype).ga=!1,vl.T=null,vl.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ac(this,"tick"),this.ga&&(Bc(this),this.start()))}},vl.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},vl.N=function(){zc.$.N.call(this),Bc(this),delete this.g};class Hc extends Pl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Kc(this)}N(){super.N(),this.g&&(Il.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gc(e){Pl.call(this),this.h=e,this.g={}}Rl(Gc,Pl);var Wc=[];function Qc(e,t,n,r){Array.isArray(n)||(n&&(Wc[0]=n.toString()),n=Wc);for(var i=0;i<n.length;i++){var s=yc(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function $c(e){lc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&_c(e)}),e),e.g={}}function Jc(){this.g=!0}function Yc(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Nc(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Gc.prototype.N=function(){Gc.$.N.call(this),$c(this)},Gc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jc.prototype.Ea=function(){this.g=!1},Jc.prototype.info=function(){};var Xc={},Zc=null;function eu(){return Zc=Zc||new xc}function tu(e){Ml.call(this,Xc.Ta,e)}function nu(e){const t=eu();Ac(t,new tu(t))}function ru(e,t){Ml.call(this,Xc.STAT_EVENT,e),this.stat=t}function iu(e){const t=eu();Ac(t,new ru(t,e))}function su(e,t){Ml.call(this,Xc.Ua,e),this.size=t}function ou(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Il.setTimeout((function(){e()}),t)}Xc.Ta="serverreachability",Rl(tu,Ml),Xc.STAT_EVENT="statevent",Rl(ru,Ml),Xc.Ua="timingevent",Rl(su,Ml);var au={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},lu={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function cu(){}function uu(e){return e.h||(e.h=e.i())}function hu(){}cu.prototype.h=null;var du,fu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function pu(){Ml.call(this,"d")}function mu(){Ml.call(this,"c")}function gu(){}function yu(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Gc(this),this.P=wu,e=Wl?125:void 0,this.V=new zc(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new vu}function vu(){this.i=null,this.g="",this.h=!1}Rl(pu,Ml),Rl(mu,Ml),Rl(gu,cu),gu.prototype.g=function(){return new XMLHttpRequest},gu.prototype.i=function(){return{}},du=new gu;var wu=45e3,bu={},_u={};function Iu(e,t,n){e.L=1,e.A=zu(Mu(t)),e.u=n,e.S=!0,Su(e,null)}function Su(e,t){e.G=Date.now(),xu(e),e.B=Mu(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),eh(n.i,"t",r),e.o=0,n=e.l.J,e.h=new vu,e.g=td(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Hc(Cl(e.Pa,e,e.g),e.O)),Qc(e.U,e.g,"readystatechange",e.nb),t=e.I?cc(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),nu(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ku(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Eu(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Tu(e,n),r==_u){4==t&&(e.s=4,iu(14),i=!1),Yc(e.j,e.m,null,"[Incomplete Response]");break}if(r==bu){e.s=4,iu(15),Yc(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Yc(e.j,e.m,r,null),Pu(e,r)}ku(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,iu(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wh(t),t.M=!0,iu(11))):(Yc(e.j,e.m,n,"[Invalid Chunked Response]"),Ru(e),Nu(e))}function Tu(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?_u:(n=Number(t.substring(n,r)),isNaN(n)?bu:(r+=1)+n>t.length?_u:(t=t.slice(r,r+n),e.o=r+n,t))}function xu(e){e.Y=Date.now()+e.P,Au(e,e.P)}function Au(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=ou(Cl(e.lb,e),t)}function Cu(e){e.C&&(Il.clearTimeout(e.C),e.C=null)}function Nu(e){0==e.l.H||e.J||Jh(e.l,e)}function Ru(e){Cu(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Bc(e.V),$c(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Pu(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ah(n.i,e)))if(!e.K&&ah(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;$h(n),Uh(n)}Gh(n),iu(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ou(Cl(n.ib,n),6e3));if(1>=oh(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Xh(n,11)}else if((e.K||n.g==e)&&$h(n),!jl(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(lh(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Vu(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=ed(r,r.J?r.pa:null,r.Y),o.K){ch(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Cu(a),xu(a)),r.g=o}else Hh(r);0<n.j.length&&zh(n)}else"stop"!=c[0]&&"close"!=c[0]||Xh(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Xh(n,7):jh(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}nu()}catch(c){}}function Du(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Sl(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Sl(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Sl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(vl=yu.prototype).setTimeout=function(e){this.P=e},vl.nb=function(e){e=e.target;const t=this.M;t&&3==Ph(e)?t.l():this.Pa(e)},vl.Pa=function(e){try{if(e==this.g)e:{const u=Ph(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Wl||this.g&&(this.h.h||this.g.ja()||Dh(this.g)))){this.J||4!=u||7==t||nu(),Cu(this);var n=this.g.da();this.ca=n;t:if(ku(this)){var r=Dh(this.g);e="";var i=r.length,s=4==Ph(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ru(this),Nu(this);var o="";break t}this.h.i=new Il.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jl(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,iu(12),Ru(this),Nu(this);break e}Yc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pu(this,n)}this.S?(Eu(this,u,o),Wl&&this.i&&3==u&&(Qc(this.U,this.V,"tick",this.mb),this.V.start())):(Yc(this.j,this.m,o,null),Pu(this,o)),4==u&&Ru(this),this.i&&!this.J&&(4==u?Jh(this.l,this):(this.i=!1,xu(this)))}else(function(e){const t={};e=(e.g&&2<=Ph(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(jl(e[r]))continue;var n=Oc(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,iu(12)):(this.s=0,iu(13)),Ru(this),Nu(this)}}}catch(u){}},vl.mb=function(){if(this.g){var e=Ph(this.g),t=this.g.ja();this.o<t.length&&(Cu(this),Eu(this,e,t),this.i&&4!=e&&xu(this))}},vl.cancel=function(){this.J=!0,Ru(this)},vl.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(nu(),iu(17)),Ru(this),this.s=2,Nu(this)):Au(this,this.Y-e)};var Ou=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lu(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Lu){this.h=e.h,Fu(this,e.j),this.s=e.s,this.g=e.g,ju(this,e.m),this.l=e.l;var t=e.i,n=new Ju;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Uu(this,n),this.o=e.o}else e&&(t=String(e).match(Ou))?(this.h=!1,Fu(this,t[1]||"",!0),this.s=Bu(t[2]||""),this.g=Bu(t[3]||"",!0),ju(this,t[4]),this.l=Bu(t[5]||"",!0),Uu(this,t[6]||"",!0),this.o=Bu(t[7]||"")):(this.h=!1,this.i=new Ju(null,this.h))}function Mu(e){return new Lu(e)}function Fu(e,t,n){e.j=n?Bu(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ju(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Uu(e,t,n){t instanceof Ju?(e.i=t,function(e,t){t&&!e.j&&(Yu(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Xu(this,t),eh(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=qu(t,Qu)),e.i=new Ju(t,e.h))}function Vu(e,t,n){e.i.set(t,n)}function zu(e){return Vu(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Bu(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qu(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ku),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ku(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Lu.prototype.toString=function(){var e=[],t=this.j;t&&e.push(qu(t,Hu,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(qu(t,Hu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(qu(n,"/"==n.charAt(0)?Wu:Gu,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",qu(n,$u)),e.join("")};var Hu=/[#\/\?@]/g,Gu=/[#\?:]/g,Wu=/[#\?]/g,Qu=/[#\?@]/g,$u=/#/g;function Ju(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Yu(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Xu(e,t){Yu(e),t=th(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Zu(e,t){return Yu(e),t=th(e,t),e.g.has(t)}function eh(e,t,n){Xu(e,t),0<n.length&&(e.i=null,e.g.set(th(e,t),Ol(n)),e.h+=n.length)}function th(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(vl=Ju.prototype).add=function(e,t){Yu(this),this.i=null,e=th(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},vl.forEach=function(e,t){Yu(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},vl.ta=function(){Yu(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},vl.Z=function(e){Yu(this);let t=[];if("string"===typeof e)Zu(this,e)&&(t=t.concat(this.g.get(th(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},vl.set=function(e,t){return Yu(this),this.i=null,Zu(this,e=th(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},vl.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},vl.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var nh=class{constructor(e,t){this.g=e,this.map=t}};function rh(e){this.l=e||ih,Il.PerformanceNavigationTiming?e=0<(e=Il.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Il.g&&Il.g.Ka&&Il.g.Ka()&&Il.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ih=10;function sh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function oh(e){return e.h?1:e.g?e.g.size:0}function ah(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function lh(e,t){e.g?e.g.add(t):e.h=t}function ch(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function uh(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ol(e.i)}rh.prototype.cancel=function(){if(this.i=uh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var hh,dh=class{stringify(e){return Il.JSON.stringify(e,void 0)}parse(e){return Il.JSON.parse(e,void 0)}};function fh(){this.g=new dh}function ph(e,t,n){const r=n||"";try{Du(e,(function(e,n){let i=e;kl(e)&&(i=Nc(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(WA){throw t.push(r+"type="+encodeURIComponent("_badmap")),WA}}function mh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function gh(e){this.l=e.ec||null,this.j=e.ob||!1}function yh(e,t){xc.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=vh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Rl(gh,cu),gh.prototype.g=function(){return new yh(this.l,this.j)},gh.prototype.i=(hh={},function(){return hh}),Rl(yh,xc);var vh=0;function wh(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function bh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,_h(e)}function _h(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(vl=yh.prototype).open=function(e,t){if(this.readyState!=vh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,_h(this)},vl.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Il).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},vl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bh(this)),this.readyState=vh},vl.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,_h(this)),this.g&&(this.readyState=3,_h(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Il.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wh(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},vl.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?bh(this):_h(this),3==this.readyState&&wh(this)}},vl.Za=function(e){this.g&&(this.response=this.responseText=e,bh(this))},vl.Ya=function(e){this.g&&(this.response=e,bh(this))},vl.ka=function(){this.g&&bh(this)},vl.setRequestHeader=function(e,t){this.v.append(e,t)},vl.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},vl.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(yh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ih=Il.JSON.parse;function Sh(e){xc.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=kh,this.L=this.M=!1}Rl(Sh,xc);var kh="",Eh=/^https?$/i,Th=["POST","PUT"];function xh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ah(e),Nh(e)}function Ah(e){e.F||(e.F=!0,Ac(e,"complete"),Ac(e,"error"))}function Ch(e){if(e.h&&"undefined"!=typeof _l&&(!e.C[1]||4!=Ph(e)||2!=e.da()))if(e.v&&4==Ph(e))qc(e.La,0,e);else if(Ac(e,"readystatechange"),4==Ph(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Ou)[1]||null;!i&&Il.self&&Il.self.location&&(i=Il.self.location.protocol.slice(0,-1)),r=!Eh.test(i?i.toLowerCase():"")}n=r}if(n)Ac(e,"complete"),Ac(e,"success");else{e.m=6;try{var s=2<Ph(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Ah(e)}}finally{Nh(e)}}}function Nh(e,t){if(e.g){Rh(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ac(e,"ready");try{n.onreadystatechange=r}catch(WA){}}}function Rh(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Il.clearTimeout(e.A),e.A=null)}function Ph(e){return e.g?e.g.readyState:0}function Dh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case kh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Vd){return null}}function Oh(e){let t="";return lc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Lh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Oh(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Vu(e,t,n))}function Mh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Fh(e){this.Ga=0,this.j=[],this.l=new Jc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Mh("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Mh("baseRetryDelayMs",5e3,e),this.hb=Mh("retryDelaySeedMs",1e4,e),this.eb=Mh("forwardChannelMaxRetries",2,e),this.xa=Mh("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new rh(e&&e.concurrentRequestLimit),this.Ja=new fh,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function jh(e){if(Vh(e),3==e.H){var t=e.W++,n=Mu(e.I);if(Vu(n,"SID",e.K),Vu(n,"RID",t),Vu(n,"TYPE","terminate"),qh(e,n),(t=new yu(e,e.l,t)).L=2,t.A=zu(Mu(n)),n=!1,Il.navigator&&Il.navigator.sendBeacon)try{n=Il.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Il.Image&&((new Image).src=t.A,n=!0),n||(t.g=td(t.l,null),t.g.ha(t.A)),t.G=Date.now(),xu(t)}Zh(e)}function Uh(e){e.g&&(Wh(e),e.g.cancel(),e.g=null)}function Vh(e){Uh(e),e.u&&(Il.clearTimeout(e.u),e.u=null),$h(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Il.clearTimeout(e.m),e.m=null)}function zh(e){if(!sh(e.i)&&!e.m){e.m=!0;var t=e.Na;Mc||Uc(),Fc||(Mc(),Fc=!0),jc.add(t,e),e.C=0}}function Bh(e,t){var n;n=t?t.m:e.W++;const r=Mu(e.I);Vu(r,"SID",e.K),Vu(r,"RID",n),Vu(r,"AID",e.V),qh(e,r),e.o&&e.s&&Lh(r,e.o,e.s),n=new yu(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Kh(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),lh(e.i,n),Iu(n,r,t)}function qh(e,t){e.na&&lc(e.na,(function(e,n){Vu(t,n,e)})),e.h&&Du({},(function(e,n){Vu(t,n,e)}))}function Kh(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Cl(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{ph(a,e,"req"+n+"_")}catch(ip){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Hh(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Mc||Uc(),Fc||(Mc(),Fc=!0),jc.add(t,e),e.A=0}}function Gh(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ou(Cl(e.Ma,e),Yh(e,e.A)),e.A++,!0)}function Wh(e){null!=e.B&&(Il.clearTimeout(e.B),e.B=null)}function Qh(e){e.g=new yu(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Mu(e.wa);Vu(t,"RID","rpc"),Vu(t,"SID",e.K),Vu(t,"AID",e.V),Vu(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Vu(t,"TO",e.qa),Vu(t,"TYPE","xmlhttp"),qh(e,t),e.o&&e.s&&Lh(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=zu(Mu(t)),n.u=null,n.S=!0,Su(n,e)}function $h(e){null!=e.v&&(Il.clearTimeout(e.v),e.v=null)}function Jh(e,t){var n=null;if(e.g==t){$h(e),Wh(e),e.g=null;var r=2}else{if(!ah(e.i,t))return;n=t.F,ch(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Ac(r=eu(),new su(r,n)),zh(e)}else Hh(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(oh(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ou(Cl(e.Na,e,t),Yh(e,e.C)),e.C++,!0))}(e,t)||2==r&&Gh(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Xh(e,5);break;case 4:Xh(e,10);break;case 3:Xh(e,6);break;default:Xh(e,2)}}function Yh(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Xh(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Cl(e.pb,e);n||(n=new Lu("//www.google.com/images/cleardot.gif"),Il.location&&"http"==Il.location.protocol||Fu(n,"https"),zu(n)),function(e,t){const n=new Jc;if(Il.Image){const r=new Image;r.onload=Nl(mh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Nl(mh,n,r,"TestLoadImage: error",!1,t),r.onabort=Nl(mh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Nl(mh,n,r,"TestLoadImage: timeout",!1,t),Il.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else iu(2);e.H=0,e.h&&e.h.za(t),Zh(e),Vh(e)}function Zh(e){if(e.H=0,e.ma=[],e.h){const t=uh(e.i);0==t.length&&0==e.j.length||(Ll(e.ma,t),Ll(e.ma,e.j),e.i.i.length=0,Ol(e.j),e.j.length=0),e.h.ya()}}function ed(e,t,n){var r=n instanceof Lu?Mu(n):new Lu(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ju(r,r.m);else{var i=Il.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Lu(null);r&&Fu(s,r),t&&(s.g=t),i&&ju(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Vu(r,n,t),Vu(r,"VER",e.ra),qh(e,r),r}function td(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Sh(new gh({ob:n})):new Sh(e.va)).Oa(e.J),t}function nd(){}function rd(){if(Hl&&!(10<=Number(tc)))throw Error("Environmental error: no available transport.")}function id(e,t){xc.call(this),this.g=new Fh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!jl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!jl(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ad(this)}function sd(e){pu.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function od(){mu.call(this),this.status=1}function ad(e){this.g=e}function ld(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function cd(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function ud(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(vl=Sh.prototype).Oa=function(e){this.M=e},vl.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():du.g(),this.C=this.u?uu(this.u):uu(du),this.g.onreadystatechange=Cl(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void xh(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Il.FormData&&e instanceof Il.FormData,!(0<=Dl(Th,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Rh(this),0<this.B&&((this.L=function(e){return Hl&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Cl(this.ua,this)):this.A=qc(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){xh(this,s)}},vl.ua=function(){"undefined"!=typeof _l&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ac(this,"timeout"),this.abort(8))},vl.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ac(this,"complete"),Ac(this,"abort"),Nh(this))},vl.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Nh(this,!0)),Sh.$.N.call(this)},vl.La=function(){this.s||(this.G||this.v||this.l?Ch(this):this.kb())},vl.kb=function(){Ch(this)},vl.isActive=function(){return!!this.g},vl.da=function(){try{return 2<Ph(this)?this.g.status:-1}catch(hh){return-1}},vl.ja=function(){try{return this.g?this.g.responseText:""}catch(hh){return""}},vl.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ih(t)}},vl.Ia=function(){return this.m},vl.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(vl=Fh.prototype).ra=8,vl.H=1,vl.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new yu(this,this.l,e);let s=this.s;if(this.U&&(s?(s=cc(s),hc(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Kh(this,i,t),Vu(n=Mu(this.I),"RID",e),Vu(n,"CVER",22),this.F&&Vu(n,"X-HTTP-Session-Id",this.F),qh(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Oh(s)))+"&"+t:this.o&&Lh(n,this.o,s)),lh(this.i,i),this.bb&&Vu(n,"TYPE","init"),this.P?(Vu(n,"$req",t),Vu(n,"SID","null"),i.aa=!0,Iu(i,n,null)):Iu(i,n,t),this.H=2}}else 3==this.H&&(e?Bh(this,e):0==this.j.length||sh(this.i)||Bh(this))},vl.Ma=function(){if(this.u=null,Qh(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ou(Cl(this.jb,this),e)}},vl.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,iu(10),Uh(this),Qh(this))},vl.ib=function(){null!=this.v&&(this.v=null,Uh(this),Gh(this),iu(19))},vl.pb=function(e){e?(this.l.info("Successfully pinged google.com"),iu(2)):(this.l.info("Failed to ping google.com"),iu(1))},vl.isActive=function(){return!!this.h&&this.h.isActive(this)},(vl=nd.prototype).Ba=function(){},vl.Aa=function(){},vl.za=function(){},vl.ya=function(){},vl.isActive=function(){return!0},vl.Va=function(){},rd.prototype.g=function(e,t){return new id(e,t)},Rl(id,xc),id.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;iu(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=ed(e,null,e.Y),zh(e)},id.prototype.close=function(){jh(this.g)},id.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Nc(e),e=n);t.j.push(new nh(t.fb++,e)),3==t.H&&zh(t)},id.prototype.N=function(){this.g.h=null,delete this.j,jh(this.g),delete this.g,id.$.N.call(this)},Rl(sd,pu),Rl(od,mu),Rl(ad,nd),ad.prototype.Ba=function(){Ac(this.g,"a")},ad.prototype.Aa=function(e){Ac(this.g,new sd(e))},ad.prototype.za=function(e){Ac(this.g,new od)},ad.prototype.ya=function(){Ac(this.g,"b")},Rl(ld,(function(){this.blockSize=-1})),ld.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ld.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)cd(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){cd(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){cd(this,r),i=0;break}}this.h=i,this.i+=t},ld.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var hd={};function dd(e){return-128<=e&&128>e?function(e,t){var n=hd;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new ud([0|e],0>e?-1:0)})):new ud([0|e],0>e?-1:0)}function fd(e){if(isNaN(e)||!isFinite(e))return md;if(0>e)return bd(fd(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=pd;return new ud(t,0)}var pd=4294967296,md=dd(0),gd=dd(1),yd=dd(16777216);function vd(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function wd(e){return-1==e.h}function bd(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ud(n,~e.h).add(gd)}function _d(e,t){return e.add(bd(t))}function Id(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Sd(e,t){this.g=e,this.h=t}function kd(e,t){if(vd(t))throw Error("division by zero");if(vd(e))return new Sd(md,md);if(wd(e))return t=kd(bd(e),t),new Sd(bd(t.g),bd(t.h));if(wd(t))return t=kd(e,bd(t)),new Sd(bd(t.g),t.h);if(30<e.g.length){if(wd(e)||wd(t))throw Error("slowDivide_ only works with positive integers.");for(var n=gd,r=t;0>=r.X(e);)n=Ed(n),r=Ed(r);var i=Td(n,1),s=Td(r,1);for(r=Td(r,2),n=Td(n,2);!vd(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Td(r,1),n=Td(n,1)}return t=_d(e,i.R(t)),new Sd(i,t)}for(i=md;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=fd(n)).R(t);wd(o)||0<o.X(e);)o=(s=fd(n-=r)).R(t);vd(s)&&(s=gd),i=i.add(s),e=_d(e,o)}return new Sd(i,e)}function Ed(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ud(n,e.h)}function Td(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new ud(i,e.h)}(vl=ud.prototype).ea=function(){if(wd(this))return-bd(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:pd+r)*t,t*=pd}return e},vl.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(vd(this))return"0";if(wd(this))return"-"+bd(this).toString(e);for(var t=fd(Math.pow(e,6)),n=this,r="";;){var i=kd(n,t).g,s=((0<(n=_d(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(vd(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},vl.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},vl.X=function(e){return wd(e=_d(this,e))?-1:vd(e)?0:1},vl.abs=function(){return wd(this)?bd(this):this},vl.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new ud(n,-2147483648&n[n.length-1]?-1:0)},vl.R=function(e){if(vd(this)||vd(e))return md;if(wd(this))return wd(e)?bd(this).R(bd(e)):bd(bd(this).R(e));if(wd(e))return bd(this.R(bd(e)));if(0>this.X(yd)&&0>e.X(yd))return fd(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,Id(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Id(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Id(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Id(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ud(n,0)},vl.gb=function(e){return kd(this,e).h},vl.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ud(n,this.h&e.h)},vl.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ud(n,this.h|e.h)},vl.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ud(n,this.h^e.h)},rd.prototype.createWebChannel=rd.prototype.g,id.prototype.send=id.prototype.u,id.prototype.open=id.prototype.m,id.prototype.close=id.prototype.close,au.NO_ERROR=0,au.TIMEOUT=8,au.HTTP_ERROR=6,lu.COMPLETE="complete",hu.EventType=fu,fu.OPEN="a",fu.CLOSE="b",fu.ERROR="c",fu.MESSAGE="d",xc.prototype.listen=xc.prototype.O,Sh.prototype.listenOnce=Sh.prototype.P,Sh.prototype.getLastError=Sh.prototype.Sa,Sh.prototype.getLastErrorCode=Sh.prototype.Ia,Sh.prototype.getStatus=Sh.prototype.da,Sh.prototype.getResponseJson=Sh.prototype.Wa,Sh.prototype.getResponseText=Sh.prototype.ja,Sh.prototype.send=Sh.prototype.ha,Sh.prototype.setWithCredentials=Sh.prototype.Oa,ld.prototype.digest=ld.prototype.l,ld.prototype.reset=ld.prototype.reset,ld.prototype.update=ld.prototype.j,ud.prototype.add=ud.prototype.add,ud.prototype.multiply=ud.prototype.R,ud.prototype.modulo=ud.prototype.gb,ud.prototype.compare=ud.prototype.X,ud.prototype.toNumber=ud.prototype.ea,ud.prototype.toString=ud.prototype.toString,ud.prototype.getBits=ud.prototype.D,ud.fromNumber=fd,ud.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return bd(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=fd(Math.pow(n,8)),i=md,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=fd(Math.pow(n,o)),i=i.R(o).add(fd(a))):i=(i=i.R(r)).add(fd(a))}return i};var xd=bl.createWebChannelTransport=function(){return new rd},Ad=bl.getStatEventTarget=function(){return eu()},Cd=bl.ErrorCode=au,Nd=bl.EventType=lu,Rd=bl.Event=Xc,Pd=bl.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Dd=bl.FetchXmlHttpFactory=gh,Od=bl.WebChannel=hu,Ld=bl.XhrIo=Sh,Md=bl.Md5=ld,Fd=bl.Integer=ud;const jd="@firebase/firestore";class Ud{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ud.UNAUTHENTICATED=new Ud(null),Ud.GOOGLE_CREDENTIALS=new Ud("google-credentials-uid"),Ud.FIRST_PARTY=new Ud("first-party-uid"),Ud.MOCK_USER=new Ud("mock-user");let Vd="10.11.1";const zd=new kt("@firebase/firestore");function Bd(){return zd.logLevel}function qd(e){if(zd.logLevel<=wt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gd);zd.debug("Firestore (".concat(Vd,"): ").concat(e),...i)}}function Kd(e){if(zd.logLevel<=wt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gd);zd.error("Firestore (".concat(Vd,"): ").concat(e),...i)}}function Hd(e){if(zd.logLevel<=wt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gd);zd.warn("Firestore (".concat(Vd,"): ").concat(e),...i)}}function Gd(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Wd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Vd,") INTERNAL ASSERTION FAILED: ")+e;throw Kd(t),new Error(t)}function Qd(e,t){e||Wd()}function $d(e,t){return e}const Jd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yd extends $e{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Xd{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Zd{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ef{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ud.UNAUTHENTICATED)))}shutdown(){}}class tf{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class nf{constructor(e){this.t=e,this.currentUser=Ud.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Xd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Xd,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{qd("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(qd("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Xd)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(qd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Qd("string"==typeof t.accessToken),new Zd(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Qd(null===e||"string"==typeof e),new Ud(e)}}class rf{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ud.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sf{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new rf(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ud.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class of{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class af{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&qd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,qd("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{qd("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):qd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Qd("string"==typeof e.token),this.R=e.token,new of(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function lf(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class cf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=lf(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function uf(e,t){return e<t?-1:e>t?1:0}function hf(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function df(e){return e+"\0"}class ff{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Yd(Jd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Yd(Jd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Yd(Jd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Yd(Jd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ff.fromMillis(Date.now())}static fromDate(e){return ff.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ff(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?uf(this.nanoseconds,e.nanoseconds):uf(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class pf{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pf(e)}static min(){return new pf(new ff(0,0))}static max(){return new pf(new ff(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class mf{constructor(e,t,n){void 0===t?t=0:t>e.length&&Wd(),void 0===n?n=e.length-t:n>e.length-t&&Wd(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===mf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mf?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gf extends mf{construct(e,t,n){return new gf(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Yd(Jd.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new gf(e)}static emptyPath(){return new gf([])}}const yf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vf extends mf{construct(e,t,n){return new vf(e,t,n)}static isValidIdentifier(e){return yf.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vf.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vf(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Yd(Jd.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Yd(Jd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Yd(Jd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Yd(Jd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vf(t)}static emptyPath(){return new vf([])}}class wf{constructor(e){this.path=e}static fromPath(e){return new wf(gf.fromString(e))}static fromName(e){return new wf(gf.fromString(e).popFirst(5))}static empty(){return new wf(gf.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gf.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gf.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wf(new gf(e.slice()))}}class bf{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function _f(e){return e.fields.find((e=>2===e.kind))}function If(e){return e.fields.filter((e=>2!==e.kind))}bf.UNKNOWN_ID=-1;class Sf{constructor(e,t){this.fieldPath=e,this.kind=t}}class kf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new kf(0,xf.min())}}function Ef(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=pf.fromTimestamp(1e9===r?new ff(n+1,0):new ff(n,r));return new xf(i,wf.empty(),t)}function Tf(e){return new xf(e.readTime,e.key,-1)}class xf{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new xf(pf.min(),wf.empty(),-1)}static max(){return new xf(pf.max(),wf.empty(),-1)}}function Af(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=wf.comparator(e.documentKey,t.documentKey),0!==n?n:uf(e.largestBatchId,t.largestBatchId))}const Cf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Rf(e){if(e.code!==Jd.FAILED_PRECONDITION||e.message!==Cf)throw e;qd("LocalStore","Unexpectedly lost primary lease")}class Pf{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Wd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Pf(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Pf?t:Pf.resolve(t)}catch(e){return Pf.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Pf.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Pf.reject(t)}static resolve(e){return new Pf(((t,n)=>{t(e)}))}static reject(e){return new Pf(((t,n)=>{n(e)}))}static waitFor(e){return new Pf(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Pf.resolve(!1);for(const n of e)t=t.next((e=>e?Pf.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Pf(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Pf(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Df{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Xd,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ff(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Bf(t.target.error);this.V.reject(new Ff(e,n))}}static open(e,t,n,r){try{return new Df(t,e.transaction(r,n))}catch(e){throw new Ff(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(qd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Uf(t)}}class Of{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Of.S(Ve())&&Kd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qd("SimpleDb","Removing database:",e),Vf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!We())return!1;if(Of.C())return!0;const e=Ve(),t=Of.S(e),n=0<t&&t<10,r=Lf(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(qd("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ff(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Yd(Jd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Yd(Jd.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ff(e,r))},r.onupgradeneeded=e=>{qd("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{qd("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=Df.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Pf.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(qd("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Lf(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Mf{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Vf(this.B.delete())}}class Ff extends Yd{constructor(e,t){super(Jd.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function jf(e){return"IndexedDbTransactionError"===e.name}class Uf{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(qd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(qd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Vf(n)}add(e){return qd("SimpleDb","ADD",this.store.name,e,e),Vf(this.store.add(e))}get(e){return Vf(this.store.get(e)).next((t=>(void 0===t&&(t=null),qd("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return qd("SimpleDb","DELETE",this.store.name,e),Vf(this.store.delete(e))}count(){return qd("SimpleDb","COUNT",this.store.name),Vf(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Pf(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Pf(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){qd("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new Pf(((n,r)=>{t.onerror=e=>{const t=Bf(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new Pf(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Mf(i),o=t(i.primaryKey,i.value,s);if(o instanceof Pf){const e=o.catch((e=>(s.done(),Pf.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>Pf.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Vf(e){return new Pf(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Bf(e.target.error);n(t)}}))}let zf=!1;function Bf(e){const t=Of.S(Ve());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Yd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return zf||(zf=!0,setTimeout((()=>{throw e}),0)),e}}return e}class qf{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){qd("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{qd("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){jf(e)?qd("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Rf(e)}await this.X(6e4)}))}}class Kf{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return Pf.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return qd("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(qd("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Tf(t);Af(r,n)>0&&(n=r)})),new xf(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Hf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Gf(e){return null==e}function Wf(e){return 0===e&&1/e==-1/0}function Qf(e){return"number"==typeof e&&Number.isInteger(e)&&!Wf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function $f(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Yf(t)),t=Jf(e.get(n),t);return Yf(t)}function Jf(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Yf(e){return e+"\x01\x01"}function Xf(e){const t=e.length;if(Qd(t>=2),2===t)return Qd("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),gf.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Wd(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Wd()}s=t+2}return new gf(r)}Hf.oe=-1;const Zf=["userId","batchId"];function ep(e,t){return[e,$f(t)]}function tp(e,t,n){return[e,$f(t),n]}const np={},rp=["prefixPath","collectionGroup","readTime","documentId"],ip=["prefixPath","collectionGroup","documentId"],sp=["collectionGroup","readTime","prefixPath","documentId"],op=["canonicalId","targetId"],ap=["targetId","path"],lp=["path","targetId"],cp=["collectionId","parent"],up=["indexId","uid"],hp=["uid","sequenceNumber"],dp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fp=["indexId","uid","orderedDocumentKey"],pp=["userId","collectionPath","documentId"],mp=["userId","collectionPath","largestBatchId"],gp=["userId","collectionGroup","largestBatchId"],yp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vp=[...yp,"documentOverlays"],wp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bp=wp,_p=[...bp,"indexConfiguration","indexState","indexEntries"],Ip=_p;class Sp extends Nf{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function kp(e,t){const n=$d(e);return Of.F(n._e,t)}function Ep(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Tp(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function xp(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ap{constructor(e,t){this.comparator=e,this.root=t||Np.EMPTY}insert(e,t){return new Ap(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Np.BLACK,null,null))}remove(e){return new Ap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Np.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cp(this.root,e,this.comparator,!0)}}class Cp{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Np{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Np.RED,this.left=null!=r?r:Np.EMPTY,this.right=null!=i?i:Np.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Np(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Np.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Np.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Np.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Np.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Wd();if(this.right.isRed())throw Wd();const e=this.left.check();if(e!==this.right.check())throw Wd();return e+(this.isRed()?0:1)}}Np.EMPTY=null,Np.RED=!0,Np.BLACK=!1,Np.EMPTY=new class{constructor(){this.size=0}get key(){throw Wd()}get value(){throw Wd()}get color(){throw Wd()}get left(){throw Wd()}get right(){throw Wd()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Np(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rp{constructor(e){this.comparator=e,this.data=new Ap(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pp(this.data.getIterator())}getIteratorFrom(e){return new Pp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Rp))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rp(this.comparator);return t.data=e,t}}class Pp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dp(e){return e.hasNext()?e.getNext():void 0}class Op{constructor(e){this.fields=e,e.sort(vf.comparator)}static empty(){return new Op([])}unionWith(e){let t=new Rp(vf.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Op(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hf(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Lp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mp{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Lp("Invalid base64 string: "+e):e}}(e);return new Mp(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Mp(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return uf(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mp.EMPTY_BYTE_STRING=new Mp("");const Fp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jp(e){if(Qd(!!e),"string"==typeof e){let t=0;const n=Fp.exec(e);if(Qd(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Up(e.seconds),nanos:Up(e.nanos)}}function Up(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Vp(e){return"string"==typeof e?Mp.fromBase64String(e):Mp.fromUint8Array(e)}function zp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bp(e){const t=e.mapValue.fields.__previous_value__;return zp(t)?Bp(t):t}function qp(e){const t=jp(e.mapValue.fields.__local_write_time__.timestampValue);return new ff(t.seconds,t.nanos)}class Kp{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Hp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Hp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hp&&e.projectId===this.projectId&&e.database===this.database}}const Gp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wp={nullValue:"NULL_VALUE"};function Qp(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zp(e)?4:lm(e)?9007199254740991:10:Wd()}function $p(e,t){if(e===t)return!0;const n=Qp(e);if(n!==Qp(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qp(e).isEqual(qp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=jp(e.timestampValue),r=jp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Vp(e.bytesValue).isEqual(Vp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Up(e.geoPointValue.latitude)===Up(t.geoPointValue.latitude)&&Up(e.geoPointValue.longitude)===Up(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Up(e.integerValue)===Up(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Up(e.doubleValue),r=Up(t.doubleValue);return n===r?Wf(n)===Wf(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hf(e.arrayValue.values||[],t.arrayValue.values||[],$p);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ep(n)!==Ep(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!$p(n[i],r[i])))return!1;return!0}(e,t);default:return Wd()}}function Jp(e,t){return void 0!==(e.values||[]).find((e=>$p(e,t)))}function Yp(e,t){if(e===t)return 0;const n=Qp(e),r=Qp(t);if(n!==r)return uf(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return uf(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Up(e.integerValue||e.doubleValue),r=Up(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Xp(e.timestampValue,t.timestampValue);case 4:return Xp(qp(e),qp(t));case 5:return uf(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Vp(e),r=Vp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=uf(n[i],r[i]);if(0!==e)return e}return uf(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=uf(Up(e.latitude),Up(t.latitude));return 0!==n?n:uf(Up(e.longitude),Up(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Yp(n[i],r[i]);if(e)return e}return uf(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Gp.mapValue&&t===Gp.mapValue)return 0;if(e===Gp.mapValue)return 1;if(t===Gp.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=uf(r[o],s[o]);if(0!==e)return e;const t=Yp(n[r[o]],i[s[o]]);if(0!==t)return t}return uf(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Wd()}}function Xp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return uf(e,t);const n=jp(e),r=jp(t),i=uf(n.seconds,r.seconds);return 0!==i?i:uf(n.nanos,r.nanos)}function Zp(e){return em(e)}function em(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=jp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Vp(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return wf.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=em(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(em(e.fields[i]));return n+"}"}(e.mapValue):Wd()}function tm(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function nm(e){return!!e&&"integerValue"in e}function rm(e){return!!e&&"arrayValue"in e}function im(e){return!!e&&"nullValue"in e}function sm(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function om(e){return!!e&&"mapValue"in e}function am(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Tp(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=am(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=am(e.arrayValue.values[n]);return t}return Object.assign({},e)}function lm(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function cm(e){return"nullValue"in e?Wp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?tm(Hp.empty(),wf.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Wd()}function um(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?tm(Hp.empty(),wf.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Gp:Wd()}function hm(e,t){const n=Yp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function dm(e,t){const n=Yp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class fm{constructor(e){this.value=e}static empty(){return new fm({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!om(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=am(t)}setAll(e){let t=vf.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=am(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());om(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $p(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];om(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Tp(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new fm(am(this.value))}}function pm(e){const t=[];return Tp(e.fields,((e,n)=>{const r=new vf([e]);if(om(n)){const e=pm(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Op(t)}class mm{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new mm(e,0,pf.min(),pf.min(),pf.min(),fm.empty(),0)}static newFoundDocument(e,t,n,r){return new mm(e,1,t,pf.min(),n,r,0)}static newNoDocument(e,t){return new mm(e,2,t,pf.min(),pf.min(),fm.empty(),0)}static newUnknownDocument(e,t){return new mm(e,3,t,pf.min(),pf.min(),fm.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pf.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fm.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fm.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pf.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mm&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mm(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class gm{constructor(e,t){this.position=e,this.inclusive=t}}function ym(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?wf.comparator(wf.fromName(o.referenceValue),n.key):Yp(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function vm(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!$p(e.position[n],t.position[n]))return!1;return!0}class wm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function bm(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class _m{}class Im extends _m{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Pm(e,t,n):"array-contains"===t?new Mm(e,n):"in"===t?new Fm(e,n):"not-in"===t?new jm(e,n):"array-contains-any"===t?new Um(e,n):new Im(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Dm(e,n):new Om(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Yp(t,this.value)):null!==t&&Qp(this.value)===Qp(t)&&this.matchesComparison(Yp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wd()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sm extends _m{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Sm(e,t)}matches(e){return km(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function km(e){return"and"===e.op}function Em(e){return"or"===e.op}function Tm(e){return xm(e)&&km(e)}function xm(e){for(const t of e.filters)if(t instanceof Sm)return!1;return!0}function Am(e){if(e instanceof Im)return e.field.canonicalString()+e.op.toString()+Zp(e.value);if(Tm(e))return e.filters.map((e=>Am(e))).join(",");{const t=e.filters.map((e=>Am(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Cm(e,t){return e instanceof Im?function(e,t){return t instanceof Im&&e.op===t.op&&e.field.isEqual(t.field)&&$p(e.value,t.value)}(e,t):e instanceof Sm?function(e,t){return t instanceof Sm&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Cm(n,t.filters[r])),!0)}(e,t):void Wd()}function Nm(e,t){const n=e.filters.concat(t);return Sm.create(n,e.op)}function Rm(e){return e instanceof Im?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Zp(e.value))}(e):e instanceof Sm?function(e){return e.op.toString()+" {"+e.getFilters().map(Rm).join(" ,")+"}"}(e):"Filter"}class Pm extends Im{constructor(e,t,n){super(e,t,n),this.key=wf.fromName(n.referenceValue)}matches(e){const t=wf.comparator(e.key,this.key);return this.matchesComparison(t)}}class Dm extends Im{constructor(e,t){super(e,"in",t),this.keys=Lm("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Om extends Im{constructor(e,t){super(e,"not-in",t),this.keys=Lm("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Lm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>wf.fromName(e.referenceValue)))}class Mm extends Im{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rm(t)&&Jp(t.arrayValue,this.value)}}class Fm extends Im{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jp(this.value.arrayValue,t)}}class jm extends Im{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Jp(this.value.arrayValue,t)}}class Um extends Im{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Jp(this.value.arrayValue,e)))}}class Vm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function zm(e){return new Vm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Bm(e){const t=$d(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Am(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Gf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Zp(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Zp(e))).join(",")),t.ue=e}return t.ue}function qm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!bm(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Cm(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vm(e.startAt,t.startAt)&&vm(e.endAt,t.endAt)}function Km(e){return wf.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Hm(e,t){return e.filters.filter((e=>e instanceof Im&&e.field.isEqual(t)))}function Gm(e,t,n){let r=Wp,i=!0;for(const s of Hm(e,t)){let e=Wp,t=!0;switch(s.op){case"<":case"<=":e=cm(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Wp}hm({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];hm({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Wm(e,t,n){let r=Gp,i=!0;for(const s of Hm(e,t)){let e=Gp,t=!0;switch(s.op){case">=":case">":e=um(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Gp}dm({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];dm({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Qm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $m(e,t,n,r,i,s,o,a){return new Qm(e,t,n,r,i,s,o,a)}function Jm(e){return new Qm(e)}function Ym(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Xm(e){return null!==e.collectionGroup}function Zm(e){const t=$d(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Rp(vf.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new wm(r,n))})),e.has(vf.keyField().canonicalString())||t.ce.push(new wm(vf.keyField(),n))}return t.ce}function eg(e){const t=$d(e);return t.le||(t.le=tg(t,Zm(e))),t.le}function tg(e,t){if("F"===e.limitType)return zm(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new wm(e.field,t)}));const n=e.endAt?new gm(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new gm(e.startAt.position,e.startAt.inclusive):null;return zm(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ng(e,t){const n=e.filters.concat([t]);return new Qm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function rg(e,t,n){return new Qm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ig(e,t){return qm(eg(e),eg(t))&&e.limitType===t.limitType}function sg(e){return"".concat(Bm(eg(e)),"|lt:").concat(e.limitType)}function og(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Rm(e))).join(", "),"]")),Gf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Zp(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Zp(e))).join(",")),"Target(".concat(t,")")}(eg(e)),"; limitType=").concat(e.limitType,")")}function ag(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):wf.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Zm(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ym(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Zm(e),t))&&!(e.endAt&&!function(e,t,n){const r=ym(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Zm(e),t))}(e,t)}function lg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function cg(e){return(t,n)=>{let r=!1;for(const i of Zm(e)){const e=ug(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ug(e,t,n){const r=e.field.isKeyField()?wf.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Yp(r,i):Wd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wd()}}class hg{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Tp(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return xp(this.inner)}size(){return this.innerSize}}const dg=new Ap(wf.comparator);function fg(){return dg}const pg=new Ap(wf.comparator);function mg(){let e=pg;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function gg(e){let t=pg;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function yg(){return wg()}function vg(){return wg()}function wg(){return new hg((e=>e.toString()),((e,t)=>e.isEqual(t)))}const bg=new Ap(wf.comparator),_g=new Rp(wf.comparator);function Ig(){let e=_g;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Sg=new Rp(uf);function kg(){return Sg}function Eg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wf(t)?"-0":t}}function Tg(e){return{integerValue:""+e}}function xg(e,t){return Qf(t)?Tg(t):Eg(e,t)}class Ag{constructor(){this._=void 0}}function Cg(e,t,n){return e instanceof Pg?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&zp(t)&&(t=Bp(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Dg?Og(e,t):e instanceof Lg?Mg(e,t):function(e,t){const n=Rg(e,t),r=jg(n)+jg(e.Pe);return nm(n)&&nm(e.Pe)?Tg(r):Eg(e.serializer,r)}(e,t)}function Ng(e,t,n){return e instanceof Dg?Og(e,t):e instanceof Lg?Mg(e,t):n}function Rg(e,t){return e instanceof Fg?function(e){return nm(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Pg extends Ag{}class Dg extends Ag{constructor(e){super(),this.elements=e}}function Og(e,t){const n=Ug(t);for(const r of e.elements)n.some((e=>$p(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Lg extends Ag{constructor(e){super(),this.elements=e}}function Mg(e,t){let n=Ug(t);for(const r of e.elements)n=n.filter((e=>!$p(e,r)));return{arrayValue:{values:n}}}class Fg extends Ag{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function jg(e){return Up(e.integerValue||e.doubleValue)}function Ug(e){return rm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Vg{constructor(e,t){this.field=e,this.transform=t}}class zg{constructor(e,t){this.version=e,this.transformResults=t}}class Bg{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bg}static exists(e){return new Bg(void 0,e)}static updateTime(e){return new Bg(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Kg{}function Hg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ty(e.key,Bg.none()):new Jg(e.key,e.data,Bg.none());{const n=e.data,r=fm.empty();let i=new Rp(vf.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Yg(e.key,r,new Op(i.toArray()),Bg.none())}}function Gg(e,t,n){e instanceof Jg?function(e,t,n){const r=e.value.clone(),i=Zg(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Yg?function(e,t,n){if(!qg(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Zg(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Xg(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Wg(e,t,n,r){return e instanceof Jg?function(e,t,n,r){if(!qg(e.precondition,t))return n;const i=e.value.clone(),s=ey(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Yg?function(e,t,n,r){if(!qg(e.precondition,t))return n;const i=ey(e.fieldTransforms,r,t),s=t.data;return s.setAll(Xg(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return qg(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Qg(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Rg(r.transform,e||null);null!=i&&(null===n&&(n=fm.empty()),n.set(r.field,i))}return n||null}function $g(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&hf(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Dg&&t instanceof Dg||e instanceof Lg&&t instanceof Lg?hf(e.elements,t.elements,$p):e instanceof Fg&&t instanceof Fg?$p(e.Pe,t.Pe):e instanceof Pg&&t instanceof Pg}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Jg extends Kg{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Yg extends Kg{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Xg(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Zg(e,t,n){const r=new Map;Qd(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ng(o,a,n[i]))}return r}function ey(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Cg(e,s,t))}return r}class ty extends Kg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ny extends Kg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ry{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Gg(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Wg(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Wg(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=vg();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Hg(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(pf.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ig())}isEqual(e){return this.batchId===e.batchId&&hf(this.mutations,e.mutations,((e,t)=>$g(e,t)))&&hf(this.baseMutations,e.baseMutations,((e,t)=>$g(e,t)))}}class iy{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Qd(e.mutations.length===n.length);let r=bg;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new iy(e,t,n,r)}}class sy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class oy{constructor(e,t){this.count=e,this.unchangedNames=t}}var ay,ly;function cy(e){switch(e){default:return Wd();case Jd.CANCELLED:case Jd.UNKNOWN:case Jd.DEADLINE_EXCEEDED:case Jd.RESOURCE_EXHAUSTED:case Jd.INTERNAL:case Jd.UNAVAILABLE:case Jd.UNAUTHENTICATED:return!1;case Jd.INVALID_ARGUMENT:case Jd.NOT_FOUND:case Jd.ALREADY_EXISTS:case Jd.PERMISSION_DENIED:case Jd.FAILED_PRECONDITION:case Jd.ABORTED:case Jd.OUT_OF_RANGE:case Jd.UNIMPLEMENTED:case Jd.DATA_LOSS:return!0}}function uy(e){if(void 0===e)return Kd("GRPC error has no .code"),Jd.UNKNOWN;switch(e){case ay.OK:return Jd.OK;case ay.CANCELLED:return Jd.CANCELLED;case ay.UNKNOWN:return Jd.UNKNOWN;case ay.DEADLINE_EXCEEDED:return Jd.DEADLINE_EXCEEDED;case ay.RESOURCE_EXHAUSTED:return Jd.RESOURCE_EXHAUSTED;case ay.INTERNAL:return Jd.INTERNAL;case ay.UNAVAILABLE:return Jd.UNAVAILABLE;case ay.UNAUTHENTICATED:return Jd.UNAUTHENTICATED;case ay.INVALID_ARGUMENT:return Jd.INVALID_ARGUMENT;case ay.NOT_FOUND:return Jd.NOT_FOUND;case ay.ALREADY_EXISTS:return Jd.ALREADY_EXISTS;case ay.PERMISSION_DENIED:return Jd.PERMISSION_DENIED;case ay.FAILED_PRECONDITION:return Jd.FAILED_PRECONDITION;case ay.ABORTED:return Jd.ABORTED;case ay.OUT_OF_RANGE:return Jd.OUT_OF_RANGE;case ay.UNIMPLEMENTED:return Jd.UNIMPLEMENTED;case ay.DATA_LOSS:return Jd.DATA_LOSS;default:return Wd()}}(ly=ay||(ay={}))[ly.OK=0]="OK",ly[ly.CANCELLED=1]="CANCELLED",ly[ly.UNKNOWN=2]="UNKNOWN",ly[ly.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ly[ly.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ly[ly.NOT_FOUND=5]="NOT_FOUND",ly[ly.ALREADY_EXISTS=6]="ALREADY_EXISTS",ly[ly.PERMISSION_DENIED=7]="PERMISSION_DENIED",ly[ly.UNAUTHENTICATED=16]="UNAUTHENTICATED",ly[ly.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ly[ly.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ly[ly.ABORTED=10]="ABORTED",ly[ly.OUT_OF_RANGE=11]="OUT_OF_RANGE",ly[ly.UNIMPLEMENTED=12]="UNIMPLEMENTED",ly[ly.INTERNAL=13]="INTERNAL",ly[ly.UNAVAILABLE=14]="UNAVAILABLE",ly[ly.DATA_LOSS=15]="DATA_LOSS";let hy=null;function dy(){return new TextEncoder}const fy=new Fd([4294967295,4294967295],0);function py(e){const t=dy().encode(e),n=new Md;return n.update(t),new Uint8Array(n.digest())}function my(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Fd([n,r],0),new Fd([i,s],0)]}class gy{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new yy("Invalid padding: ".concat(t));if(n<0)throw new yy("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new yy("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new yy("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Fd.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Fd.fromNumber(n)));return 1===r.compare(fy)&&(r=new Fd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=py(e),[n,r]=my(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new gy(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=py(e),[n,r]=my(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class yy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vy{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,wy.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new vy(pf.min(),r,new Ap(uf),fg(),Ig())}}class wy{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new wy(n,t,Ig(),Ig(),Ig())}}class by{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class _y{constructor(e,t){this.targetId=e,this.me=t}}class Iy{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mp.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Sy{constructor(){this.fe=0,this.ge=Ty(),this.pe=Mp.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ig(),t=Ig(),n=Ig();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Wd()}})),new wy(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=Ty()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qd(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ky{constructor(e){this.Le=e,this.Be=new Map,this.ke=fg(),this.qe=Ey(),this.Qe=new Ap(uf)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Wd()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Km(i))if(0===n){const e=new wf(i.path);this.Ue(t,e,mm.newNoDocument(e,pf.min()))}else Qd(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==hy||hy.et(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Vp(n).toUint8Array()}catch(e){if(e instanceof Lp)return Hd("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new gy(s,r,i)}catch(e){return Hd(e instanceof yy?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Km(i.target)){const t=new wf(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,mm.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=Ig();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new vy(e,t,this.Qe,this.ke,n);return this.ke=fg(),this.qe=Ey(),this.Qe=new Ap(uf),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Sy,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Rp(uf),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||qd("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Sy),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Ey(){return new Ap(wf.comparator)}function Ty(){return new Ap(wf.comparator)}const xy={asc:"ASCENDING",desc:"DESCENDING"},Ay={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cy={and:"AND",or:"OR"};class Ny{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ry(e,t){return e.useProto3Json||Gf(t)?t:{value:t}}function Py(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Dy(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Oy(e,t){return Py(e,t.toTimestamp())}function Ly(e){return Qd(!!e),pf.fromTimestamp(function(e){const t=jp(e);return new ff(t.seconds,t.nanos)}(e))}function My(e,t){return Fy(e,t).canonicalString()}function Fy(e,t){const n=function(e){return new gf(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function jy(e){const t=gf.fromString(e);return Qd(ov(t)),t}function Uy(e,t){return My(e.databaseId,t.path)}function Vy(e,t){const n=jy(t);if(n.get(1)!==e.databaseId.projectId)throw new Yd(Jd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Yd(Jd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wf(Ky(n))}function zy(e,t){return My(e.databaseId,t)}function By(e){const t=jy(e);return 4===t.length?gf.emptyPath():Ky(t)}function qy(e){return new gf(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ky(e){return Qd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Hy(e,t,n){return{name:Uy(e,t),fields:n.value.mapValue.fields}}function Gy(e,t,n){const r=Vy(e,t.name),i=Ly(t.updateTime),s=t.createTime?Ly(t.createTime):pf.min(),o=new fm({mapValue:{fields:t.fields}}),a=mm.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Wy(e,t){let n;if(t instanceof Jg)n={update:Hy(e,t.key,t.value)};else if(t instanceof ty)n={delete:Uy(e,t.key)};else if(t instanceof Yg)n={update:Hy(e,t.key,t.data),updateMask:sv(t.fieldMask)};else{if(!(t instanceof ny))return Wd();n={verify:Uy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Pg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Dg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Lg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Fg)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Wd()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Oy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Wd()}(e,t.precondition)),n}function Qy(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Bg.updateTime(Ly(e.updateTime)):void 0!==e.exists?Bg.exists(e.exists):Bg.none()}(t.currentDocument):Bg.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Qd("REQUEST_TIME"===t.setToServerValue),n=new Pg;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Dg(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Lg(e)}else"increment"in t?n=new Fg(e,t.increment):Wd();const r=vf.fromServerFormat(t.fieldPath);return new Vg(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Vy(e,t.update.name),s=new fm({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Op(t.map((e=>vf.fromServerFormat(e))))}(t.updateMask);return new Yg(i,s,e,n,r)}return new Jg(i,s,n,r)}if(t.delete){const r=Vy(e,t.delete);return new ty(r,n)}if(t.verify){const r=Vy(e,t.verify);return new ny(r,n)}return Wd()}function $y(e,t){return{documents:[zy(e,t.path)]}}function Jy(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zy(e,i);const s=function(e){if(0!==e.length)return iv(Sm.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:nv(e.field),direction:Zy(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ry(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Yy(e){let t=By(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qd(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Xy(e);return t instanceof Sm&&Tm(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new wm(rv(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Gf(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new gm(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new gm(n,t)}(n.endAt)),$m(t,i,o,s,a,"F",l,c)}function Xy(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=rv(e.unaryFilter.field);return Im.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=rv(e.unaryFilter.field);return Im.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=rv(e.unaryFilter.field);return Im.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=rv(e.unaryFilter.field);return Im.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Wd()}}(e):void 0!==e.fieldFilter?function(e){return Im.create(rv(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wd()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Sm.create(e.compositeFilter.filters.map((e=>Xy(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Wd()}}(e.compositeFilter.op))}(e):Wd()}function Zy(e){return xy[e]}function ev(e){return Ay[e]}function tv(e){return Cy[e]}function nv(e){return{fieldPath:e.canonicalString()}}function rv(e){return vf.fromServerFormat(e.fieldPath)}function iv(e){return e instanceof Im?function(e){if("=="===e.op){if(sm(e.value))return{unaryFilter:{field:nv(e.field),op:"IS_NAN"}};if(im(e.value))return{unaryFilter:{field:nv(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(sm(e.value))return{unaryFilter:{field:nv(e.field),op:"IS_NOT_NAN"}};if(im(e.value))return{unaryFilter:{field:nv(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nv(e.field),op:ev(e.op),value:e.value}}}(e):e instanceof Sm?function(e){const t=e.getFilters().map((e=>iv(e)));return 1===t.length?t[0]:{compositeFilter:{op:tv(e.op),filters:t}}}(e):Wd()}function sv(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ov(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class av{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:pf.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:pf.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Mp.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new av(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new av(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new av(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new av(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lv{constructor(e){this.ut=e}}function cv(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:uv(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Uy(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Py(e,t.version.toTimestamp()),createTime:Py(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:hv(t.version)};else{if(!t.isUnknownDocument())return Wd();r.unknownDocument={path:n.path.toArray(),version:hv(t.version)}}return r}function uv(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function hv(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function dv(e){const t=new ff(e.seconds,e.nanoseconds);return pf.fromTimestamp(t)}function fv(e,t){const n=(t.baseMutations||[]).map((t=>Qy(e.ut,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Qy(e.ut,t))),i=ff.fromMillis(t.localWriteTimeMs);return new ry(t.batchId,i,n,r)}function pv(e){const t=dv(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?dv(e.lastLimboFreeSnapshotVersion):pf.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Qd(1===e.documents.length),eg(Jm(By(e.documents[0])))}(e.query):function(e){return eg(Yy(e))}(e.query),new av(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Mp.fromBase64String(e.resumeToken))}function mv(e,t){const n=hv(t.snapshotVersion),r=hv(t.lastLimboFreeSnapshotVersion);let i;i=Km(t.target)?$y(e.ut,t.target):Jy(e.ut,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Bm(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function gv(e){const t=Yy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?rg(t,t.limit,"L"):t}function yv(e,t){return new sy(t.largestBatchId,Qy(e.ut,t.overlayMutation))}function vv(e,t){const n=t.path.lastSegment();return[e,$f(t.path.popLast()),n]}function wv(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:hv(r.readTime),documentKey:$f(r.documentKey.path),largestBatchId:r.largestBatchId}}class bv{getBundleMetadata(e,t){return _v(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:dv(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return _v(e).put(function(e){return{bundleId:e.id,createTime:hv(Ly(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Iv(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:gv(e.bundledQuery),readTime:dv(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Iv(e).put(function(e){return{name:e.name,readTime:hv(Ly(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function _v(e){return kp(e,"bundles")}function Iv(e){return kp(e,"namedQueries")}class Sv{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new Sv(e,n)}getOverlay(e,t){return kv(e).get(vv(this.userId,t)).next((e=>e?yv(this.serializer,e):null))}getOverlays(e,t){const n=yg();return Pf.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new sy(t,i);r.push(this.lt(e,s))})),Pf.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add($f(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(kv(e).j("collectionPathOverlayIndex",r))})),Pf.waitFor(i)}getOverlaysForCollection(e,t,n){const r=yg(),i=$f(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return kv(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=yv(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=yg();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return kv(e).J({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=yv(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return kv(e).put(function(e,t,n){const[r,i,s]=vv(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Wy(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function kv(e){return kp(e,"documentOverlays")}class Ev{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Up(e.integerValue));else if("doubleValue"in e){const n=Up(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Wf(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Tt(t,20),"string"==typeof n&&(n=jp(n)),t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Vp(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?lm(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Wd()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),wf.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function Tv(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function xv(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Tv(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ev.St=new Ev;class Av{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Lt(e),n=xv(t);this.Bt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Lt(e),n=xv(t);this.Bt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Bt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Bt(1),this.buffer[this.position++]=e}$t(e){this.Bt(1),this.buffer[this.position++]=~e}Bt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Cv{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Nv{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Rv{constructor(){this.Wt=new Av,this.Gt=new Cv(this.Wt),this.zt=new Nv(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Pv{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Pv(this.indexId,this.documentKey,this.arrayValue,n)}}function Dv(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Ov(e.arrayValue,t.arrayValue),0!==n?n:(n=Ov(e.directionalValue,t.directionalValue),0!==n?n:wf.comparator(e.documentKey,t.documentKey)))}function Ov(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Lv{constructor(e){this.Jt=new Rp(((e,t)=>vf.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(Qd(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=_f(e);if(void 0!==t&&!this.tn(t))return!1;const n=If(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new Rp(vf.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Sf(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Sf(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Sf(n.field,"asc"===n.dir?0:1)));return new bf(bf.UNKNOWN_ID,this.collectionId,t,kf.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Mv(e){var t,n;if(Qd(e instanceof Im||e instanceof Sm),e instanceof Im){if(e instanceof Fm){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Im.create(e.field,"==",t))))||[];return Sm.create(r,"or")}return e}const r=e.filters.map((e=>Mv(e)));return Sm.create(r,e.op)}function Fv(e){if(0===e.getFilters().length)return[];const t=zv(Mv(e));return Qd(Vv(t)),jv(t)||Uv(t)?[t]:t.getFilters()}function jv(e){return e instanceof Im}function Uv(e){return e instanceof Sm&&Tm(e)}function Vv(e){return jv(e)||Uv(e)||function(e){if(e instanceof Sm&&Em(e)){for(const t of e.getFilters())if(!jv(t)&&!Uv(t))return!1;return!0}return!1}(e)}function zv(e){if(Qd(e instanceof Im||e instanceof Sm),e instanceof Im)return e;if(1===e.filters.length)return zv(e.filters[0]);const t=e.filters.map((e=>zv(e)));let n=Sm.create(t,e.op);return n=Kv(n),Vv(n)?n:(Qd(n instanceof Sm),Qd(km(n)),Qd(n.filters.length>1),n.filters.reduce(((e,t)=>Bv(e,t))))}function Bv(e,t){let n;return Qd(e instanceof Im||e instanceof Sm),Qd(t instanceof Im||t instanceof Sm),n=e instanceof Im?t instanceof Im?function(e,t){return Sm.create([e,t],"and")}(e,t):qv(e,t):t instanceof Im?qv(t,e):function(e,t){if(Qd(e.filters.length>0&&t.filters.length>0),km(e)&&km(t))return Nm(e,t.getFilters());const n=Em(e)?e:t,r=Em(e)?t:e,i=n.filters.map((e=>Bv(e,r)));return Sm.create(i,"or")}(e,t),Kv(n)}function qv(e,t){if(km(t))return Nm(t,e.getFilters());{const n=t.filters.map((t=>Bv(e,t)));return Sm.create(n,"or")}}function Kv(e){if(Qd(e instanceof Im||e instanceof Sm),e instanceof Im)return e;const t=e.getFilters();if(1===t.length)return Kv(t[0]);if(xm(e))return e;const n=t.map((e=>Kv(e))),r=[];return n.forEach((t=>{t instanceof Im?r.push(t):t instanceof Sm&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Sm.create(r,e.op)}class Hv{constructor(){this.on=new Gv}addToCollectionParentIndex(e,t){return this.on.add(t),Pf.resolve()}getCollectionParents(e,t){return Pf.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return Pf.resolve()}deleteFieldIndex(e,t){return Pf.resolve()}deleteAllFieldIndexes(e){return Pf.resolve()}createTargetIndexes(e,t){return Pf.resolve()}getDocumentsMatchingTarget(e,t){return Pf.resolve(null)}getIndexType(e,t){return Pf.resolve(0)}getFieldIndexes(e,t){return Pf.resolve([])}getNextCollectionGroupToUpdate(e){return Pf.resolve(null)}getMinOffset(e,t){return Pf.resolve(xf.min())}getMinOffsetFromCollectionGroup(e,t){return Pf.resolve(xf.min())}updateCollectionGroup(e,t,n){return Pf.resolve()}updateIndexEntries(e,t){return Pf.resolve()}}class Gv{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Rp(gf.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Rp(gf.comparator)).toArray()}}const Wv=new Uint8Array(0);class Qv{constructor(e,t){this.databaseId=t,this._n=new Gv,this.an=new hg((e=>Bm(e)),((e,t)=>qm(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:$f(r)};return $v(e).put(i)}return Pf.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[df(t),""],!1,!0);return $v(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Xf(r.parent))}return n}))}addFieldIndex(e,t){const n=Yv(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Xv(e);return i.next((e=>{n.put(wv(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Yv(e),r=Xv(e),i=Jv(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Yv(e),n=Jv(e),r=Xv(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return Pf.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Lv(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Jv(e);let r=!0;const i=new Map;return Pf.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Ig();const r=[];return Pf.forEach(i,((i,s)=>{qd("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Bm(t)));const o=function(e,t){const n=_f(t);if(void 0===n)return null;for(const r of Hm(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of If(t))for(const t of Hm(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of If(t)){const t=0===i.kind?Gm(e,i.fieldPath,e.startAt):Wm(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new gm(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of If(t)){const t=0===i.kind?Wm(e,i.fieldPath,e.endAt):Gm(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new gm(n,r)}(s,i),u=this.ln(i,s,l),h=this.ln(i,s,c),d=this.hn(i,s,a),f=this.Pn(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return Pf.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=wf.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Pf.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:Fv(Sm.create(e.filters,"and")).map((t=>zm(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.In(t[u/l]):Wv,h=this.Tn(e,a,n[u%l],r),d=this.En(e,a,i[u%l],s),f=o.map((t=>this.Tn(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}Tn(e,t,n,r){const i=new Pv(e,wf.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new Pv(e,wf.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new Lv(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return Pf.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Rp(vf.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new Rv;for(const r of If(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);Ev.St.ht(e,i)}return n.Ut()}In(e){const t=new Rv;return Ev.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new Rv;return Ev.St.ht(tm(this.databaseId,t),n.jt(function(e){const t=If(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new Rv);let i=0;for(const s of If(e)){const e=n[i++];for(const n of r)if(this.Rn(t,s.fieldPath)&&rm(e))r=this.Vn(r,s,e);else{const t=n.jt(s.kind);Ev.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Rv;n.seed(e.Ut()),Ev.St.ht(s,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof Im&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Yv(e),r=Xv(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return Pf.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new kf(t.sequenceNumber,new xf(dv(t.readTime),new wf(Xf(t.documentKey)),t.largestBatchId)):kf.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Sf(vf.fromServerFormat(t),n)}));return new bf(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:uf(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Yv(e),i=Xv(e);return this.fn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Pf.forEach(t,(t=>i.put(wv(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Pf.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Pf.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Pf.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?Pf.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return Jv(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return Jv(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=Jv(e);let i=new Rp(Dv);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new Pv(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new Rp(Dv);const r=this.dn(t,e);if(null==r)return n;const i=_f(t);if(null!=i){const s=e.data.field(i.fieldPath);if(rm(s))for(const i of s.arrayValue.values||[])n=n.add(new Pv(t.indexId,e.key,this.In(i),r))}else n=n.add(new Pv(t.indexId,e.key,Wv,r));return n}yn(e,t,n,r,i){qd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Dp(s),l=Dp(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Dp(o)):t?(i(a),a=Dp(s)):(a=Dp(s),l=Dp(o))}}(r,i,Dv,(r=>{s.push(this.wn(e,t,n,r))}),(r=>{s.push(this.Sn(e,t,n,r))})),Pf.waitFor(s)}fn(e){let t=1;return Xv(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Dv(e,t))).filter(((e,t,n)=>!t||0!==Dv(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Dv(s,e),i=Dv(s,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(s),r.push(s.Ht());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Wv,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Wv,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return Dv(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Zv)}getMinOffset(e,t){return Pf.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||Wd())))).next(Zv)}}function $v(e){return kp(e,"collectionParents")}function Jv(e){return kp(e,"indexEntries")}function Yv(e){return kp(e,"indexConfiguration")}function Xv(e){return kp(e,"indexState")}function Zv(e){Qd(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Af(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new xf(t.readTime,t.documentKey,n)}const ew={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class tw{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new tw(e,tw.DEFAULT_COLLECTION_PERCENTILE,tw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nw(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Qd(1===a)})));const c=[];for(const u of n.mutations){const e=tp(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return Pf.waitFor(s).next((()=>c))}function rw(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Wd();t=e.noDocument}return JSON.stringify(t).length}tw.DEFAULT_COLLECTION_PERCENTILE=10,tw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tw.DEFAULT=new tw(41943040,tw.DEFAULT_COLLECTION_PERCENTILE,tw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tw.DISABLED=new tw(-1,0,0);class iw{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){Qd(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new iw(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ow(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=aw(e),s=ow(e);return s.add({}).next((o=>{Qd("number"==typeof o);const a=new ry(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Wy(e.ut,t))),i=n.mutations.map((t=>Wy(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new Rp(((e,t)=>uf(e.canonicalString(),t.canonicalString())));for(const e of r){const t=tp(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,np))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[o]=a.keys()})),Pf.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return ow(e).get(t).next((e=>e?(Qd(e.userId===this.userId),fv(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?Pf.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return ow(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Qd(t.batchId>=n),i=fv(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return ow(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ow(e).U("userMutationsIndex",t).next((e=>e.map((e=>fv(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ep(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return aw(e).J({range:r},((n,r,s)=>{const[o,a,l]=n,c=Xf(a);if(o===this.userId&&t.path.isEqual(c))return ow(e).get(l).next((e=>{if(!e)throw Wd();Qd(e.userId===this.userId),i.push(fv(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Rp(uf);const r=[];return t.forEach((t=>{const i=ep(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=aw(e).J({range:s},((e,r,i)=>{const[s,o,a]=e,l=Xf(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Pf.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=ep(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Rp(uf);return aw(e).J({range:s},((e,t,i)=>{const[s,a,l]=e,c=Xf(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(ow(e).get(t).next((e=>{if(null===e)throw Wd();Qd(e.userId===this.userId),n.push(fv(this.serializer,e))})))})),Pf.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return nw(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),Pf.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Pf.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return aw(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Xf(e[1]);r.push(t)}else n.done()})).next((()=>{Qd(0===r.length)}))}))}containsKey(e,t){return sw(e,this.userId,t)}Mn(e){return lw(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function sw(e,t,n){const r=ep(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return aw(e).J({range:s,H:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function ow(e){return kp(e,"mutations")}function aw(e){return kp(e,"documentMutations")}function lw(e){return kp(e,"mutationQueues")}class cw{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new cw(0)}static Nn(){return new cw(-1)}}class uw{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new cw(t.highestTargetId);return t.highestTargetId=n.next(),this.Bn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>pf.fromTimestamp(new ff(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Bn(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Bn(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>hw(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(Qd(t.targetCount>0),t.targetCount-=1,this.Bn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return hw(e).J(((s,o)=>{const a=pv(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Pf.waitFor(i))).next((()=>r))}forEachTarget(e,t){return hw(e).J(((e,n)=>{const r=pv(n);t(r)}))}Ln(e){return dw(e).get("targetGlobalKey").next((e=>(Qd(null!==e),e)))}Bn(e,t){return dw(e).put("targetGlobalKey",t)}kn(e,t){return hw(e).put(mv(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Bm(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return hw(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=pv(n);qm(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=fw(e);return t.forEach((t=>{const s=$f(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Pf.waitFor(r)}removeMatchingKeys(e,t,n){const r=fw(e);return Pf.forEach(t,(t=>{const i=$f(t.path);return Pf.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=fw(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=fw(e);let i=Ig();return r.J({range:n,H:!0},((e,t,n)=>{const r=Xf(e[1]),s=new wf(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=$f(t.path),r=IDBKeyRange.bound([n],[df(n)],!1,!0);let i=0;return fw(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return hw(e).get(t).next((e=>e?pv(e):null))}}function hw(e){return kp(e,"targets")}function dw(e){return kp(e,"targetGlobal")}function fw(e){return kp(e,"targetDocuments")}function pw(e,t){let[n,r]=e,[i,s]=t;const o=uf(n,i);return 0===o?uf(r,s):o}class mw{constructor(e){this.Qn=e,this.buffer=new Rp(pw),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();pw(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gw{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){qd("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){jf(e)?qd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Rf(e)}await this.Gn(3e5)}))}}class yw{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Pf.resolve(Hf.oe);const n=new mw(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(qd("LruGarbageCollector","Garbage collection skipped; disabled"),Pf.resolve(ew)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(qd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ew):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(qd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Bd()<=wt.DEBUG&&qd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Pf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function vw(e,t){return new yw(e,t)}class ww{constructor(e,t){this.db=e,this.garbageCollector=vw(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return bw(e,n)}removeReference(e,t,n){return bw(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return bw(e,t)}Xn(e,t){return function(e,t){let n=!1;return lw(e).Y((r=>sw(e,r,t).next((e=>(e&&(n=!0),Pf.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,pf.min()),fw(e).delete(function(e){return[0,$f(e.path)]}(s)))))}));r.push(t)}})).next((()=>Pf.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return bw(e,t)}Zn(e,t){const n=fw(e);let r,i=Hf.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Hf.oe&&t(new wf(Xf(r)),i),i=l,r=a):i=Hf.oe})).next((()=>{i!==Hf.oe&&t(new wf(Xf(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bw(e,t){return fw(e).put(function(e,t){return{targetId:0,path:$f(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class _w{constructor(){this.changes=new hg((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mm.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Pf.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Iw{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Tw(e).put(n)}removeEntry(e,t,n){return Tw(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],uv(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=mm.newInvalidDocument(t);return Tw(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xw(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:mm.newInvalidDocument(t)};return Tw(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xw(t))},((e,r)=>{n={document:this.tr(t,r),size:rw(r)}})).next((()=>n))}getEntries(e,t){let n=fg();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=fg(),r=new Ap(wf.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,rw(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return Pf.resolve();let r=new Rp(Cw);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(xw(r.first()),xw(r.last())),s=r.getIterator();let o=s.getNext();return Tw(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=wf.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Cw(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.$(xw(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),uv(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tw(e).U(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=fg();for(const i of e){const e=this.tr(wf.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(ag(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=fg();const s=Aw(t,n),o=Aw(t,xf.max());return Tw(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.tr(wf.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new kw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Ew(e).get("remoteDocumentGlobalKey").next((e=>(Qd(!!e),e)))}er(e,t){return Ew(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Gy(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=wf.fromSegments(t.noDocument.path),r=dv(t.noDocument.readTime);n=mm.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Wd();{const e=wf.fromSegments(t.unknownDocument.path),r=dv(t.unknownDocument.version);n=mm.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ff(e[0],e[1]);return pf.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(pf.min()))return e}return mm.newInvalidDocument(e)}}function Sw(e){return new Iw(e)}class kw extends _w{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new hg((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Rp(((e,t)=>uf(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=cv(this._r.serializer,s);r=r.add(i.path.popLast());const l=rw(a);n+=l-o.size,t.push(this._r.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=cv(this._r.serializer,s.convertToNoDocument(pf.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),Pf.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Ew(e){return kp(e,"remoteDocumentGlobal")}function Tw(e){return kp(e,"remoteDocumentsV14")}function xw(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Aw(e,t){const n=t.documentKey.path.toArray();return[e,uv(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Cw(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=uf(n[s],r[s]),i)return i;return i=uf(n.length,r.length),i||(i=uf(n[n.length-2],r[r.length-2]),i||uf(n[n.length-1],r[r.length-1]))}class Nw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Rw{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Wg(n.mutation,e,Op.empty(),ff.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ig()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ig();const r=yg();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=mg();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=yg();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ig())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=fg();const s=wg(),o=wg();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Yg)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Wg(o.mutation,t,o.mutation.getFieldMask(),ff.now())):s.set(t.key,Op.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Nw(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=wg();let r=new Ap(((e,t)=>e-t)),i=Ig();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Op.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Ig()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=vg();l.forEach((e=>{if(!i.has(e)){const r=Hg(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Pf.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return wf.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Pf.resolve(yg());let o=-1,a=i;return s.next((t=>Pf.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Pf.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Ig()))).next((e=>({batchId:o,changes:gg(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new wf(t)).next((e=>{let t=mg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=mg();return this.indexManager.getCollectionParents(e,i).next((o=>Pf.forEach(o,(o=>{const a=function(e,t){return new Qm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,mm.newInvalidDocument(r)))}));let n=mg();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Wg(s.mutation,r,Op.empty(),ff.now()),ag(t,r)&&(n=n.insert(e,r))})),n}))}}class Pw{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return Pf.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ly(e.createTime)}}(t)),Pf.resolve()}getNamedQuery(e,t){return Pf.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:gv(e.bundledQuery),readTime:Ly(e.readTime)}}(t)),Pf.resolve()}}class Dw{constructor(){this.overlays=new Ap(wf.comparator),this.lr=new Map}getOverlay(e,t){return Pf.resolve(this.overlays.get(t))}getOverlays(e,t){const n=yg();return Pf.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),Pf.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),Pf.resolve()}getOverlaysForCollection(e,t,n){const r=yg(),i=t.length+1,s=new wf(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Pf.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ap(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=yg(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=yg(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Pf.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new sy(t,n));let i=this.lr.get(t);void 0===i&&(i=Ig(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class Ow{constructor(){this.hr=new Rp(Lw.Pr),this.Ir=new Rp(Lw.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new Lw(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new Lw(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new wf(new gf([])),n=new Lw(t,e),r=new Lw(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new wf(new gf([])),n=new Lw(t,e),r=new Lw(t,e+1);let i=Ig();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Lw(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Lw{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return wf.comparator(e.key,t.key)||uf(e.gr,t.gr)}static Tr(e,t){return uf(e.gr,t.gr)||wf.comparator(e.key,t.key)}}class Mw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Rp(Lw.Pr)}checkEmpty(e){return Pf.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ry(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new Lw(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Pf.resolve(s)}lookupMutationBatch(e,t){return Pf.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return Pf.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Pf.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Pf.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Lw(t,0),r=new Lw(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),Pf.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Rp(uf);return t.forEach((e=>{const t=new Lw(e,0),r=new Lw(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),Pf.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;wf.isDocumentKey(i)||(i=i.child(""));const s=new Lw(new wf(i),0);let o=new Rp(uf);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),Pf.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Qd(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return Pf.forEach(t.mutations,(r=>{const i=new Lw(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new Lw(t,0),r=this.yr.firstAfterOrEqual(n);return Pf.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Pf.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Fw{constructor(e){this.Cr=e,this.docs=new Ap(wf.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Pf.resolve(n?n.document.mutableCopy():mm.newInvalidDocument(t))}getEntries(e,t){let n=fg();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():mm.newInvalidDocument(e))})),Pf.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=fg();const s=t.path,o=new wf(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Af(Tf(o),n)<=0||(r.has(o.key)||ag(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Pf.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Wd()}vr(e,t){return Pf.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new jw(this)}getSize(e){return Pf.resolve(this.size)}}class jw extends _w{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),Pf.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class Uw{constructor(e){this.persistence=e,this.Fr=new hg((e=>Bm(e)),qm),this.lastRemoteSnapshotVersion=pf.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Ow,this.targetCount=0,this.Nr=cw.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),Pf.resolve()}getLastRemoteSnapshotVersion(e){return Pf.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Pf.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Pf.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),Pf.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new cw(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,Pf.resolve()}updateTargetData(e,t){return this.kn(t),Pf.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,Pf.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Pf.waitFor(i).next((()=>r))}getTargetCount(e){return Pf.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return Pf.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),Pf.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Pf.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),Pf.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return Pf.resolve(n)}containsKey(e,t){return Pf.resolve(this.Or.containsKey(t))}}class Vw{constructor(e,t){this.Lr={},this.overlays={},this.Br=new Hf(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Uw(this),this.indexManager=new Hv,this.remoteDocumentCache=function(e){return new Fw(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new lv(t),this.Kr=new Pw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Dw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new Mw(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){qd("MemoryPersistence","Starting transaction:",e);const r=new zw(this.Br.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return Pf.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class zw extends Nf{constructor(e){super(),this.currentSequenceNumber=e}}class Bw{constructor(e){this.persistence=e,this.Gr=new Ow,this.zr=null}static jr(e){return new Bw(e)}get Hr(){if(this.zr)return this.zr;throw Wd()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),Pf.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),Pf.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),Pf.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pf.forEach(this.Hr,(n=>{const r=wf.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,pf.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return Pf.or([()=>Pf.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class qw{constructor(e){this.serializer=e}O(e,t,n,r){const i=new Df("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zf,{unique:!0}),e.createObjectStore("documentMutations")}(e),Kw(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Pf.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Kw(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pf.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zf,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Pf.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Zr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(s=s.next((()=>this.ei(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ni(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:pp});t.createIndex("collectionPathOverlayIndex",mp,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",gp,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:rp});t.createIndex("documentKeyIndex",ip),t.createIndex("collectionGroupIndex",sp)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ii(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:up}).createIndex("sequenceNumberIndex",hp,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:dp}).createIndex("documentKeyIndex",fp,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}Xr(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=rw(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>Pf.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>Pf.forEach(n,(n=>{Qd(n.userId===t.userId);const r=fv(this.serializer,n);return nw(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new gf(n),o=function(e){return[0,$f(e)]}(s);r.push(t.get(o).next((n=>n?Pf.resolve():(n=>t.put({targetId:0,path:$f(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Pf.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:cp});const n=t.store("collectionParents"),r=new Gv,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:$f(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new gf(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,s]=e;const o=Xf(r);return i(o.popLast())}))))}ni(e){const t=e.store("targets");return t.J(((e,n)=>{const r=pv(n),i=mv(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new wf(gf.fromString(e.document.name).popFirst(5)):e.noDocument?wf.fromSegments(e.noDocument.path):e.unknownDocument?wf.fromSegments(e.unknownDocument.path):Wd()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Pf.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=Sw(this.serializer),i=new Vw(Bw.jr,this.serializer.ut);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Ig();fv(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Pf.forEach(n,((e,n)=>{const s=new Ud(n),o=Sv.ct(this.serializer,s),a=i.getIndexManager(s),l=iw.ct(s,this.serializer,a,i.referenceDelegate);return new Rw(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Sp(t,Hf.oe),e).next()}))}))}}function Kw(e){e.createObjectStore("targetDocuments",{keyPath:ap}).createIndex("documentTargetsIndex",lp,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",op,{unique:!0}),e.createObjectStore("targetGlobal")}const Hw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gw{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=s,this.document=o,this.oi=l,this._i=c,this.ai=u,this.Br=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!Gw.D())throw new Yd(Jd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ww(this,r),this.Ii=t+"main",this.serializer=new lv(a),this.Ti=new Of(this.Ii,this.ai,new qw(this.serializer)),this.qr=new uw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Sw(this.serializer),this.Kr=new bv,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===c&&Kd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Yd(Jd.FAILED_PRECONDITION,Hw);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Br=new Hf(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Qw(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(jf(e))return qd("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return Ww(e).get("owner").next((e=>Pf.resolve(this.wi(e))))}Si(e){return Qw(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=kp(e,"clientMetadata");return t.U().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Pf.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?Pf.resolve(!0):Ww(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new Yd(Jd.FAILED_PRECONDITION,Hw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qw(e).U().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&qd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Sp(e,Hf.oe);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>Qw(e).U().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return iw.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Qv(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Sv.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){qd("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?Ip:15===e?_p:14===e?bp:13===e?wp:12===e?vp:11===e?yp:void Wd()}(this.ai);let s;return this.Ti.runTransaction(e,r,i,(r=>(s=new Sp(r,this.Br?this.Br.next():Hf.oe),"readwrite-primary"===t?this.fi(s).next((e=>!!e||this.gi(s))).next((t=>{if(!t)throw Kd("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new Yd(Jd.FAILED_PRECONDITION,Cf);return n(s)})).next((e=>this.yi(s).next((()=>e)))):this.Bi(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Bi(e){return Ww(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Yd(Jd.FAILED_PRECONDITION,Hw)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ww(e).put("owner",t)}static D(){return Of.D()}pi(e){const t=Ww(e);return t.get("owner").next((e=>this.wi(e)?(qd("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Pf.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Kd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;Ge()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return qd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Kd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(WA){Kd("Failed to set zombie client id.",WA)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(WA){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Ww(e){return kp(e,"owner")}function Qw(e){return kp(e,"clientMetadata")}function $w(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Jw{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=Ig(),r=Ig();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Jw(e,t.fromCache,n,r)}}class Yw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Xw{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=Ge()?8:Lf(Ve())>0?6:4}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Yw;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Bd()<=wt.DEBUG&&qd("QueryEngine","SDK will not create cache indexes for query:",og(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Pf.resolve()):(Bd()<=wt.DEBUG&&qd("QueryEngine","Query:",og(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Bd()<=wt.DEBUG&&qd("QueryEngine","The SDK decides to create cache indexes for query:",og(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,eg(t))):Pf.resolve())}zi(e,t){if(Ym(t))return Pf.resolve(null);let n=eg(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=rg(t,null,"F"),n=eg(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Ig(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,rg(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return Ym(t)||r.isEqual(pf.min())?Pf.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?Pf.resolve(null):(Bd()<=wt.DEBUG&&qd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),og(t)),this.Xi(e,s,t,Ef(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new Rp(cg(e));return t.forEach(((t,r)=>{ag(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Bd()<=wt.DEBUG&&qd("QueryEngine","Using full collection scan to execute query:",og(t)),this.Gi.getDocumentsMatchingQuery(e,t,xf.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Zw{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Ap(uf),this.ns=new hg((e=>Bm(e)),qm),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rw(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function eb(e,t,n,r){return new Zw(e,t,n,r)}async function tb(e,t){const n=$d(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Ig();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function nb(e){const t=$d(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function rb(e,t,n){let r=Ig(),i=Ig();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=fg();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(pf.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):qd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function ib(e,t){const n=$d(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function sb(e,t){const n=$d(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,Pf.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new av(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function ob(e,t,n){const r=$d(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!jf(e))throw e;qd("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function ab(e,t,n){const r=$d(e);let i=pf.min(),s=Ig();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=$d(e),i=r.ns.get(n);return void 0!==i?Pf.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,eg(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:pf.min(),n?s:Ig()))).next((e=>(ub(r,lg(t),e),{documents:e,ls:s})))))}function lb(e,t){const n=$d(e),r=$d(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function cb(e,t){const n=$d(e),r=n.rs.get(t)||pf.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,Ef(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(ub(n,t,e),e)))}function ub(e,t,n){let r=e.rs.get(t)||pf.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function hb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ig();const r=await sb(e,eg(gv(t.bundledQuery))),i=$d(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Ly(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(e,t);const o=r.withResumeToken(Mp.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(o.targetId,o),i.qr.updateTargetData(e,o).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function db(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function fb(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function pb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class mb{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Yd(r.error.code,r.error.message))),s?new mb(e,t,r.state,i):(Kd("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gb{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Yd(n.error.code,n.error.message))),i?new gb(e,n.state,r):(Kd("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=kg();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Qf(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new yb(e,i):(Kd("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class vb{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vb(t.clientId,t.onlineState):(Kd("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class wb{constructor(){this.activeTargetIds=kg()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bb{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Ap(uf),this.started=!1,this.ps=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=db(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new wb),this.Ss=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(db(this.persistenceKey,n));if(e){const t=yb.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(pb(this.persistenceKey,e));if(n){const r=gb.Ts(e,n);r&&(t=r.state)}}return this.Bs.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Bs.As(e),this.Fs()}isLocalQueryTarget(e){return this.Bs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pb(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return qd("SharedClientState","READ",e,t),t}setItem(e,t){qd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){qd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(qd("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void Kd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=Hf.oe;if(null!=e)try{const n=JSON.parse(e);Qd("number"==typeof n),t=n}catch(e){Kd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Hf.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Bs(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Bs.Es())}Ns(e,t,n){const r=new mb(this.currentUser,e,t,n),i=fb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Ls(e){const t=fb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=pb(this.persistenceKey,e),i=new gb(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return yb.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return mb.Ts(new Ud(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return gb.Ts(r,t)}Ms(e){return vb.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);qd("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Xs(s,o).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=kg();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class _b{constructor(){this.eo=new wb,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new wb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ib{ro(e){}shutdown(){}}class Sb{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){qd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){qd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let kb=null;function Eb(){return null===kb?kb=268435456+Math.round(2147483648*Math.random()):kb++,"0x"+kb.toString(16)}const Tb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xb{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}}const Ab="WebChannelConnection";class Cb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.yo=t+"://"+e.host,this.wo="projects/".concat(n,"/databases/").concat(r),this.So="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get bo(){return!1}Do(e,t,n,r,i){const s=Eb(),o=this.Co(e,t.toUriEncodedString());qd("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(a,r,i),this.Fo(e,o,a,n).then((t=>(qd("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Hd("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Mo(e,t,n,r,i,s){return this.Do(e,t,n,r,i)}vo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Co(e,t){const n=Tb[e];return"".concat(this.yo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,t,n,r){const i=Eb();return new Promise(((s,o)=>{const a=new Ld;a.setWithCredentials(!0),a.listenOnce(Nd.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Cd.NO_ERROR:const t=a.getResponseJson();qd(Ab,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Cd.TIMEOUT:qd(Ab,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Yd(Jd.DEADLINE_EXCEEDED,"Request time out"));break;case Cd.HTTP_ERROR:const n=a.getStatus();if(qd(Ab,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Jd).indexOf(t)>=0?t:Jd.UNKNOWN}(t.status);o(new Yd(e,t.message))}else o(new Yd(Jd.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Yd(Jd.UNAVAILABLE,"Connection failed."));break;default:Wd()}}finally{qd(Ab,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);qd(Ab,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}xo(e,t,n){const r=Eb(),i=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=xd(),o=Ad(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Dd({})),this.vo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");qd(Ab,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new xb({co:t=>{d?qd(Ab,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(qd(Ab,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),qd(Ab,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Od.EventType.OPEN,(()=>{d||(qd(Ab,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.Vo())})),p(u,Od.EventType.CLOSE,(()=>{d||(d=!0,qd(Ab,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.fo())})),p(u,Od.EventType.ERROR,(t=>{d||(d=!0,Hd(Ab,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.fo(new Yd(Jd.UNAVAILABLE,"The operation could not be completed")))})),p(u,Od.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Qd(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){qd(Ab,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=ay[e];if(void 0!==t)return uy(t)}(t),i=o.message;void 0===n&&(n=Jd.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.fo(new Yd(n,i)),u.close()}else qd(Ab,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.po(i)}})),p(o,Rd.STAT_EVENT,(t=>{t.stat===Pd.PROXY?qd(Ab,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Pd.NOPROXY&&qd(Ab,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.mo()}),0),f}}function Nb(){return"undefined"!=typeof window?window:null}function Rb(){return"undefined"!=typeof document?document:null}function Pb(e){return new Ny(e,!0)}class Db{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Oo=n,this.No=r,this.Lo=i,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();const t=Math.floor(this.Bo+this.$o()),n=Math.max(0,Date.now()-this.qo),r=Math.max(0,t-n);r>0&&qd("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.ko=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.qo=Date.now(),e()))),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){null!==this.ko&&(this.ko.skipDelay(),this.ko=null)}cancel(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}}class Ob{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Wo=n,this.Go=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new Db(e,t)}Yo(){return 1===this.state||5===this.state||this.Zo()}Zo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Xo()}async stop(){this.Yo()&&await this.close(0)}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&null===this.jo&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,(()=>this.n_())))}r_(e){this.i_(),this.stream.send(e)}async n_(){if(this.Zo())return this.close(0)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}async close(e,t){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,4!==e?this.Jo.reset():t&&t.code===Jd.RESOURCE_EXHAUSTED?(Kd(t.toString()),Kd("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):t&&t.code===Jd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(t)}o_(){}auth(){this.state=1;const e=this.__(this.zo),t=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.zo===t&&this.a_(n,r)}),(t=>{e((()=>{const e=new Yd(Jd.UNKNOWN,"Fetching auth token failed: "+t.message);return this.u_(e)}))}))}a_(e,t){const n=this.__(this.zo);this.stream=this.c_(e,t),this.stream.ho((()=>{n((()=>this.listener.ho()))})),this.stream.Io((()=>{n((()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,(()=>(this.Zo()&&(this.state=3),Promise.resolve()))),this.listener.Io())))})),this.stream.Eo((e=>{n((()=>this.u_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Xo(){this.state=5,this.Jo.Ko((async()=>{this.state=0,this.start()}))}u_(e){return qd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}__(e){return t=>{this.si.enqueueAndForget((()=>this.zo===e?t():(qd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Lb extends Ob{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}c_(e,t){return this.connection.xo("Listen",e,t)}onMessage(e){this.Jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Wd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Qd(void 0===t||"string"==typeof t),Mp.fromBase64String(t||"")):(Qd(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Mp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Jd.UNKNOWN:uy(e.code);return new Yd(t,e.message||"")}(o);n=new Iy(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vy(e,r.document.name),s=Ly(r.document.updateTime),o=r.document.createTime?Ly(r.document.createTime):pf.min(),a=new fm({mapValue:{fields:r.document.fields}}),l=mm.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new by(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Vy(e,r.document),s=r.readTime?Ly(r.readTime):pf.min(),o=mm.newNoDocument(i,s),a=r.removedTargetIds||[];n=new by([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Vy(e,r.document),s=r.removedTargetIds||[];n=new by([],s,i,null)}else{if(!("filter"in t))return Wd();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new oy(r,i),o=e.targetId;n=new _y(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return pf.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?pf.min():t.readTime?Ly(t.readTime):pf.min()}(e);return this.listener.l_(t,n)}h_(e){const t={};t.database=qy(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Km(r)?{documents:$y(e,r)}:{query:Jy(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Dy(e,t.resumeToken);const r=Ry(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(pf.min())>0){n.readTime=Py(e,t.snapshotVersion.toTimestamp());const r=Ry(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wd()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.r_(t)}P_(e){const t={};t.database=qy(this.serializer),t.removeTarget=e,this.r_(t)}}class Mb extends Ob{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,t){return this.connection.xo("Write",e,t)}onMessage(e){if(Qd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();const t=function(e,t){return e&&e.length>0?(Qd(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Ly(e.updateTime):Ly(t);return n.isEqual(pf.min())&&(n=Ly(t)),new zg(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ly(e.commitTime);return this.listener.d_(n,t)}return Qd(!e.writeResults||0===e.writeResults.length),this.I_=!0,this.listener.A_()}R_(){const e={};e.database=qy(this.serializer),this.r_(e)}E_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Wy(this.serializer,e)))};this.r_(t)}}class Fb extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.V_=!1}m_(){if(this.V_)throw new Yd(Jd.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,t,n,r){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Do(e,Fy(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Jd.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Yd(Jd.UNKNOWN,e.toString())}))}Mo(e,t,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Mo(e,Fy(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Jd.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Yd(Jd.UNKNOWN,e.toString())}))}terminate(){this.V_=!0,this.connection.terminate()}}class jb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(Kd(t),this.y_=!1):qd("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Ub{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.ro((e=>{n.enqueueAndForget((async()=>{Qb(this)&&(qd("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=$d(e);t.M_.add(4),await zb(t),t.N_.set("Unknown"),t.M_.delete(4),await Vb(t)}(this))}))})),this.N_=new jb(n,r)}}async function Vb(e){if(Qb(e))for(const t of e.x_)await t(!0)}async function zb(e){for(const t of e.x_)await t(!1)}function Bb(e,t){const n=$d(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Wb(n)?Gb(n):f_(n).Zo()&&Kb(n,t))}function qb(e,t){const n=$d(e),r=f_(n);n.F_.delete(t),r.Zo()&&Hb(n,t),0===n.F_.size&&(r.Zo()?r.t_():Qb(n)&&n.N_.set("Unknown"))}function Kb(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pf.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}f_(e).h_(t)}function Hb(e,t){e.L_.xe(t),f_(e).P_(t)}function Gb(e){e.L_=new ky({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),f_(e).start(),e.N_.w_()}function Wb(e){return Qb(e)&&!f_(e).Yo()&&e.F_.size>0}function Qb(e){return 0===$d(e).M_.size}function $b(e){e.L_=void 0}async function Jb(e){e.N_.set("Online")}async function Yb(e){e.F_.forEach(((t,n)=>{Kb(e,t)}))}async function Xb(e,t){$b(e),Wb(e)?(e.N_.D_(t),Gb(e)):e.N_.set("Unknown")}async function Zb(e,t,n){if(e.N_.set("Online"),t instanceof Iy&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){qd("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await e_(e,n)}else if(t instanceof by?e.L_.Ke(t):t instanceof _y?e.L_.He(t):e.L_.We(t),!n.isEqual(pf.min()))try{const t=await nb(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(Mp.EMPTY_BYTE_STRING,r.snapshotVersion)),Hb(e,t);const i=new av(r.target,t,n,r.sequenceNumber);Kb(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){qd("RemoteStore","Failed to raise snapshot:",t),await e_(e,t)}}async function e_(e,t,n){if(!jf(t))throw t;e.M_.add(1),await zb(e),e.N_.set("Offline"),n||(n=()=>nb(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{qd("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Vb(e)}))}function t_(e,t){return t().catch((n=>e_(e,n,t)))}async function n_(e){const t=$d(e),n=p_(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;r_(t);)try{const e=await ib(t.localStore,r);if(null===e){0===t.v_.length&&n.t_();break}r=e.batchId,i_(t,e)}catch(e){await e_(t,e)}s_(t)&&o_(t)}function r_(e){return Qb(e)&&e.v_.length<10}function i_(e,t){e.v_.push(t);const n=p_(e);n.Zo()&&n.T_&&n.E_(t.mutations)}function s_(e){return Qb(e)&&!p_(e).Yo()&&e.v_.length>0}function o_(e){p_(e).start()}async function a_(e){p_(e).R_()}async function l_(e){const t=p_(e);for(const n of e.v_)t.E_(n.mutations)}async function c_(e,t,n){const r=e.v_.shift(),i=iy.from(r,t,n);await t_(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await n_(e)}async function u_(e,t){t&&p_(e).T_&&await async function(e,t){if(function(e){return cy(e)&&e!==Jd.ABORTED}(t.code)){const n=e.v_.shift();p_(e).e_(),await t_(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await n_(e)}}(e,t),s_(e)&&o_(e)}async function h_(e,t){const n=$d(e);n.asyncQueue.verifyOperationInProgress(),qd("RemoteStore","RemoteStore received new credentials");const r=Qb(n);n.M_.add(3),await zb(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Vb(n)}async function d_(e,t){const n=$d(e);t?(n.M_.delete(2),await Vb(n)):t||(n.M_.add(2),await zb(n),n.N_.set("Unknown"))}function f_(e){return e.B_||(e.B_=function(e,t,n){const r=$d(e);return r.m_(),new Lb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Jb.bind(null,e),Io:Yb.bind(null,e),Eo:Xb.bind(null,e),l_:Zb.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.e_(),Wb(e)?Gb(e):e.N_.set("Unknown")):(await e.B_.stop(),$b(e))}))),e.B_}function p_(e){return e.k_||(e.k_=function(e,t,n){const r=$d(e);return r.m_(),new Mb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:()=>Promise.resolve(),Io:a_.bind(null,e),Eo:u_.bind(null,e),A_:l_.bind(null,e),d_:c_.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.e_(),await n_(e)):(await e.k_.stop(),e.v_.length>0&&(qd("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class m_{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Xd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new m_(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Yd(Jd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function g_(e,t){if(Kd("AsyncQueue","".concat(t,": ").concat(e)),jf(e))return new Yd(Jd.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class y_{constructor(e){this.comparator=e?(t,n)=>e(t,n)||wf.comparator(t.key,n.key):(e,t)=>wf.comparator(e.key,t.key),this.keyedMap=mg(),this.sortedSet=new Ap(this.comparator)}static emptySet(e){return new y_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof y_))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new y_;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class v_{constructor(){this.q_=new Ap(wf.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Wd():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class w_{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new w_(e,t,y_.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ig(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class b_{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class __{constructor(){this.queries=new hg((e=>sg(e)),ig),this.onlineState="Unknown",this.z_=new Set}}async function I_(e,t){const n=$d(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new b_,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=g_(e,"Initialization of query '".concat(og(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&T_(n)}async function S_(e,t){const n=$d(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function k_(e,t){const n=$d(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&T_(n)}function E_(e,t,n){const r=$d(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function T_(e){e.z_.forEach((e=>{e.next()}))}var x_,A_;(A_=x_||(x_={})).J_="default",A_.Cache="cache";class C_{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new w_(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=w_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==x_.Cache}}class N_{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class R_{constructor(e){this.serializer=e}hs(e){return Vy(this.serializer,e)}Ps(e){return e.metadata.exists?Gy(this.serializer,e.document,!1):mm.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Ly(e)}}class P_{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=D_(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=gf.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new R_(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Ig()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=$d(e);let s=Ig(),o=fg();for(const c of n){const e=t.hs(c.metadata.name);c.document&&(s=s.add(e));const n=t.Ps(c);n.setReadTime(t.Is(c.metadata.readTime)),o=o.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await sb(i,function(e){return eg(Jm(gf.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>rb(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new R_(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const n of this.queries)await hb(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function D_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class O_{constructor(e){this.key=e}}class L_{constructor(e){this.key=e}}class M_{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ig(),this.mutatedKeys=Ig(),this.Ia=cg(e),this.Ta=new y_(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new v_,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=ag(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||l&&this.Ia(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Zi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wd()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,l=a!==this.ha;return this.ha=a,0!==s.length||l?{snapshot:new w_(this.query,e.Ta,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new v_,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Ig(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new L_(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new O_(n))})),t}pa(e){this.la=e.ls,this.Pa=Ig();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return w_.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class F_{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class j_{constructor(e){this.key=e,this.wa=!1}}class U_{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new hg((e=>sg(e)),ig),this.Da=new Map,this.Ca=new Set,this.va=new Ap(wf.comparator),this.Fa=new Map,this.Ma=new Ow,this.xa={},this.Oa=new Map,this.Na=cw.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function V_(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=mI(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await B_(r,t,n,!0),i}async function z_(e,t){const n=mI(e);await B_(n,t,!0,!1)}async function B_(e,t,n,r){const i=await sb(e.localStore,eg(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await q_(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Bb(e.remoteStore,i),a}async function q_(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Zi&&(i=await ab(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return tI(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await ab(e.localStore,t,!0),o=new M_(t,s.ls),a=o.da(s.documents),l=wy.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);tI(e,n,c.fa);const u=new F_(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot}async function K_(e,t,n){const r=$d(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!ig(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ob(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&qb(r.remoteStore,i.targetId),Z_(r,i.targetId)})).catch(Rf)):(Z_(r,i.targetId),await ob(r.localStore,i.targetId,!0))}async function H_(e,t){const n=$d(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qb(n.remoteStore,r.targetId))}async function G_(e,t){const n=$d(e);try{const e=await function(e,t){const n=$d(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Mp.EMPTY_BYTE_STRING,pf.min()).withLastLimboFreeSnapshotVersion(pf.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.qr.updateTargetData(e,c))}));let a=fg(),l=Ig();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(rb(e,s,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(pf.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Pf.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Qd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Qd(r.wa):e.removedDocuments.size>0&&(Qd(r.wa),r.wa=!1))})),await iI(n,e,t)}catch(e){await Rf(e)}}function W_(e,t,n){const r=$d(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=$d(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&T_(n)}(r.eventManager,t),e.length&&r.Sa.l_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Q_(e,t,n){const r=$d(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new Ap(wf.comparator);e=e.insert(s,mm.newNoDocument(s,pf.min()));const n=Ig().add(s),i=new vy(pf.min(),new Map,new Ap(uf),e,n);await G_(r,i),r.va=r.va.remove(s),r.Fa.delete(t),rI(r)}else await ob(r.localStore,t,!1).then((()=>Z_(r,t,n))).catch(Rf)}async function $_(e,t){const n=$d(e),r=t.batch.batchId;try{const e=await function(e,t){const n=$d(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Pf.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Qd(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ig();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);X_(n,r,null),Y_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await iI(n,e)}catch(e){await Rf(e)}}async function J_(e,t,n){const r=$d(e);try{const e=await function(e,t){const n=$d(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Qd(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);X_(r,t,n),Y_(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await iI(r,e)}catch(n){await Rf(n)}}function Y_(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function X_(e,t,n){const r=$d(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function Z_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Rr(t).forEach((t=>{e.Ma.containsKey(t)||eI(e,t)}))}function eI(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(qb(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),rI(e))}function tI(e,t,n){for(const r of n)r instanceof O_?(e.Ma.addReference(r.key,t),nI(e,r)):r instanceof L_?(qd("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||eI(e,r.key)):Wd()}function nI(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(qd("SyncEngine","New document in limbo: "+n),e.Ca.add(r),rI(e))}function rI(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new wf(gf.fromString(t)),r=e.Na.next();e.Fa.set(r,new j_(n)),e.va=e.va.insert(n,r),Bb(e.remoteStore,new av(eg(Jm(n.path)),r,"TargetPurposeLimboResolution",Hf.oe))}}async function iI(e,t,n){const r=$d(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Jw.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.l_(i),await async function(e,t){const n=$d(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Pf.forEach(t,(t=>Pf.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Pf.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!jf(e))throw e;qd("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function sI(e,t){const n=$d(e);if(!n.currentUser.isEqual(t)){qd("SyncEngine","User change. New user:",t.toKey());const e=await tb(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new Yd(Jd.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await iI(n,e._s)}}function oI(e,t){const n=$d(e),r=n.Fa.get(t);if(r&&r.wa)return Ig().add(r.key);{let e=Ig();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function aI(e,t){const n=$d(e),r=await ab(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&tI(n,t.targetId,i.fa),i}async function lI(e,t){const n=$d(e);return cb(n.localStore,t).then((e=>iI(n,e)))}async function cI(e,t,n,r){const i=$d(e),s=await function(e,t){const n=$d(e),r=$d(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Pf.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await n_(i.remoteStore):"acknowledged"===n||"rejected"===n?(X_(i,t,r||null),Y_(i,t),function(e,t){$d($d(e).mutationQueue).Fn(t)}(i.localStore,t)):Wd(),await iI(i,s)):qd("SyncEngine","Cannot apply mutation batch with id: "+t)}async function uI(e,t,n){const r=$d(e),i=[],s=[];for(const o of t){let e;const t=r.Da.get(o);if(t&&0!==t.length){e=await sb(r.localStore,eg(t[0]));for(const e of t){const t=r.ba.get(e),n=await aI(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await lb(r.localStore,o);e=await sb(r.localStore,t),await q_(r,hI(t),o,!1,e.resumeToken)}i.push(e)}return r.Sa.l_(s),i}function hI(e){return $m(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function dI(e){return function(e){return $d($d(e).persistence).Li()}($d(e).localStore)}async function fI(e,t,n,r){const i=$d(e);if(i.La)return void qd("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await cb(i.localStore,lg(s[0])),r=vy.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Mp.EMPTY_BYTE_STRING);await iI(i,e,r);break}case"rejected":await ob(i.localStore,t,!0),Z_(i,t,r);break;default:Wd()}}async function pI(e,t,n){const r=mI(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){qd("SyncEngine","Adding an already active target "+e);continue}const t=await lb(r.localStore,e),n=await sb(r.localStore,t);await q_(r,hI(t),n.targetId,!1,n.resumeToken),Bb(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await ob(r.localStore,e,!1).then((()=>{qb(r.remoteStore,e),Z_(r,e)})).catch(Rf)}}function mI(e){const t=$d(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=G_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=oI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Q_.bind(null,t),t.Sa.l_=k_.bind(null,t.eventManager),t.Sa.ka=E_.bind(null,t.eventManager),t}function gI(e){const t=$d(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=J_.bind(null,t),t}class yI{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Pb(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return eb(this.persistence,new Xw,e.initialUser,this.serializer)}createPersistence(e){return new Vw(Bw.jr,this.serializer)}createSharedClientState(e){return new _b}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class vI extends yI{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await gI(this.Qa.syncEngine),await n_(this.Qa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return eb(this.persistence,new Xw,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new gw(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Kf(t,this.persistence);return new qf(e.asyncQueue,n)}createPersistence(e){const t=$w(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?tw.withCacheSize(this.cacheSizeBytes):tw.DEFAULT;return new Gw(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Nb(),Rb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new _b}}class wI extends vI{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof bb&&(this.sharedClientState.syncEngine={Ys:cI.bind(null,t),Zs:fI.bind(null,t),Xs:pI.bind(null,t),Li:dI.bind(null,t),Js:lI.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=$d(e);if(mI(n),gI(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await uI(n,e.toArray());n.La=!0,await d_(n.remoteStore,!0);for(const r of t)Bb(n.remoteStore,r)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Z_(n,i),ob(n.localStore,i,!0)))),qb(n.remoteStore,i)})),await t,await uI(n,e),function(e){const t=$d(e);t.Fa.forEach(((e,n)=>{qb(t.remoteStore,n)})),t.Ma.Vr(),t.Fa=new Map,t.va=new Ap(wf.comparator)}(n),n.La=!1,await d_(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Nb();if(!bb.D(t))throw new Yd(Jd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=$w(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class bI{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>W_(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=sI.bind(null,this.syncEngine),await d_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new __}createDatastore(e){const t=Pb(e.databaseInfo.databaseId),n=function(e){return new Cb(e)}(e.databaseInfo);return function(e,t,n,r){return new Fb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ub(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>W_(this.syncEngine,e,0)),Sb.D()?new Sb:new Ib)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new U_(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=$d(e);qd("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await zb(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function _I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class II{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Kd("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class SI{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Xd,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ia))))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja("length string (".concat(t,") is not valid number"));const r=await this.Ha(n);return new N_(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class kI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Yd(Jd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=$d(e),r={documents:t.map((e=>Uy(n.serializer,e)))},i=await n.Mo("BatchGetDocuments",n.serializer.databaseId,gf.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Qd(!!t.found),t.found.name,t.found.updateTime;const n=Vy(e,t.found.name),r=Ly(t.found.updateTime),i=t.found.createTime?Ly(t.found.createTime):pf.min(),s=new fm({mapValue:{fields:t.found.fields}});return mm.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Qd(!!t.missing),Qd(!!t.readTime);const n=Vy(e,t.missing),r=Ly(t.readTime);return mm.newNoDocument(n,r)}(e,t):Wd()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Qd(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new ty(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=wf.fromPath(t);this.mutations.push(new ny(n,this.precondition(n)))})),await async function(e,t){const n=$d(e),r={writes:t.map((e=>Wy(n.serializer,e)))};await n.Do("Commit",n.serializer.databaseId,gf.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Wd();t=pf.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Yd(Jd.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(pf.min())?Bg.exists(!1):Bg.updateTime(t):Bg.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(pf.min()))throw new Yd(Jd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bg.updateTime(t)}return Bg.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class EI{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Jo=new Db(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Jo.Ko((async()=>{const e=new kI(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!Gf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!cy(t)}return!1}}class TI{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ud.UNAUTHENTICATED,this.clientId=cf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{qd("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(qd("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Yd(Jd.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=g_(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function xI(e,t){e.asyncQueue.verifyOperationInProgress(),qd("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await tb(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function AI(e,t){e.asyncQueue.verifyOperationInProgress();const n=await NI(e);qd("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>h_(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>h_(t.remoteStore,n))),e._onlineComponents=t}function CI(e){return"FirebaseError"===e.name?e.code===Jd.FAILED_PRECONDITION||e.code===Jd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function NI(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){qd("FirestoreClient","Using user provided OfflineComponentProvider");try{await xI(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!CI(n))throw n;Hd("Error using user provided cache. Falling back to memory cache: "+n),await xI(e,new yI)}}else qd("FirestoreClient","Using default OfflineComponentProvider"),await xI(e,new yI);return e._offlineComponents}async function RI(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(qd("FirestoreClient","Using user provided OnlineComponentProvider"),await AI(e,e._uninitializedComponentsProvider._online)):(qd("FirestoreClient","Using default OnlineComponentProvider"),await AI(e,new bI))),e._onlineComponents}function PI(e){return NI(e).then((e=>e.persistence))}function DI(e){return NI(e).then((e=>e.localStore))}function OI(e){return RI(e).then((e=>e.remoteStore))}function LI(e){return RI(e).then((e=>e.syncEngine))}function MI(e){return RI(e).then((e=>e.datastore))}async function FI(e){const t=await RI(e),n=t.eventManager;return n.onListen=V_.bind(null,t.syncEngine),n.onUnlisten=K_.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=z_.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=H_.bind(null,t.syncEngine),n}function jI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Xd;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new II({next:s=>{t.enqueueAndForget((()=>S_(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Yd(Jd.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Yd(Jd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new C_(Jm(n.path),s,{includeMetadataChanges:!0,ra:!0});return I_(e,o)}(await FI(e),e.asyncQueue,t,n,r))),r.promise}function UI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Xd;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new II({next:n=>{t.enqueueAndForget((()=>S_(e,o))),n.fromCache&&"server"===r.source?i.reject(new Yd(Jd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new C_(n,s,{includeMetadataChanges:!0,ra:!0});return I_(e,o)}(await FI(e),e.asyncQueue,t,n,r))),r.promise}function VI(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?dy().encode(e):e,function(e,t){return new SI(e,t)}(function(e,t){if(e instanceof Uint8Array)return _I(e,t);if(e instanceof ArrayBuffer)return _I(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Pb(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=$d(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=$d(e),r=Ly(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(D_(r));const i=new P_(r,e.localStore,t.serializer);let s=await t.qa();for(;s;){const e=await i._a(s);e&&n._updateProgress(e),s=await t.qa()}const o=await i.complete();return await iI(e,o.ca,void 0),await function(e,t){const n=$d(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ua)}catch(e){return Hd("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await LI(e),i,r)}))}function zI(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const BI=new Map;function qI(e,t,n){if(!n)throw new Yd(Jd.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function KI(e,t,n,r){if(!0===t&&!0===r)throw new Yd(Jd.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function HI(e){if(!wf.isDocumentKey(e))throw new Yd(Jd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function GI(e){if(wf.isDocumentKey(e))throw new Yd(Jd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function WI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Wd()}function QI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Yd(Jd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=WI(e);throw new Yd(Jd.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function $I(e,t){if(t<=0)throw new Yd(Jd.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class JI{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Yd(Jd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Yd(Jd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zI(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Yd(Jd.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Yd(Jd.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Yd(Jd.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class YI{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Yd(Jd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Yd(Jd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ef;switch(e.type){case"firstParty":return new sf(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Yd(Jd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=BI.get(e);t&&(qd("ComponentProvider","Removing Datastore"),BI.delete(e),t.terminate())}(this),Promise.resolve()}}function XI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=QI(e,YI))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Hd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ud.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Pe(JSON.stringify({alg:"none",type:"JWT"})),Pe(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Yd(Jd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ud(s)}e._authCredentials=new tf(new Zd(t,n))}}class ZI{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ZI(this.firestore,e,this._query)}}class eS{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tS(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new eS(this.firestore,e,this._key)}}class tS extends ZI{constructor(e,t,n){super(e,t,Jm(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new eS(this.firestore,null,new wf(e))}withConverter(e){return new tS(this.firestore,e,this._path)}}function nS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=dt(e),qI("collection","path",t),e instanceof YI){const n=gf.fromString(t,...r);return GI(n),new tS(e,null,n)}{if(!(e instanceof eS||e instanceof tS))throw new Yd(Jd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(gf.fromString(t,...r));return GI(n),new tS(e.firestore,null,n)}}function rS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=dt(e),1===arguments.length&&(t=cf.newId()),qI("doc","path",t),e instanceof YI){const n=gf.fromString(t,...r);return HI(n),new eS(e,null,new wf(n))}{if(!(e instanceof eS||e instanceof tS))throw new Yd(Jd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(gf.fromString(t,...r));return HI(n),new eS(e.firestore,e instanceof tS?e.converter:null,new wf(n))}}function iS(e,t){return e=dt(e),t=dt(t),(e instanceof eS||e instanceof tS)&&(t instanceof eS||t instanceof tS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function sS(e,t){return e=dt(e),t=dt(t),e instanceof ZI&&t instanceof ZI&&e.firestore===t.firestore&&ig(e._query,t._query)&&e.converter===t.converter}class oS{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new Db(this,"async_queue_retry"),this.hu=()=>{const e=Rb();e&&qd("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Jo.Uo()};const e=Rb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=Rb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new Xd;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Jo.reset()}catch(WA){if(!jf(WA))throw WA;qd("AsyncQueue","Operation failed with retryable error: "+WA)}this.su.length>0&&this.Jo.Ko((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Kd("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=m_.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&Wd()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function aS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class lS{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class cS extends YI{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new oS,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||hS(this),this._firestoreClient.terminate()}}function uS(e){return e._firestoreClient||hS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function hS(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Kp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,zI(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new TI(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function dS(e,t,n){const r=new Xd;return e.asyncQueue.enqueue((async()=>{try{await xI(e,n),await AI(e,t),r.resolve()}catch(e){const n=e;if(!CI(n))throw n;Hd("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function fS(e){return function(e){const t=new Xd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=$d(e);Qb(n.remoteStore)||qd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=$d(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=g_(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await LI(e),t))),t.promise}(uS(e=QI(e,cS)))}function pS(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await PI(e),n=await OI(e);return t.setNetworkEnabled(!0),function(e){const t=$d(e);return t.M_.delete(0),Vb(t)}(n)}))}(uS(e=QI(e,cS)))}function mS(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await PI(e),n=await OI(e);return t.setNetworkEnabled(!1),async function(e){const t=$d(e);t.M_.add(0),await zb(t),t.N_.set("Offline")}(n)}))}(uS(e=QI(e,cS)))}function gS(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=$d(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await DI(e),t)))}(uS(e=QI(e,cS)),t).then((t=>t?new ZI(e,null,t.query):null))}function yS(e){if(e._initialized||e._terminated)throw new Yd(Jd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vS{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vS(Mp.fromBase64String(e))}catch(e){throw new Yd(Jd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new vS(Mp.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wS{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Yd(Jd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vf(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bS{constructor(e){this._methodName=e}}class _S{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Yd(Jd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Yd(Jd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return uf(this._lat,e._lat)||uf(this._long,e._long)}}const IS=/^__.*__$/;class SS{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Yg(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jg(e,this.data,t,this.fieldTransforms)}}class kS{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Yg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ES(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wd()}}class TS{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new TS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return GS(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(ES(this.fu)&&IS.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class xS{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Pb(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new TS({fu:e,methodName:t,vu:n,path:vf.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function AS(e){const t=e._freezeSettings(),n=Pb(e._databaseId);return new xS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function CS(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);BS("Data must be an object, but it was:",o,r);const a=VS(r,o);let l,c;if(s.merge)l=new Op(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=qS(t,r,n);if(!o.contains(i))throw new Yd(Jd.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));WS(e,i)||e.push(i)}l=new Op(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new SS(new fm(a),l,c)}class NS extends bS{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof NS}}function RS(e,t,n){return new TS({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class PS extends bS{_toFieldTransform(e){return new Vg(e.path,new Pg)}isEqual(e){return e instanceof PS}}class DS extends bS{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=RS(this,e,!0),n=this.Mu.map((e=>US(e,t))),r=new Dg(n);return new Vg(e.path,r)}isEqual(e){return e instanceof DS&&Ze(this.Mu,e.Mu)}}class OS extends bS{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=RS(this,e,!0),n=this.Mu.map((e=>US(e,t))),r=new Lg(n);return new Vg(e.path,r)}isEqual(e){return e instanceof OS&&Ze(this.Mu,e.Mu)}}class LS extends bS{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Fg(e.serializer,xg(e.serializer,this.xu));return new Vg(e.path,t)}isEqual(e){return e instanceof LS&&this.xu===e.xu}}function MS(e,t,n,r){const i=e.Fu(1,t,n);BS("Data must be an object, but it was:",i,r);const s=[],o=fm.empty();Tp(r,((e,r)=>{const a=HS(t,e,n);r=dt(r);const l=i.Su(a);if(r instanceof NS)s.push(a);else{const e=US(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Op(s);return new kS(o,a,i.fieldTransforms)}function FS(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[qS(t,r,n)],l=[i];if(s.length%2!=0)throw new Yd(Jd.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(qS(t,s[d])),l.push(s[d+1]);const c=[],u=fm.empty();for(let d=a.length-1;d>=0;--d)if(!WS(c,a[d])){const e=a[d];let t=l[d];t=dt(t);const n=o.Su(e);if(t instanceof NS)c.push(e);else{const r=US(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Op(c);return new kS(u,h,o.fieldTransforms)}function jS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return US(n,e.Fu(r?4:3,t))}function US(e,t){if(zS(e=dt(e)))return BS("Unsupported field value:",t,e),VS(e,t);if(e instanceof bS)return function(e,t){if(!ES(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=US(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=dt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xg(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ff.fromDate(e);return{timestampValue:Py(t.serializer,n)}}if(e instanceof ff){const n=new ff(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Py(t.serializer,n)}}if(e instanceof _S)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vS)return{bytesValue:Dy(t.serializer,e._byteString)};if(e instanceof eS){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:My(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(WI(e)))}(e,t)}function VS(e,t){const n={};return xp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Tp(e,((e,r)=>{const i=US(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function zS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ff||e instanceof _S||e instanceof vS||e instanceof eS||e instanceof bS)}function BS(e,t,n){if(!zS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=WI(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function qS(e,t,n){if((t=dt(t))instanceof wS)return t._internalPath;if("string"==typeof t)return HS(e,t);throw GS("Field path arguments must be of type string or ",e,!1,void 0,n)}const KS=new RegExp("[~\\*/\\[\\]]");function HS(e,t,n){if(t.search(KS)>=0)throw GS("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new wS(...t.split("."))._internalPath}catch(Rl){throw GS("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function GS(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Yd(Jd.INVALID_ARGUMENT,a+e+l)}function WS(e,t){return e.some((e=>e.isEqual(t)))}class QS{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new eS(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $S(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(JS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $S extends QS{data(){return super.data()}}function JS(e,t){return"string"==typeof t?HS(e,t):t instanceof wS?t._internalPath:t._delegate._internalPath}function YS(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Yd(Jd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class XS{}class ZS extends XS{}function ek(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof XS&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof nk)).length,n=e.filter((e=>e instanceof tk)).length;if(t>1||t>0&&n>0)throw new Yd(Jd.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class tk extends ZS{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new tk(e,t,n)}_apply(e){const t=this._parse(e);return uk(e._query,t),new ZI(e.firestore,e.converter,ng(e._query,t))}_parse(e){const t=AS(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Yd(Jd.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){ck(o,s);const t=[];for(const n of o)t.push(lk(r,e,n));a={arrayValue:{values:t}}}else a=lk(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||ck(o,s),a=jS(n,t,o,"in"===s||"not-in"===s);return Im.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class nk extends XS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nk(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Sm.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)uk(n,i),n=ng(n,i)}(e._query,t),new ZI(e.firestore,e.converter,ng(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class rk extends ZS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new rk(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Yd(Jd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Yd(Jd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wm(t,n)}(e._query,this._field,this._direction);return new ZI(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Qm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class ik extends ZS{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new ik(e,t,n)}_apply(e){return new ZI(e.firestore,e.converter,rg(e._query,this._limit,this._limitType))}}class sk extends ZS{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new sk(e,t,n)}_apply(e){const t=ak(e,this.type,this._docOrFields,this._inclusive);return new ZI(e.firestore,e.converter,function(e,t){return new Qm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class ok extends ZS{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ok(e,t,n)}_apply(e){const t=ak(e,this.type,this._docOrFields,this._inclusive);return new ZI(e.firestore,e.converter,function(e,t){return new Qm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function ak(e,t,n,r){if(n[0]=dt(n[0]),n[0]instanceof QS)return function(e,t,n,r,i){if(!r)throw new Yd(Jd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Zm(e))if(o.field.isKeyField())s.push(tm(t,r.key));else{const e=r.data.field(o.field);if(zp(e))throw new Yd(Jd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Yd(Jd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new gm(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=AS(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Yd(Jd.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Yd(Jd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Xm(e)&&-1!==s.indexOf("/"))throw new Yd(Jd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(gf.fromString(s));if(!wf.isDocumentKey(n))throw new Yd(Jd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new wf(n);a.push(tm(t,i))}else{const e=jS(n,r,s);a.push(e)}}return new gm(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function lk(e,t,n){if("string"==typeof(n=dt(n))){if(""===n)throw new Yd(Jd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xm(t)&&-1!==n.indexOf("/"))throw new Yd(Jd.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(gf.fromString(n));if(!wf.isDocumentKey(r))throw new Yd(Jd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return tm(e,new wf(r))}if(n instanceof eS)return tm(e,n._key);throw new Yd(Jd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(WI(n),"."))}function ck(e,t){if(!Array.isArray(e)||0===e.length)throw new Yd(Jd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function uk(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Yd(Jd.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Yd(Jd.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class hk{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Qp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Up(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Wd()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Tp(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new _S(Up(e.latitude),Up(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Bp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(qp(e));default:return null}}convertTimestamp(e){const t=jp(e);return new ff(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=gf.fromString(e);Qd(ov(n));const r=new Hp(n.get(1),n.get(3)),i=new wf(n.popFirst(5));return r.isEqual(t)||Kd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function dk(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class fk extends hk{constructor(e){super(),this.firestore=e}convertBytes(e){return new vS(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new eS(this.firestore,null,t)}}class pk{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mk extends QS{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new gk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(JS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class gk extends mk{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class yk{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new pk(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new gk(this._firestore,this._userDataWriter,n.key,n,new pk(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Yd(Jd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new gk(e._firestore,e._userDataWriter,n.doc.key,n.doc,new pk(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new gk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:vk(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function vk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wd()}}function wk(e,t){return e instanceof mk&&t instanceof mk?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof yk&&t instanceof yk&&e._firestore===t._firestore&&sS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class bk extends hk{constructor(e){super(),this.firestore=e}convertBytes(e){return new vS(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new eS(this.firestore,null,t)}}function _k(e){e=QI(e,eS);const t=QI(e.firestore,cS),n=uS(t),r=new bk(t);return function(e,t){const n=new Xd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=$d(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Yd(Jd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=g_(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await DI(e),t,n))),n.promise}(n,e._key).then((n=>new mk(t,r,e._key,n,new pk(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Ik(e){e=QI(e,ZI);const t=QI(e.firestore,cS),n=uS(t),r=new bk(t);return function(e,t){const n=new Xd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await ab(e,t,!0),i=new M_(t,r.ls),s=i.da(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=g_(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await DI(e),t,n))),n.promise}(n,e._query).then((n=>new yk(t,r,e,n)))}function Sk(e,t,n){e=QI(e,eS);const r=QI(e.firestore,cS),i=dk(e.converter,t,n);return xk(r,[CS(AS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Bg.none())])}function kk(e,t,n){e=QI(e,eS);const r=QI(e.firestore,cS),i=AS(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=dt(t))||t instanceof wS?FS(i,"updateDoc",e._key,t,n,a):MS(i,"updateDoc",e._key,t),xk(r,[s.toMutation(e._key,Bg.exists(!0))])}function Ek(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=dt(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||aS(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(aS(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof eS)h=QI(e.firestore,cS),d=Jm(e._key.path),u={next:t=>{n[l]&&n[l](Ak(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=QI(e,ZI);h=QI(t.firestore,cS),d=t._query;const r=new bk(h);u={next:e=>{n[l]&&n[l](new yk(h,r,t,e))},error:n[l+1],complete:n[l+2]},YS(e._query)}return function(e,t,n,r){const i=new II(r),s=new C_(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>I_(await FI(e),s))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>S_(await FI(e),s)))}}(uS(h),d,c,u)}function Tk(e,t){return function(e,t){const n=new II(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){$d(e).z_.add(t),t.next()}(await FI(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){$d(e).z_.delete(t)}(await FI(e),n)))}}(uS(e=QI(e,cS)),aS(t)?t:{next:t})}function xk(e,t){return function(e,t){const n=new Xd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=gI(e);try{const e=await function(e,t){const n=$d(e),r=ff.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ig());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=fg(),l=Ig();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Qg(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Yg(e.key,t,pm(t.value.mapValue),Bg.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:gg(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new Ap(uf)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await iI(r,e.changes),await n_(r.remoteStore)}catch(e){const t=g_(e,"Failed to persist write");n.reject(t)}}(await LI(e),t,n))),n.promise}(uS(e),t)}function Ak(e,t,n){const r=n.docs.get(t._key),i=new bk(e);return new mk(e,i,t._key,r,new pk(n.hasPendingWrites,n.fromCache),t.converter)}const Ck={maxAttempts:5};class Nk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=AS(e)}set(e,t,n){this._verifyNotCommitted();const r=Rk(e,this._firestore),i=dk(r.converter,t,n),s=CS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Bg.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Rk(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=dt(t))||t instanceof wS?FS(this._dataReader,"WriteBatch.update",r._key,t,n,o):MS(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Bg.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rk(e,this._firestore);return this._mutations=this._mutations.concat(new ty(t._key,Bg.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Yd(Jd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rk(e,t){if((e=dt(e)).firestore!==t)throw new Yd(Jd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Pk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=AS(e)}get(e){const t=Rk(e,this._firestore),n=new fk(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Wd();const r=e[0];if(r.isFoundDocument())return new QS(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new QS(this._firestore,n,t._key,null,t.converter);throw Wd()}))}set(e,t,n){const r=Rk(e,this._firestore),i=dk(r.converter,t,n),s=CS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Rk(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=dt(t))||t instanceof wS?FS(this._dataReader,"Transaction.update",r._key,t,n,o):MS(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Rk(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Rk(e,this._firestore),n=new bk(this._firestore);return super.get(e).then((e=>new mk(this._firestore,n,t._key,e._document,new pk(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Vd=e}(On),En(new ft("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new cS(new nf(e.getProvider("auth-internal")),new af(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Yd(Jd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hp(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Vn(jd,"4.6.1",e),Vn(jd,"4.6.1","esm2017")}();function Dk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Yd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Ok(){if("undefined"===typeof Uint8Array)throw new Yd("unimplemented","Uint8Arrays are not available in this environment.")}function Lk(){if("undefined"==typeof atob)throw new Yd("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Mk{constructor(e){this._delegate=e}static fromBase64String(e){return Lk(),new Mk(vS.fromBase64String(e))}static fromUint8Array(e){return Ok(),new Mk(vS.fromUint8Array(e))}toBase64(){return Lk(),this._delegate.toBase64()}toUint8Array(){return Ok(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Fk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class jk{enableIndexedDbPersistence(e,t){return function(e,t){yS(e=QI(e,cS));const n=uS(e);if(n._uninitializedComponentsProvider)throw new Yd(Jd.FAILED_PRECONDITION,"SDK cache is already specified.");Hd("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new bI;return dS(n,i,new vI(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){yS(e=QI(e,cS));const t=uS(e);if(t._uninitializedComponentsProvider)throw new Yd(Jd.FAILED_PRECONDITION,"SDK cache is already specified.");Hd("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new bI;return dS(t,r,new wI(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Yd(Jd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Xd;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Of.D())return Promise.resolve();const t=e+"main";await Of.delete(t)}($w(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Uk{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Hd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};XI(this._delegate,e,t,n)}enableNetwork(){return pS(this._delegate)}disableNetwork(){return mS(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,KI("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return fS(this._delegate)}onSnapshotsInSync(e){return Tk(this._delegate,e)}get app(){if(!this._appCompat)throw new Yd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zk(this,nS(this._delegate,e))}catch(WA){throw Hk(WA,"collection()","Firestore.collection()")}}doc(e){try{return new Kk(this,rS(this._delegate,e))}catch(WA){throw Hk(WA,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Jk(this,function(e,t){if(e=QI(e,YI),qI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Yd(Jd.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new ZI(e,null,function(e){return new Qm(gf.emptyPath(),e)}(t))}(this._delegate,e))}catch(WA){throw Hk(WA,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=QI(e,cS);const r=Object.assign(Object.assign({},Ck),n);return function(e){if(e.maxAttempts<1)throw new Yd(Jd.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Xd;return e.asyncQueue.enqueueAndForget((async()=>{const i=await MI(e);new EI(e.asyncQueue,i,n,t,r).Xa()})),r.promise}(uS(e),(n=>t(new Pk(e,n))),r)}(this._delegate,(t=>e(new zk(this,t))))}batch(){return uS(this._delegate),new Bk(new Nk(this._delegate,(e=>xk(this._delegate,e))))}loadBundle(e){return function(e,t){const n=uS(e=QI(e,cS)),r=new lS;return VI(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return gS(this._delegate,e).then((e=>e?new Jk(this,e):null))}}class Vk extends hk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mk(new vS(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Kk.forKey(t,this.firestore,null)}}class zk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Vk(e)}get(e){const t=eE(e);return this._delegate.get(t).then((e=>new Qk(this._firestore,new mk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=eE(e);return n?(Dk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=eE(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=eE(e);return this._delegate.delete(t),this}}class Bk{constructor(e){this._delegate=e}set(e,t,n){const r=eE(e);return n?(Dk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=eE(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=eE(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class qk{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new gk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $k(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=qk.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new qk(e,new Vk(e),t),r.set(t,i)),i}}qk.INSTANCES=new WeakMap;class Kk{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Vk(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Yd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Kk(t,new eS(t._delegate,n,new wf(e)))}static forKey(e,t,n){return new Kk(t,new eS(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Zk(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zk(this.firestore,nS(this._delegate,e))}catch(WA){throw Hk(WA,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=dt(e))instanceof eS&&iS(this._delegate,e)}set(e,t){t=Dk("DocumentReference.set",t);try{return t?Sk(this._delegate,e,t):Sk(this._delegate,e)}catch(WA){throw Hk(WA,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?kk(this._delegate,e):kk(this._delegate,e,t,...r)}catch(WA){throw Hk(WA,"updateDoc()","DocumentReference.update()")}}delete(){return xk(QI((e=this._delegate).firestore,cS),[new ty(e._key,Bg.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Gk(t),i=Wk(t,(e=>new Qk(this.firestore,new mk(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Ek(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?_k(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=QI(e,eS);const t=QI(e.firestore,cS);return jI(uS(t),e._key,{source:"server"}).then((n=>Ak(t,e,n)))}(this._delegate):function(e){e=QI(e,eS);const t=QI(e.firestore,cS);return jI(uS(t),e._key).then((n=>Ak(t,e,n)))}(this._delegate),t.then((e=>new Qk(this.firestore,new mk(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Kk(this.firestore,e?this._delegate.withConverter(qk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Hk(e,t,n){return e.message=e.message.replace(t,n),e}function Gk(e){for(const t of e)if("object"===typeof t&&!Fk(t))return t;return{}}function Wk(e,t){var n,r;let i;return i=Fk(e[0])?e[0]:Fk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Qk{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Kk(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return wk(this._delegate,e._delegate)}}class $k extends Qk{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Wd(),t}}class Jk{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Vk(e)}where(e,t,n){try{return new Jk(this.firestore,ek(this._delegate,function(e,t,n){const r=t,i=JS("where",e);return tk._create(i,r,n)}(e,t,n)))}catch(WA){throw Hk(WA,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Jk(this.firestore,ek(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=JS("orderBy",e);return rk._create(n,t)}(e,t)))}catch(WA){throw Hk(WA,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Jk(this.firestore,ek(this._delegate,($I("limit",t=e),ik._create("limit",t,"F"))))}catch(t){throw Hk(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Jk(this.firestore,ek(this._delegate,($I("limitToLast",t=e),ik._create("limitToLast",t,"L"))))}catch(t){throw Hk(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Jk(this.firestore,ek(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sk._create("startAt",t,!0)}(...arguments)))}catch(WA){throw Hk(WA,"startAt()","Query.startAt()")}}startAfter(){try{return new Jk(this.firestore,ek(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sk._create("startAfter",t,!1)}(...arguments)))}catch(WA){throw Hk(WA,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Jk(this.firestore,ek(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ok._create("endBefore",t,!1)}(...arguments)))}catch(WA){throw Hk(WA,"endBefore()","Query.endBefore()")}}endAt(){try{return new Jk(this.firestore,ek(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ok._create("endAt",t,!0)}(...arguments)))}catch(WA){throw Hk(WA,"endAt()","Query.endAt()")}}isEqual(e){return sS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Ik(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=QI(e,ZI);const t=QI(e.firestore,cS),n=uS(t),r=new bk(t);return UI(n,e._query,{source:"server"}).then((n=>new yk(t,r,e,n)))}(this._delegate):function(e){e=QI(e,ZI);const t=QI(e.firestore,cS),n=uS(t),r=new bk(t);return YS(e._query),UI(n,e._query).then((n=>new yk(t,r,e,n)))}(this._delegate),t.then((e=>new Xk(this.firestore,new yk(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Gk(t),i=Wk(t,(e=>new Xk(this.firestore,new yk(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Ek(this._delegate,r,i)}withConverter(e){return new Jk(this.firestore,e?this._delegate.withConverter(qk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Yk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $k(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Xk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Jk(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new $k(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Yk(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new $k(this._firestore,n))}))}isEqual(e){return wk(this._delegate,e._delegate)}}class Zk extends Jk{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Kk(this.firestore,e):null}doc(e){try{return new Kk(this.firestore,void 0===e?rS(this._delegate):rS(this._delegate,e))}catch(WA){throw Hk(WA,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=QI(e.firestore,cS),r=rS(e),i=dk(e.converter,t);return xk(n,[CS(AS(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Bg.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Kk(this.firestore,e)))}isEqual(e){return iS(this._delegate,e._delegate)}withConverter(e){return new Zk(this.firestore,e?this._delegate.withConverter(qk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function eE(e){return QI(e,eS)}class tE{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new wS(...t)}static documentId(){return new tE(vf.keyField().canonicalString())}isEqual(e){return(e=dt(e))instanceof wS&&this._delegate._internalPath.isEqual(e._internalPath)}}class nE{constructor(e){this._delegate=e}static serverTimestamp(){const e=new PS("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new nE(e)}static delete(){const e=new NS("deleteField");return e._methodName="FieldValue.delete",new nE(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new DS("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new nE(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new OS("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new nE(e)}static increment(e){const t=new LS("increment",e);return t._methodName="FieldValue.increment",new nE(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rE={Firestore:Uk,GeoPoint:_S,Timestamp:ff,Blob:Mk,Transaction:zk,WriteBatch:Bk,DocumentReference:Kk,DocumentSnapshot:Qk,Query:Jk,QueryDocumentSnapshot:$k,QuerySnapshot:Xk,CollectionReference:Zk,FieldPath:tE,FieldValue:nE,setLogLevel:function(e){var t;t=e,zd.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ft("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},rE)))}(e,((e,t)=>new Uk(e,t,new jk))),e.registerVersion("@firebase/firestore-compat","0.3.30")}(sr);var iE=n(7412),sE=n(2994),oE=n(8587),aE=n(8168),lE=n(8387),cE=n(8606),uE=n(7266),hE=n(7291),dE=n(805),fE=n(7605),pE=n(9148),mE=n(2191);function gE(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function yE(e,t){return yE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yE(e,t)}const vE=r.createContext(null);function wE(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function bE(e,t,n){return null!=n[t]?n[t]:e.props[t]}function _E(e,t,n){var i=wE(e.children),s=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),s=[];for(var o in e)o in t?s.length&&(i[o]=s,s=[]):s.push(o);var a={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];a[i[l][r]]=n(c)}a[l]=n(l)}for(r=0;r<s.length;r++)a[s[r]]=n(s[r]);return a}(t,i);return Object.keys(s).forEach((function(o){var a=s[o];if((0,r.isValidElement)(a)){var l=o in t,c=o in i,u=t[o],h=(0,r.isValidElement)(u)&&!u.props.in;!c||l&&!h?c||!l||h?c&&l&&(0,r.isValidElement)(u)&&(s[o]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:u.props.in,exit:bE(a,"exit",e),enter:bE(a,"enter",e)})):s[o]=(0,r.cloneElement)(a,{in:!1}):s[o]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:bE(a,"exit",e),enter:bE(a,"enter",e)})}})),s}var IE=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},SE=function(e){var t,n;function i(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,yE(t,n);var s=i.prototype;return s.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},s.componentWillUnmount=function(){this.mounted=!1},i.getDerivedStateFromProps=function(e,t){var n,i,s=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,i=o,wE(n.children,(function(e){return(0,r.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:bE(e,"appear",n),enter:bE(e,"enter",n),exit:bE(e,"exit",n)})}))):_E(e,s,o),firstRender:!1}},s.handleExited=function(e,t){var n=wE(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,aE.A)({},t.children);return delete n[e.key],{children:n}})))},s.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=(0,oE.A)(e,["component","childFactory"]),s=this.state.contextValue,o=IE(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===t?r.createElement(vE.Provider,{value:s},o):r.createElement(vE.Provider,{value:s},r.createElement(t,i,o))},i}(r.Component);SE.propTypes={},SE.defaultProps={component:"div",childFactory:function(e){return e}};const kE=SE;var EE=n(3290),TE=n(1140);const xE=function(e){const{className:t,classes:n,pulsate:i=!1,rippleX:s,rippleY:o,rippleSize:a,in:l,onExited:c,timeout:u}=e,[h,d]=r.useState(!1),f=(0,lE.A)(t,n.ripple,n.rippleVisible,i&&n.ripplePulsate),p={width:a,height:a,top:-a/2+o,left:-a/2+s},m=(0,lE.A)(n.child,h&&n.childLeaving,i&&n.childPulsate);return l||h||d(!0),r.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,gl.jsx)("span",{className:f,style:p,children:(0,gl.jsx)("span",{className:m})})};var AE=n(7056);const CE=(0,AE.A)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var NE,RE,PE,DE;const OE=["center","classes","className"];let LE,ME,FE,jE;const UE=(0,EE.i7)(LE||(LE=NE||(NE=gE(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),VE=(0,EE.i7)(ME||(ME=RE||(RE=gE(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),zE=(0,EE.i7)(FE||(FE=PE||(PE=gE(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),BE=(0,hE.Ay)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),qE=(0,hE.Ay)(xE,{name:"MuiTouchRipple",slot:"Ripple"})(jE||(jE=DE||(DE=gE(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),CE.rippleVisible,UE,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),CE.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),CE.child,CE.childLeaving,VE,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),CE.childPulsate,zE,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),KE=r.forwardRef((function(e,t){const n=(0,dE.A)({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=n,a=(0,oE.A)(n,OE),[l,c]=r.useState([]),u=r.useRef(0),h=r.useRef(null);r.useEffect((()=>{h.current&&(h.current(),h.current=null)}),[l]);const d=r.useRef(!1),f=(0,TE.A)(),p=r.useRef(null),m=r.useRef(null),g=r.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:o}=e;c((e=>[...e,(0,gl.jsx)(qE,{classes:{ripple:(0,lE.A)(s.ripple,CE.ripple),rippleVisible:(0,lE.A)(s.rippleVisible,CE.rippleVisible),ripplePulsate:(0,lE.A)(s.ripplePulsate,CE.ripplePulsate),child:(0,lE.A)(s.child,CE.child),childLeaving:(0,lE.A)(s.childLeaving,CE.childLeaving),childPulsate:(0,lE.A)(s.childPulsate,CE.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},u.current)])),u.current+=1,h.current=o}),[s]),y=r.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:s=i||t.pulsate,fakeElement:o=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&d.current)return void(d.current=!1);"touchstart"===(null==e?void 0:e.type)&&(d.current=!0);const a=o?null:m.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,h;if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(s)h=Math.sqrt((2*l.width**2+l.height**2)/3),h%2===0&&(h+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;h=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===p.current&&(p.current=()=>{g({pulsate:r,rippleX:c,rippleY:u,rippleSize:h,cb:n})},f.start(80,(()=>{p.current&&(p.current(),p.current=null)}))):g({pulsate:r,rippleX:c,rippleY:u,rippleSize:h,cb:n})}),[i,g,f]),v=r.useCallback((()=>{y({},{pulsate:!0})}),[y]),w=r.useCallback(((e,t)=>{if(f.clear(),"touchend"===(null==e?void 0:e.type)&&p.current)return p.current(),p.current=null,void f.start(0,(()=>{w(e,t)}));p.current=null,c((e=>e.length>0?e.slice(1):e)),h.current=t}),[f]);return r.useImperativeHandle(t,(()=>({pulsate:v,start:y,stop:w})),[v,y,w]),(0,gl.jsx)(BE,(0,aE.A)({className:(0,lE.A)(CE.root,s.root,o),ref:m},a,{children:(0,gl.jsx)(kE,{component:null,exit:!0,children:l})}))})),HE=KE;var GE=n(2400);function WE(e){return(0,GE.Ay)("MuiButtonBase",e)}const QE=(0,AE.A)("MuiButtonBase",["root","disabled","focusVisible"]),$E=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],JE=(0,hE.Ay)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(QE.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),YE=r.forwardRef((function(e,t){const n=(0,dE.A)({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:d=!1,LinkComponent:f="a",onBlur:p,onClick:m,onContextMenu:g,onDragLeave:y,onFocus:v,onFocusVisible:w,onKeyDown:b,onKeyUp:_,onMouseDown:I,onMouseLeave:S,onMouseUp:k,onTouchEnd:E,onTouchMove:T,onTouchStart:x,tabIndex:A=0,TouchRippleProps:C,touchRippleRef:N,type:R}=n,P=(0,oE.A)(n,$E),D=r.useRef(null),O=r.useRef(null),L=(0,fE.A)(O,N),{isFocusVisibleRef:M,onFocus:F,onBlur:j,ref:U}=(0,mE.A)(),[V,z]=r.useState(!1);c&&V&&z(!1),r.useImperativeHandle(i,(()=>({focusVisible:()=>{z(!0),D.current.focus()}})),[]);const[B,q]=r.useState(!1);r.useEffect((()=>{q(!0)}),[]);const K=B&&!u&&!c;function H(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return(0,pE.A)((r=>{t&&t(r);return!n&&O.current&&O.current[e](r),!0}))}r.useEffect((()=>{V&&d&&!u&&B&&O.current.pulsate()}),[u,d,V,B]);const G=H("start",I),W=H("stop",g),Q=H("stop",y),$=H("stop",k),J=H("stop",(e=>{V&&e.preventDefault(),S&&S(e)})),Y=H("start",x),X=H("stop",E),Z=H("stop",T),ee=H("stop",(e=>{j(e),!1===M.current&&z(!1),p&&p(e)}),!1),te=(0,pE.A)((e=>{D.current||(D.current=e.currentTarget),F(e),!0===M.current&&(z(!0),w&&w(e)),v&&v(e)})),ne=()=>{const e=D.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},re=r.useRef(!1),ie=(0,pE.A)((e=>{d&&!re.current&&V&&O.current&&" "===e.key&&(re.current=!0,O.current.stop(e,(()=>{O.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),b&&b(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!c&&(e.preventDefault(),m&&m(e))})),se=(0,pE.A)((e=>{d&&" "===e.key&&O.current&&V&&!e.defaultPrevented&&(re.current=!1,O.current.stop(e,(()=>{O.current.pulsate(e)}))),_&&_(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let oe=l;"button"===oe&&(P.href||P.to)&&(oe=f);const ae={};"button"===oe?(ae.type=void 0===R?"button":R,ae.disabled=c):(P.href||P.to||(ae.role="button"),c&&(ae["aria-disabled"]=c));const le=(0,fE.A)(t,U,D);const ce=(0,aE.A)({},n,{centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:d,tabIndex:A,focusVisible:V}),ue=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,s={root:["root",t&&"disabled",n&&"focusVisible"]},o=(0,cE.A)(s,WE,i);return n&&r&&(o.root+=" ".concat(r)),o})(ce);return(0,gl.jsxs)(JE,(0,aE.A)({as:oe,className:(0,lE.A)(ue.root,a),ownerState:ce,onBlur:ee,onClick:m,onContextMenu:W,onFocus:te,onKeyDown:ie,onKeyUp:se,onMouseDown:G,onMouseLeave:J,onMouseUp:$,onDragLeave:Q,onTouchEnd:X,onTouchMove:Z,onTouchStart:Y,ref:le,tabIndex:c?-1:A,type:R},ae,P,{children:[o,K?(0,gl.jsx)(HE,(0,aE.A)({ref:L,center:s},C)):null]}))}));var XE=n(6803);function ZE(e){return(0,GE.Ay)("MuiIconButton",e)}const eT=(0,AE.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),tT=["edge","children","className","color","disabled","disableFocusRipple","size"],nT=(0,hE.Ay)(YE,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t["color".concat((0,XE.A)(n.color))],n.edge&&t["edge".concat((0,XE.A)(n.edge))],t["size".concat((0,XE.A)(n.size))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,aE.A)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,uE.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(e=>{let{theme:t,ownerState:n}=e;var r;const i=null==(r=(t.vars||t).palette)?void 0:r[n.color];return(0,aE.A)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,aE.A)({color:null==i?void 0:i.main},!n.disableRipple&&{"&:hover":(0,aE.A)({},i&&{backgroundColor:t.vars?"rgba(".concat(i.mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,uE.X4)(i.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{["&.".concat(eT.disabled)]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})})),rT=r.forwardRef((function(e,t){const n=(0,dE.A)({props:e,name:"MuiIconButton"}),{edge:r=!1,children:i,className:s,color:o="default",disabled:a=!1,disableFocusRipple:l=!1,size:c="medium"}=n,u=(0,oE.A)(n,tT),h=(0,aE.A)({},n,{edge:r,color:o,disabled:a,disableFocusRipple:l,size:c}),d=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:s}=e,o={root:["root",n&&"disabled","default"!==r&&"color".concat((0,XE.A)(r)),i&&"edge".concat((0,XE.A)(i)),"size".concat((0,XE.A)(s))]};return(0,cE.A)(o,ZE,t)})(h);return(0,gl.jsx)(nT,(0,aE.A)({className:(0,lE.A)(d.root,s),centerRipple:!0,focusRipple:!l,disabled:a,ref:t},u,{ownerState:h,children:i}))}));var iT=n(4055),sT=n(4533);const oT=e=>{let{rating:t}=e;return(0,gl.jsx)("div",{children:(()=>{const e=[];for(let n=0;n<5;n++)n<t?e.push((0,gl.jsx)(iE.A,{style:{color:"black"}},n)):e.push((0,gl.jsx)(sE.A,{style:{color:"black",opacity:"0.3"}},n));return e})()})};const aT=function(){const{userId:e}=te(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)([]),[o,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{try{const t=await sr.firestore().collection("users").doc(e).get();if(t.exists){const e=t.data();s(e.email)}}catch(t){console.error("Error fetching user data:",t)}})(),(async()=>{a(!0);try{const t=(await sr.firestore().collection("ratings").where("userId","==",e).get()).docs.map((e=>e.data()));n(t)}catch(t){console.error("Error fetching user reviews:",t)}finally{a(!1)}})()}),[e]),(0,gl.jsxs)("div",{className:"ReviewsPage",children:[(0,gl.jsxs)("div",{className:"user-info-container",children:[(0,gl.jsx)(sT.A,{style:{marginRight:"10px",marginTop:"0px"}}),(0,gl.jsxs)("p",{children:[i,"'s Library"]})]}),(0,gl.jsxs)("div",{className:"reviewTitles",children:[(0,gl.jsxs)("p",{className:"bigText",children:[t.length," ",1==t.length?"book":"books"," read"]}),(0,gl.jsxs)("p",{className:"bigText",children:[(()=>{let e=0;return t.map(((t,n)=>{let r=t.numPages;(void 0===r||r<1)&&(r=250),e+=r})),e})().toLocaleString()," pages read"]})]}),0===t.length?(0,gl.jsx)("p",{children:"No reviews submitted yet."}):(0,gl.jsx)("div",{className:"reviewGrid",children:t.map(((e,t)=>(0,gl.jsxs)("div",{className:"grid-item reviewTile ".concat(l===t?"selected":""),onClick:()=>(e=>{c((t=>t===e?null:e)),console.log(l)})(t),children:[(0,gl.jsx)("div",{className:"delete-button",children:(0,gl.jsx)(rT,{onClick:()=>(async(e,t)=>{try{await sr.firestore().collection("ratings").doc(t).delete(),console.log("Review deleted successfully"),n((t=>t.filter(((t,n)=>n!==e))))}catch(r){console.error("Error deleting review:",r)}})(t,e.id),children:(0,gl.jsx)(iT.A,{})})}),(0,gl.jsx)("img",{src:e.bookCover,alt:e.bookTitle,style:{width:"128px",height:"192px"}}),(0,gl.jsx)("p",{children:e.bookTitle}),(0,gl.jsx)(oT,{rating:e.rating}),l===t&&(0,gl.jsxs)("div",{className:"reviewComments",children:[(0,gl.jsx)("p",{children:"Comments:"}),(0,gl.jsxs)("p",{children:['"',e.comment,'"']})]})]},t)))})]})};function lT(e){const t=e.split(" ");for(let n=0;n<t.length;n++)t[n]=t[n][0].toUpperCase()+t[n].substr(1);return t.join(" ")}const cT=function(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(!1),a=async e=>{try{console.log("https://www.googleapis.com/books/v1/volumes?q=".concat(e,"&maxResults=20&orderBy=relevance"));const t=await fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(e,"&maxResults=20&orderBy=relevance"));if(!t.ok)throw new Error("Network response was not ok.");const n=await t.json();console.log(n);const r=n.items.map(l);console.log(r),i(r)}catch(t){console.error("Error fetching books:",t)}},l=e=>{let t="https://books.google.com/books/publisher/content/images/frontcover/".concat(e.id,"?fife=w400-h600&source=gbs_api"),n=e.id;if(void 0!=e.volumeInfo.industryIdentifiers){let t=e.volumeInfo.industryIdentifiers.filter((e=>"ISBN_10"===e.type));n=t.length>0?t[0].identifier:"ISBN not available"}return{id:n,title:e.volumeInfo.title,author:e.volumeInfo.authors?e.volumeInfo.authors.join(", "):"Unknown",cover:t}};(0,r.useEffect)((()=>{(async()=>{try{const e=await fetch("https://api.nytimes.com/svc/books/v3/lists/current/hardcover-fiction.json?api-key=jBKInnoj01fZQMA9gQHNyvkQXT8QAMFH");if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();console.log(t);const n=t.results.books.map(c);i(n)}catch(e){console.error(e)}})()}),[]);const c=e=>({id:e.primary_isbn10,title:lT(e.title.toLowerCase()),author:e.author,cover:e.book_image});return(0,gl.jsxs)("div",{className:"ExplorePage",children:[(0,gl.jsxs)("div",{className:"searchDiv",children:[(0,gl.jsx)("input",{type:"text",placeholder:"What are we reading next?",value:e,onChange:e=>{t(e.target.value)},onKeyPress:t=>{"Enter"===t.key&&""!==e.trim()&&a(e)},className:"searchField"}),(0,gl.jsx)("button",{onClick:()=>{""!==e.trim()&&a(e)},className:"submitButton",children:"Search"})]}),(0,gl.jsx)("div",{className:"grid-container",children:n.map((e=>(0,gl.jsx)(Te,{to:"/review/".concat(e.id),className:"grid-item",children:(0,gl.jsxs)("div",{children:[e.cover&&(0,gl.jsx)("img",{src:e.cover,alt:e.title,style:{width:"128px",height:"192px"}}),(0,gl.jsx)("p",{className:"bookTitle",children:e.title}),(0,gl.jsxs)("p",{children:["Author: ",e.author]})]})},e.id)))})]})},uT={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let hT;const dT=new Uint8Array(16);function fT(){if(!hT&&(hT="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hT))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hT(dT)}const pT=[];for(let n=0;n<256;++n)pT.push((n+256).toString(16).slice(1));function mT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return pT[e[t+0]]+pT[e[t+1]]+pT[e[t+2]]+pT[e[t+3]]+"-"+pT[e[t+4]]+pT[e[t+5]]+"-"+pT[e[t+6]]+pT[e[t+7]]+"-"+pT[e[t+8]]+pT[e[t+9]]+"-"+pT[e[t+10]]+pT[e[t+11]]+pT[e[t+12]]+pT[e[t+13]]+pT[e[t+14]]+pT[e[t+15]]}const gT=function(e,t,n){if(uT.randomUUID&&!t&&!e)return uT.randomUUID();const r=(e=e||{}).random||(e.rng||fT)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return mT(r)};var yT=n(7040);const vT={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},wT=["value"],bT=r.createContext();const _T=function(e){let{value:t}=e,n=(0,oE.A)(e,wT);return(0,gl.jsx)(bT.Provider,(0,aE.A)({value:null==t||t},n))};var IT=n(5047),ST=n(5242),kT=n(9662);const ET=(0,kT.A)((0,gl.jsx)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),TT=(0,kT.A)((0,gl.jsx)("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");var xT=n(7123);function AT(e){return(0,GE.Ay)("MuiRating",e)}const CT=(0,AE.A)("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]),NT=["value"],RT=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function PT(e,t){if(null==e)return e;const n=Math.round(e/t)*t;return Number(n.toFixed(function(e){const t=e.toString().split(".")[1];return t?t.length:0}(t)))}const DT=(0,hE.Ay)("span",{name:"MuiRating",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(CT.visuallyHidden)]:t.visuallyHidden},t.root,t["size".concat((0,XE.A)(n.size))],n.readOnly&&t.readOnly]}})((e=>{let{theme:t,ownerState:n}=e;return(0,aE.A)({display:"inline-flex",position:"relative",fontSize:t.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",width:"min-content",WebkitTapHighlightColor:"transparent",["&.".concat(CT.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},["&.".concat(CT.focusVisible," .").concat(CT.iconActive)]:{outline:"1px solid #999"},["& .".concat(CT.visuallyHidden)]:vT},"small"===n.size&&{fontSize:t.typography.pxToRem(18)},"large"===n.size&&{fontSize:t.typography.pxToRem(30)},n.readOnly&&{pointerEvents:"none"})})),OT=(0,hE.Ay)("label",{name:"MuiRating",slot:"Label",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.label,n.emptyValueFocused&&t.labelEmptyValueActive]}})((e=>{let{ownerState:t}=e;return(0,aE.A)({cursor:"inherit"},t.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"})})),LT=(0,hE.Ay)("span",{name:"MuiRating",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.iconEmpty&&t.iconEmpty,n.iconFilled&&t.iconFilled,n.iconHover&&t.iconHover,n.iconFocus&&t.iconFocus,n.iconActive&&t.iconActive]}})((e=>{let{theme:t,ownerState:n}=e;return(0,aE.A)({display:"flex",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),pointerEvents:"none"},n.iconActive&&{transform:"scale(1.2)"},n.iconEmpty&&{color:(t.vars||t).palette.action.disabled})})),MT=(0,hE.Ay)("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:e=>(0,xT.A)(e)&&"iconActive"!==e,overridesResolver:(e,t)=>{const{iconActive:n}=e;return[t.decimal,n&&t.iconActive]}})((e=>{let{iconActive:t}=e;return(0,aE.A)({position:"relative"},t&&{transform:"scale(1.2)"})}));function FT(e){const t=(0,oE.A)(e,NT);return(0,gl.jsx)("span",(0,aE.A)({},t))}function jT(e){const{classes:t,disabled:n,emptyIcon:i,focus:s,getLabelText:o,highlightSelectedOnly:a,hover:l,icon:c,IconContainerComponent:u,isActive:h,itemValue:d,labelProps:f,name:p,onBlur:m,onChange:g,onClick:y,onFocus:v,readOnly:w,ownerState:b,ratingValue:_,ratingValueRounded:I}=e,S=a?d===_:d<=_,k=d<=l,E=d<=s,T=d===I,x=(0,IT.A)(),A=(0,gl.jsx)(LT,{as:u,value:d,className:(0,lE.A)(t.icon,S?t.iconFilled:t.iconEmpty,k&&t.iconHover,E&&t.iconFocus,h&&t.iconActive),ownerState:(0,aE.A)({},b,{iconEmpty:!S,iconFilled:S,iconHover:k,iconFocus:E,iconActive:h}),children:i&&!S?i:c});return w?(0,gl.jsx)("span",(0,aE.A)({},f,{children:A})):(0,gl.jsxs)(r.Fragment,{children:[(0,gl.jsxs)(OT,(0,aE.A)({ownerState:(0,aE.A)({},b,{emptyValueFocused:void 0}),htmlFor:x},f,{children:[A,(0,gl.jsx)("span",{className:t.visuallyHidden,children:o(d)})]})),(0,gl.jsx)("input",{className:t.visuallyHidden,onFocus:v,onBlur:m,onChange:g,onClick:y,disabled:n,value:d,id:x,type:"radio",name:p,checked:T})]})}const UT=(0,gl.jsx)(ET,{fontSize:"inherit"}),VT=(0,gl.jsx)(TT,{fontSize:"inherit"});function zT(e){return"".concat(e," Star").concat(1!==e?"s":"")}const BT=r.forwardRef((function(e,t){const n=(0,dE.A)({name:"MuiRating",props:e}),{className:i,defaultValue:s=null,disabled:o=!1,emptyIcon:a=VT,emptyLabelText:l="Empty",getLabelText:c=zT,highlightSelectedOnly:u=!1,icon:h=UT,IconContainerComponent:d=FT,max:f=5,name:p,onChange:m,onChangeActive:g,onMouseLeave:y,onMouseMove:v,precision:w=1,readOnly:b=!1,size:_="medium",value:I}=n,S=(0,oE.A)(n,RT),k=(0,IT.A)(p),[E,T]=(0,ST.A)({controlled:I,default:s,name:"Rating"}),x=PT(E,w),A=(()=>{const e=r.useContext(bT);return null!=e&&e})(),[{hover:C,focus:N},R]=r.useState({hover:-1,focus:-1});let P=x;-1!==C&&(P=C),-1!==N&&(P=N);const{isFocusVisibleRef:D,onBlur:O,onFocus:L,ref:M}=(0,mE.A)(),[F,j]=r.useState(!1),U=r.useRef(),V=(0,fE.A)(M,U,t),z=e=>{let t=""===e.target.value?null:parseFloat(e.target.value);-1!==C&&(t=C),T(t),m&&m(e,t)},B=e=>{0===e.clientX&&0===e.clientY||(R({hover:-1,focus:-1}),T(null),m&&parseFloat(e.target.value)===x&&m(e,null))},q=e=>{L(e),!0===D.current&&j(!0);const t=parseFloat(e.target.value);R((e=>({hover:e.hover,focus:t})))},K=e=>{if(-1!==C)return;O(e),!1===D.current&&j(!1);R((e=>({hover:e.hover,focus:-1})))},[H,G]=r.useState(!1),W=(0,aE.A)({},n,{defaultValue:s,disabled:o,emptyIcon:a,emptyLabelText:l,emptyValueFocused:H,focusVisible:F,getLabelText:c,icon:h,IconContainerComponent:d,max:f,precision:w,readOnly:b,size:_}),Q=(e=>{const{classes:t,size:n,readOnly:r,disabled:i,emptyValueFocused:s,focusVisible:o}=e,a={root:["root","size".concat((0,XE.A)(n)),i&&"disabled",o&&"focusVisible",r&&"readOnly"],label:["label","pristine"],labelEmptyValue:[s&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return(0,cE.A)(a,AT,t)})(W);return(0,gl.jsxs)(DT,(0,aE.A)({ref:V,onMouseMove:e=>{v&&v(e);const t=U.current,{right:n,left:r,width:i}=t.getBoundingClientRect();let s;s=A?(n-e.clientX)/i:(e.clientX-r)/i;let o=PT(f*s+w/2,w);o=(0,yT.A)(o,w,f),R((e=>e.hover===o&&e.focus===o?e:{hover:o,focus:o})),j(!1),g&&C!==o&&g(e,o)},onMouseLeave:e=>{y&&y(e);R({hover:-1,focus:-1}),g&&-1!==C&&g(e,-1)},className:(0,lE.A)(Q.root,i,b&&"MuiRating-readOnly"),ownerState:W,role:b?"img":null,"aria-label":b?c(P):null},S,{children:[Array.from(new Array(f)).map(((e,t)=>{const n=t+1,r={classes:Q,disabled:o,emptyIcon:a,focus:N,getLabelText:c,highlightSelectedOnly:u,hover:C,icon:h,IconContainerComponent:d,name:k,onBlur:K,onChange:z,onClick:B,onFocus:q,ratingValue:P,ratingValueRounded:x,readOnly:b,ownerState:W},i=n===Math.ceil(P)&&(-1!==C||-1!==N);if(w<1){const e=Array.from(new Array(1/w));return(0,gl.jsx)(MT,{className:(0,lE.A)(Q.decimal,i&&Q.iconActive),ownerState:W,iconActive:i,children:e.map(((t,i)=>{const s=PT(n-1+(i+1)*w,w);return(0,gl.jsx)(jT,(0,aE.A)({},r,{isActive:!1,itemValue:s,labelProps:{style:e.length-1===i?{}:{width:s===P?"".concat((i+1)*w*100,"%"):"0%",overflow:"hidden",position:"absolute"}}}),s)}))},n)}return(0,gl.jsx)(jT,(0,aE.A)({},r,{isActive:i,itemValue:n}),n)})),!b&&!o&&(0,gl.jsxs)(OT,{className:(0,lE.A)(Q.label,Q.labelEmptyValue),ownerState:W,children:[(0,gl.jsx)("input",{className:Q.visuallyHidden,value:"",id:"".concat(k,"-empty"),type:"radio",name:k,checked:null==x,onFocus:()=>G(!0),onBlur:()=>G(!1),onChange:z}),(0,gl.jsx)("span",{className:Q.visuallyHidden,children:l})]})]}))}));var qT=n(8279);const KT=r.createContext(null);function HT(){return r.useContext(KT)}const GT="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";const WT=function(e){const{children:t,theme:n}=e,i=HT(),s=r.useMemo((()=>{const e=null===i?n:function(e,t){if("function"===typeof t)return t(e);return(0,aE.A)({},e,t)}(i,n);return null!=e&&(e[GT]=null!==i),e}),[n,i]);return(0,gl.jsx)(KT.Provider,{value:s,children:t})};var QT=n(5756),$T=n(7082);const JT={};function YT(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r.useMemo((()=>{const r=e&&t[e]||t;if("function"===typeof n){const s=n(r),o=e?(0,aE.A)({},t,{[e]:s}):s;return i?()=>o:o}return e?(0,aE.A)({},t,{[e]:n}):(0,aE.A)({},t,n)}),[e,t,n,i])}const XT=function(e){const{children:t,theme:n,themeId:r}=e,i=(0,$T.A)(JT),s=HT()||JT,o=YT(r,i,n),a=YT(r,s,n,!0),l="rtl"===o.direction;return(0,gl.jsx)(WT,{theme:a,children:(0,gl.jsx)(QT.T.Provider,{value:o,children:(0,gl.jsx)(_T,{value:l,children:t})})})};var ZT=n(3375);const ex=["theme"];function tx(e){let{theme:t}=e,n=(0,oE.A)(e,ex);const r=t[ZT.A];return(0,gl.jsx)(XT,(0,aE.A)({},n,{themeId:r?ZT.A:void 0,theme:r||t}))}var nx=n(5678),rx=n(9120);const ix=(0,qT.A)({components:{MuiRating:{styleOverrides:{iconFilled:{color:"black",fontSize:"3rem"},iconEmpty:{color:"black",fontSize:"3rem"}}}}});const sx=function(){const{bookId:e}=te(),[t,n]=(0,r.useState)(null),[i,s]=(0,r.useState)(null),[o,a]=(0,r.useState)(0),[l,c]=(0,r.useState)(""),u=ee(),[h,d]=(0,r.useState)(new Date);(0,r.useEffect)((()=>{const e=setInterval((()=>{d(new Date)}),6e4);return()=>clearInterval(e)}),[]),(0,r.useEffect)((()=>{f(e)}),[e]);const f=async e=>{let t=null;try{const r=await fetch("https://www.googleapis.com/books/v1/volumes?q=isbn:".concat(e));if(!r.ok)throw new Error("Network response was not ok.");t=await r.json(),t=t.items[0],n(t.volumeInfo),s(t.volumeInfo.authors[0])}catch(r){console.error("Error fetching book:",r)}};if(!t)return(0,gl.jsx)("div",{children:"Loading..."});function p(e){var t=e.match(/id=([^&]+)/);return t&&t[1]?t[1]:null}const m=p(t.infoLink),g="https://books.google.com/books/publisher/content/images/frontcover/".concat(m,"?fife=w400-h600&source=gbs_api");return console.log(g),(0,gl.jsxs)("div",{className:"BookReviewPage",children:[(0,gl.jsx)(Te,{to:"/explore",style:{textDecoration:"none"},className:"back-link",children:(0,gl.jsxs)(rT,{children:[(0,gl.jsx)(rx.A,{style:{color:"black",margin:"10px"}}),(0,gl.jsx)("p",{style:{fontSize:"0.75em"},children:"Back"})]})}),(0,gl.jsxs)("div",{className:"reviewDiv",children:[(0,gl.jsx)("div",{className:"reviewTitle",style:{display:"flex",marginBottom:"25px"},children:(0,gl.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,gl.jsxs)("p",{style:{marginRight:"30px",marginLeft:"-40px",fontSize:"1.5em"},children:[(0,gl.jsx)("b",{children:"Review:"})," ",(0,gl.jsx)("i",{children:t.title})]}),(0,gl.jsxs)("p",{style:{fontSize:"1.2em"},children:["Author: ",i]})]})}),(0,gl.jsxs)("div",{style:{display:"flex"},children:[(0,gl.jsx)("img",{src:g,alt:t.title,className:"bookReviewPicture"}),(0,gl.jsxs)("div",{style:{display:"inline"},children:[(0,gl.jsxs)("p",{className:"dateString",children:[h.toLocaleDateString()," ",h.toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric",hour12:!0})]}),(0,gl.jsx)("div",{className:"stars",children:(0,gl.jsx)(tx,{theme:ix,children:(0,gl.jsx)(BT,{name:"customized-half-rating",value:o,precision:.5,onChange:e=>{a(parseFloat(e.target.value))},size:"extr",max:5})})}),(0,gl.jsxs)("div",{className:"comments-submit",children:[(0,gl.jsx)("textarea",{placeholder:"Write your comments...",value:l,onChange:e=>{c(e.target.value)}}),(0,gl.jsx)("button",{style:{marginBottom:"25px"},className:"userButton",onClick:async()=>{const e=sr.auth().currentUser;if(!e)return void console.error("User is not authenticated.");const n={id:gT(),bookTitle:t.title,bookCover:"https://books.google.com/books/publisher/content/images/frontcover/".concat(p(t.infoLink),"?fife=w400-h600&source=gbs_api"),rating:o,comment:l,userId:e.uid,numPages:t.pageCount};try{await sr.firestore().collection("ratings").add(n),console.log("Review added to Firestore successfully");const t=e.uid;u("/user/".concat(t)),a(0),c("")}catch(r){console.error("Error adding review to Firestore:",r)}},children:(0,gl.jsxs)("div",{style:{display:"flex"},children:[(0,gl.jsx)(nx.A,{style:{marginLeft:"10px",marginRight:"10px",marginTop:"10px",color:"white"}}),(0,gl.jsx)("p",{className:"userBtnText",children:"Submit Review"})]})})]})]})]})]})]})},ox=e=>{let{setUser:t}=e;const n=ee(),[i,s]=(0,r.useState)(""),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,h]=(0,r.useState)("");return(0,gl.jsx)("div",{className:"loginPage",children:(0,gl.jsxs)("div",{className:"loginContainer",children:[(0,gl.jsx)("img",{src:ml,className:"loginLogo"}),(0,gl.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o.endsWith("@brown.edu"))try{const e=(await sr.auth().createUserWithEmailAndPassword(o,l)).user;await sr.firestore().collection("users").doc(e.uid).set({email:o,userId:e.uid,name:i}),t({email:o}),n("/explore"),a(""),c(""),s(""),h("")}catch(u){h(u.message)}else h("Please sign up with a Brown University email address")},className:"loginForm",children:[(0,gl.jsx)("input",{className:"loginField",type:"name",placeholder:"Name",value:i,onChange:e=>s(e.target.value),required:!0}),(0,gl.jsx)("input",{className:"loginField",type:"email",placeholder:"Email",value:o,onChange:e=>a(e.target.value),required:!0}),(0,gl.jsx)("input",{className:"loginField",type:"password",placeholder:"Password",value:l,onChange:e=>c(e.target.value),required:!0}),(0,gl.jsx)("button",{type:"submit",className:"loginButton",children:"Sign Up"})]}),u&&(0,gl.jsx)("p",{children:u}),(0,gl.jsx)(Te,{to:"/",children:(0,gl.jsx)("p",{className:"whiteText",children:"Already have an account? Log in here."})})]})})},ax=e=>{let{setUser:t}=e;const[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),c=ee();return(0,gl.jsx)("div",{className:"loginPage",children:(0,gl.jsxs)("div",{className:"loginContainer",children:[(0,gl.jsx)("img",{src:ml,className:"loginLogo"}),(0,gl.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await sr.auth().signInWithEmailAndPassword(n,s),t({email:n}),c("/explore"),i(""),o(""),l("")}catch(a){l(a.message)}},className:"loginForm",children:[(0,gl.jsx)("input",{className:"loginField",type:"email",placeholder:"Email",value:n,onChange:e=>i(e.target.value),required:!0}),(0,gl.jsx)("input",{className:"loginField",type:"password",placeholder:"Password",value:s,onChange:e=>o(e.target.value),required:!0}),(0,gl.jsx)("button",{type:"submit",className:"loginButton",children:"Login"})]}),a&&(0,gl.jsx)("p",{children:a}),(0,gl.jsx)(Te,{to:"/signup",children:(0,gl.jsx)("p",{className:"whiteText",children:"Don't have an account? Sign up here."})})]})})};Vn("firebase","10.11.1","app");const lx="@firebase/installations",cx="0.6.6",ux=1e4,hx="w:".concat(cx),dx="FIS_v2",fx="https://firebaseinstallations.googleapis.com/v1",px=36e5,mx=new Je("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function gx(e){return e instanceof $e&&e.code.includes("request-failed")}function yx(e){let{projectId:t}=e;return"".concat(fx,"/projects/").concat(t,"/installations")}function vx(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function wx(e,t){const n=(await t.json()).error;return mx.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function bx(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _x(e,t){let{refreshToken:n}=t;const r=bx(e);return r.append("Authorization",function(e){return"".concat(dx," ").concat(e)}(n)),r}async function Ix(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Sx(e){return new Promise((t=>{setTimeout(t,e)}))}const kx=/^[cdef][\w-]{21}$/,Ex="";function Tx(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return kx.test(t)?t:Ex}catch(e){return Ex}}function xx(e){return"".concat(e.appName,"!").concat(e.appId)}const Ax=new Map;function Cx(e,t){const n=xx(e);Nx(n,t),function(e,t){const n=Px();n&&n.postMessage({key:e,fid:t});Dx()}(n,t)}function Nx(e,t){const n=Ax.get(e);if(n)for(const r of n)r(t)}let Rx=null;function Px(){return!Rx&&"BroadcastChannel"in self&&(Rx=new BroadcastChannel("[Firebase] FID Change"),Rx.onmessage=e=>{Nx(e.data.key,e.data.fid)}),Rx}function Dx(){0===Ax.size&&Rx&&(Rx.close(),Rx=null)}const Ox="firebase-installations-database",Lx=1,Mx="firebase-installations-store";let Fx=null;function jx(){return Fx||(Fx=jt(Ox,Lx,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Mx)}})),Fx}async function Ux(e,t){const n=xx(e),r=(await jx()).transaction(Mx,"readwrite"),i=r.objectStore(Mx),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||Cx(e,t.fid),t}async function Vx(e){const t=xx(e),n=(await jx()).transaction(Mx,"readwrite");await n.objectStore(Mx).delete(t),await n.done}async function zx(e,t){const n=xx(e),r=(await jx()).transaction(Mx,"readwrite"),i=r.objectStore(Mx),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||Cx(e,o.fid),o}async function Bx(e){let t;const n=await zx(e.appConfig,(n=>{const r=function(e){const t=e||{fid:Tx(),registrationStatus:0};return Hx(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(mx.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=yx(n),o=bx(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:dx,appId:n.appId,sdkVersion:hx},c={method:"POST",headers:o,body:JSON.stringify(l)},u=await Ix((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:vx(e.authToken)}}throw await wx("Create Installation",u)}(e,t);return Ux(e.appConfig,n)}catch(WA){throw gx(WA)&&409===WA.customData.serverCode?await Vx(e.appConfig):await Ux(e.appConfig,{fid:t.fid,registrationStatus:0}),WA}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:qx(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return n.fid===Ex?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function qx(e){let t=await Kx(e.appConfig);for(;1===t.registrationStatus;)await Sx(100),t=await Kx(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Bx(e);return n||t}return t}function Kx(e){return zx(e,(e=>{if(!e)throw mx.create("installation-not-found");return Hx(e)}))}function Hx(e){return 1===(t=e).registrationStatus&&t.registrationTime+ux<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Gx(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(yx(e),"/").concat(n,"/authTokens:generate")}(n,t),s=_x(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:hx,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await Ix((()=>fetch(i,l)));if(c.ok){return vx(await c.json())}throw await wx("Generate Auth Token",c)}async function Wx(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await zx(e.appConfig,(r=>{if(!$x(r))throw mx.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+px}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await Qx(e.appConfig);for(;1===n.authToken.requestStatus;)await Sx(100),n=await Qx(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Wx(e,t):r}(e,n),r;{if(!navigator.onLine)throw mx.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Gx(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Ux(e.appConfig,r),n}catch(WA){if(!gx(WA)||401!==WA.customData.serverCode&&404!==WA.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Ux(e.appConfig,n)}else await Vx(e.appConfig);throw WA}}(e,n),n}}));return t?await t:r.authToken}function Qx(e){return zx(e,(e=>{if(!$x(e))throw mx.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+ux<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function $x(e){return void 0!==e&&2===e.registrationStatus}async function Jx(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Bx(e);t&&await t}(n);return(await Wx(n,t)).token}function Yx(e){return mx.create("missing-app-config-values",{valueName:e})}const Xx="installations",Zx=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Yx("App Configuration");if(!e.name)throw Yx("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Yx(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Tn(t,"heartbeat"),_delete:()=>Promise.resolve()}},eA=e=>{const t=Tn(e.getProvider("app").getImmediate(),Xx).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Bx(t);return r?r.catch(console.error):Wx(t).catch(console.error),n.fid}(t),getToken:e=>Jx(t,e)}};En(new ft(Xx,Zx,"PUBLIC")),En(new ft("installations-internal",eA,"PRIVATE")),Vn(lx,cx),Vn(lx,cx,"esm2017");const tA="analytics",nA="firebase_id",rA="origin",iA=6e4,sA="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",oA="https://www.googletagmanager.com/gtag/js",aA=new kt("@firebase/analytics"),lA=new Je("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function cA(e){if(!e.startsWith(oA)){const t=lA.create("invalid-gtag-resource",{gtagURL:e});return aA.warn(t.message),""}return e}function uA(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function hA(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:cA}),r=document.createElement("script"),i="".concat(oA,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function dA(e,t,n,r){return async function(i){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await uA(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(WA){aA.error(WA)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=o;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await uA(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(WA){aA.error(WA)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t]=o;e("consent","update",t)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch(WA){aA.error(WA)}}}const fA=30;const pA=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function mA(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function gA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pA,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw lA.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw lA.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new vA;return setTimeout((async()=>{a.abort()}),void 0!==n?n:iA),yA({appId:r,apiKey:i,measurementId:s},o,a,t)}async function yA(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pA;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(lA.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(WA){if(l)return aA.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===WA||void 0===WA?void 0:WA.message,"]")),{appId:a,measurementId:l};throw WA}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:mA(r)},s=sA.replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw lA.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch(WA){const r=WA;if(!function(e){if(!(e instanceof $e)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(s.deleteThrottleMetadata(a),l)return aA.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===r||void 0===r?void 0:r.message,"]")),{appId:a,measurementId:l};throw WA}const c=503===Number(null===(o=null===r||void 0===r?void 0:r.customData)||void 0===o?void 0:o.httpStatus)?ht(i,s.intervalMillis,fA):ht(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return s.setThrottleMetadata(a,u),aA.debug("Calling attemptFetch again in ".concat(c," millis")),yA(e,u,n,s)}}class vA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let wA,bA;function _A(e){bA=e}function IA(e){wA=e}async function SA(e,t,n,r,i,s,o){var a;const l=gA(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&aA.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((e=>aA.error(e))),t.push(l);const c=async function(){if(!We())return aA.warn(lA.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Qe()}catch(WA){return aA.warn(lA.create("indexeddb-unavailable",{errorInfo:null===WA||void 0===WA?void 0:WA.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,h]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(oA)&&n.src.includes(e))return n;return null})(s)||hA(s,u.measurementId),bA&&(i("consent","default",bA),_A(void 0)),i("js",new Date);const d=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return d[rA]="firebase",d.update=!0,null!=h&&(d[nA]=h),i("config",u.measurementId,d),wA&&(i("set",wA),IA(void 0)),u.measurementId}class kA{constructor(e){this.app=e}_delete(){return delete EA[this.app.options.appId],Promise.resolve()}}let EA={},TA=[];const xA={};let AA,CA,NA="dataLayer",RA="gtag",PA=!1;function DA(){const e=[];if(qe()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>"(".concat(t+1,") ").concat(e))).join(" "),n=lA.create("invalid-analytics-context",{errorInfo:t});aA.warn(n.message)}}function OA(e,t,n){DA();const r=e.options.appId;if(!r)throw lA.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw lA.create("no-api-key");aA.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=EA[r])throw lA.create("already-exists",{id:r});if(!PA){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(NA);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=dA(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(EA,TA,xA,NA,RA);CA=e,AA=t,PA=!0}EA[r]=SA(e,TA,xA,t,AA,NA,n);return new kA(e)}function LA(e,t,n,r){e=dt(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(CA,EA[e.app.options.appId],t,n,r).catch((e=>aA.error(e)))}const MA="@firebase/analytics",FA="0.10.2";En(new ft(tA,((e,t)=>{let{options:n}=t;return OA(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),En(new ft("analytics-internal",(function(e){try{const t=e.getProvider(tA).getImmediate();return{logEvent:(e,n,r)=>LA(t,e,n,r)}}catch(WA){throw lA.create("interop-component-reg-failed",{reason:WA})}}),"PRIVATE")),Vn(MA,FA),Vn(MA,FA,"esm2017");const jA=n.p+"static/media/book-club-logo-notext.0c5609571e8419fcc59d.png";const UA=function(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const t=setTimeout((()=>{(async()=>{if(""!==e.trim()){o(!0);try{const t=(await sr.firestore().collection("users").get()).docs.map((e=>e.data())),n=t.filter((t=>new RegExp(a(e),"i").test(t.email)));i(n)}catch(t){console.error("Error searching for users:",t)}finally{o(!1)}}else{const e=(await sr.firestore().collection("users").get()).docs.map((e=>e.data()));i(e)}})()}),300);return()=>clearTimeout(t)}),[e]);const a=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return(0,gl.jsxs)("div",{className:"UsersPage",children:[(0,gl.jsx)("div",{className:"searchDiv",children:(0,gl.jsx)("input",{type:"text",placeholder:"Search",value:e,onChange:e=>t(e.target.value),className:"searchField",style:{width:"700px"}})}),s?(0,gl.jsx)("p",{children:"Searching..."}):(0,gl.jsx)("ul",{children:n.length>0?n.map(((e,t)=>(0,gl.jsxs)("div",{className:"userTile",children:[(0,gl.jsx)("p",{className:"userName",children:e.name}),(0,gl.jsx)("p",{className:"email",children:e.email}),(0,gl.jsx)("button",{className:"userButton",children:(0,gl.jsx)(Te,{to:"/user/".concat(e.userId),children:(0,gl.jsxs)("div",{style:{display:"flex"},children:[(0,gl.jsx)(sT.A,{style:{marginLeft:"10px",marginRight:"10px",marginTop:"10px",color:"white"}}),(0,gl.jsx)("p",{className:"userBtnText",children:"View Library"})]})})}),(0,gl.jsx)("button",{className:"userButton",children:(0,gl.jsx)(Te,{to:"/user/".concat(e.userId),children:(0,gl.jsxs)("div",{className:"button2",children:[(0,gl.jsx)("img",{className:"btnLogo",src:jA}),(0,gl.jsx)("p",{className:"userBtnText2",children:"Add to Book Club"})]})})})]},t))):(0,gl.jsx)("p",{children:"No users found."})})]})},VA=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[w,b]=(0,r.useState)(!1),[_,I]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{const e=sr.auth().currentUser;if(e)try{const t=await sr.firestore().collection("users").doc(e.uid).get();if(t.exists){const n=t.data();v({...n,userId:e.uid}),p([{...n,userId:e.uid}])}}catch(a){console.error("Error fetching current user data:",a)}})()}),[]),(0,r.useEffect)((()=>{const e=setTimeout((()=>{(async()=>{if(""!==c.trim()){g(!0);try{const e=(await sr.firestore().collection("users").get()).docs.map((e=>({...e.data(),userId:e.id}))),t=e.filter((e=>new RegExp(S(c),"i").test(e.email)));d(t)}catch(a){console.error("Error searching for users:",a)}finally{g(!1)}}else{const e=(await sr.firestore().collection("users").get()).docs.map((e=>({...e.data(),userId:e.id})));d(e)}})()}),300);return()=>clearTimeout(e)}),[c]);const S=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return(0,gl.jsxs)("div",{children:[(0,gl.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e&&s&&0!==f.length)try{const t=Math.floor(Math.random()*f.length),r=f[t];I(r);const i=parseInt(s,10),o=sr.firestore.Timestamp.fromDate(new Date(Date.now()+7*i*24*60*60*1e3));await sr.firestore().collection("clubs").add({clubName:e,description:n,frequency:i,users:f,activeUser:r,dueDate:o,createdAt:sr.firestore.FieldValue.serverTimestamp()});b(!0)}catch(a){console.error("Error creating book club:",a),alert("Error creating book club. Please try again.")}else l("Please fill out all required fields and select at least one user.")},className:"newBookForm",children:[(0,gl.jsxs)("div",{children:[(0,gl.jsx)("label",{children:"Club Name:"}),(0,gl.jsx)("input",{value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,gl.jsxs)("div",{children:[(0,gl.jsx)("label",{children:"Description:"}),(0,gl.jsx)("input",{value:n,onChange:e=>i(e.target.value)})]}),(0,gl.jsxs)("div",{children:[(0,gl.jsx)("label",{children:"Frequency:"}),(0,gl.jsxs)("select",{value:s,onChange:e=>o(e.target.value),required:!0,children:[(0,gl.jsx)("option",{value:"",children:"Select frequency"}),(0,gl.jsx)("option",{value:"1",children:"1 week"}),(0,gl.jsx)("option",{value:"2",children:"2 weeks"}),(0,gl.jsx)("option",{value:"3",children:"3 weeks"}),(0,gl.jsx)("option",{value:"4",children:"4 weeks"})]})]}),(0,gl.jsxs)("div",{children:[(0,gl.jsx)("label",{children:"Add Users:"}),(0,gl.jsx)("input",{type:"text",placeholder:"Search for users",value:c,onChange:e=>u(e.target.value),className:"searchField"})]}),m?(0,gl.jsx)("p",{children:"Searching..."}):(0,gl.jsx)("ul",{children:h.length>0?h.map(((e,t)=>(0,gl.jsxs)("li",{onClick:()=>(e=>{e.userId!==y.userId&&(f.some((t=>t.userId===e.userId))?p(f.filter((t=>t.userId!==e.userId))):p([...f,e]))})(e),style:{cursor:"pointer",backgroundColor:f.some((t=>t.userId===e.userId))?e.userId===(null===y||void 0===y?void 0:y.userId)?"lightgreen":"lightblue":"white"},children:[e.name," (",e.email,")"]},t))):(0,gl.jsx)("p",{children:"No users found."})}),(0,gl.jsxs)("div",{children:[(0,gl.jsx)("label",{children:"Selected Users:"}),(0,gl.jsx)("ul",{children:f.map(((e,t)=>(0,gl.jsxs)("li",{children:[e.name," (",e.email,") ",e.userId!==(null===y||void 0===y?void 0:y.userId)&&(0,gl.jsx)("button",{type:"button",onClick:()=>{var t;(t=e.userId)!==y.userId&&p(f.filter((e=>e.userId!==t)))},children:"Remove"})]},t)))})]}),a&&(0,gl.jsx)("p",{style:{color:"red"},children:a}),(0,gl.jsx)("button",{type:"submit",children:"Create Book Club"})]}),w&&(0,gl.jsxs)("div",{className:"popup",children:[(0,gl.jsxs)("h2",{children:["Welcome to ",e,"!"]}),(0,gl.jsxs)("p",{children:[_.name," has been chosen to pick the first book!"]}),(0,gl.jsxs)("p",{children:["The next book selection is due on ",new Date(Date.now()+7*s*24*60*60*1e3).toLocaleDateString(),"."]}),(0,gl.jsx)("button",{onClick:()=>{b(!1),t(""),i(""),o(""),p([y]),l("")},children:"Close"})]})]})},zA=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{const e=sr.auth().currentUser;if(e)try{const t=await sr.firestore().collection("users").doc(e.uid).get();if(t.exists){const n=t.data();i({...n,userId:e.uid})}}catch(t){console.error("Error fetching current user data:",t)}})()}),[]),(0,r.useEffect)((()=>{(async()=>{if(n){o(!0);try{const e=(await sr.firestore().collection("clubs").where("users","array-contains",n).get()).docs.map((e=>({id:e.id,...e.data()})));t(e)}catch(e){console.error("Error fetching book clubs:",e)}finally{o(!1)}}})()}),[n]),s?(0,gl.jsx)("p",{children:"Loading..."}):(0,gl.jsxs)("div",{className:"BookClubsPage",children:[(0,gl.jsx)("h1",{children:"Your Book Clubs"}),(0,gl.jsx)("button",{children:(0,gl.jsx)(Te,{to:"/newclub",children:"Create New Book Club"})}),e.length>0?(0,gl.jsx)("ul",{children:e.map((e=>(0,gl.jsxs)("li",{style:{marginBottom:"10px"},children:[(0,gl.jsx)("p",{children:e.clubName}),(0,gl.jsx)("button",{children:(0,gl.jsx)(Te,{to:"/bookclub/".concat(e.id),children:"View Book Club"})})]},e.id)))}):(0,gl.jsx)("p",{children:"You are not part of any book clubs."})]})},BA=()=>{const{clubId:e}=te(),[t,n]=(0,r.useState)(null),[i,s]=(0,r.useState)(!0),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const t=await sr.firestore().collection("clubs").doc(e).get();t.exists?n(t.data()):console.error("No such book club!")}catch(t){console.error("Error fetching book club:",t)}finally{s(!1)}})()}),[e]),(0,r.useEffect)((()=>{(async()=>{const e=sr.auth().currentUser;if(e)try{const t=await sr.firestore().collection("users").doc(e.uid).get();t.exists&&h(t.data())}catch(t){console.error("Error fetching current user data:",t)}})()}),[]),(0,r.useEffect)((()=>{if(e){const t=sr.firestore().collection("clubs").doc(e).collection("messages").orderBy("timestamp").onSnapshot((e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));c(t)}));return()=>t()}}),[e]);if(i)return(0,gl.jsx)("p",{children:"Loading..."});if(!t)return(0,gl.jsx)("p",{children:"No book club data available."});const{clubName:d,description:f,frequency:p,users:m,activeUser:g,dueDate:y}=t;return(0,gl.jsxs)("div",{className:"bookClubPage",children:[(0,gl.jsx)("h1",{children:d}),(0,gl.jsx)("p",{children:f}),(0,gl.jsxs)("p",{children:[(0,gl.jsx)("strong",{children:"Frequency:"})," Every ",p," week",p>1?"s":""]}),(0,gl.jsxs)("p",{children:[(0,gl.jsx)("strong",{children:"Next Book Selection Due:"})," ",new Date(1e3*y.seconds).toLocaleDateString()]}),(0,gl.jsx)("h2",{children:"Active User"}),g&&(0,gl.jsx)("div",{children:(0,gl.jsxs)("p",{children:[(0,gl.jsx)("strong",{children:g.name})," is currently choosing the book."]})}),(0,gl.jsx)("h2",{children:"Members"}),(0,gl.jsx)("ul",{children:m.map(((e,t)=>(0,gl.jsxs)("li",{children:[e.name," (",e.email,")"]},t)))}),(0,gl.jsxs)("div",{className:"chatBox",children:[(0,gl.jsx)("div",{className:"messageList",children:l.map((e=>{var t;return(0,gl.jsxs)("div",{className:"message ".concat(e.sender===u.name?"sent":"received"),children:[(0,gl.jsxs)("p",{children:[(0,gl.jsxs)("strong",{children:[e.sender,":"]})," ",e.text]}),(0,gl.jsx)("p",{className:"timestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toLocaleTimeString()})]},e.id)}))}),(0,gl.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),""!==o.trim())try{await sr.firestore().collection("clubs").doc(e).collection("messages").add({text:o,sender:u.name,timestamp:sr.firestore.FieldValue.serverTimestamp()}),a("")}catch(n){console.error("Error sending message:",n)}},className:"chatForm",children:[(0,gl.jsx)("input",{type:"text",value:o,onChange:e=>a(e.target.value),placeholder:"Type a message..."}),(0,gl.jsx)("button",{type:"submit",children:"Send"})]})]})]})},qA={apiKey:"AIzaSyAgfRASy7swwXQmDm2PiPIInUHi0TCdK-E",authDomain:"book-app-d28de.firebaseapp.com",projectId:"book-app-d28de",storageBucket:"book-app-d28de.appspot.com",messagingSenderId:"632379932519",appId:"1:632379932519:web:9d9d93ab0a31620ddb79c2",measurementId:"G-9XM7F353V9"},KA=Ln(qA);(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();e=dt(e);const t=Tn(e,tA);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Tn(e,tA);if(n.isInitialized()){const e=n.getImmediate();if(Ze(t,n.getOptions()))return e;throw lA.create("already-initialized")}const r=n.initialize({options:t})}(e)})(KA),function(e,t){const n="string"==typeof e?e:t||"(default)",r=Tn("object"==typeof e?e:Fn(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Fe("firestore");e&&XI(r,...e)}}(KA);sr.initializeApp(qA);const HA=function(){const[e,t]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const e=sr.auth().onAuthStateChanged((e=>{t(e?{email:e.email}:null)}));return()=>e()}),[]),(0,gl.jsx)(Se,{children:(0,gl.jsxs)("div",{children:[(0,gl.jsx)(yl,{}),(0,gl.jsxs)(ye,{children:[(0,gl.jsx)(me,{path:"/",element:(0,gl.jsx)(ax,{setUser:t})}),(0,gl.jsx)(me,{path:"/review/:bookId",element:(0,gl.jsx)(sx,{})}),(0,gl.jsx)(me,{path:"/signup",element:(0,gl.jsx)(ox,{setUser:t})}),(0,gl.jsx)(me,{path:"/explore",element:(0,gl.jsx)(cT,{})}),(0,gl.jsx)(me,{path:"/users",element:(0,gl.jsx)(UA,{})}),(0,gl.jsx)(me,{path:"/user/:userId",element:(0,gl.jsx)(aT,{})}),(0,gl.jsx)(me,{path:"/newclub",element:(0,gl.jsx)(VA,{})}),(0,gl.jsx)(me,{path:"/clubs",element:(0,gl.jsx)(zA,{})}),(0,gl.jsx)(me,{path:"/bookclub/:clubId",element:(0,gl.jsx)(BA,{})})]})]})})},GA=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};s.createRoot(document.getElementById("root")).render((0,gl.jsx)(r.StrictMode,{children:(0,gl.jsx)(HA,{})})),GA()})()})();
//# sourceMappingURL=main.1621b1da.js.map